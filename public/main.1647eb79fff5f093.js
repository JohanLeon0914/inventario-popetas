"use strict";(self.webpackChunkapp_crud_angular_firebase=self.webpackChunkapp_crud_angular_firebase||[]).push([[179],{2011:(lt,Ce,k)=>{k.d(Ce,{Dh:()=>ce,GT:()=>ue,cc:()=>xe,hO:()=>ke,on:()=>U,pX:()=>re,xv:()=>le});var f=k(4650),J=k(9260),O=k(2122);lt=k.hmd(lt);const ie=["ngOnDestroy"],re=(de,Qe,ot,Se={})=>new Proxy(de,{get:(ve,Ee)=>ot.runOutsideAngular(()=>{var Ve;if(de[Ee])return!(null===(Ve=Se?.spy)||void 0===Ve)&&Ve.get&&Se.spy.get(Ee,de[Ee]),de[Ee];if(ie.indexOf(Ee)>-1)return()=>{};const Be=Qe.toPromise().then(V=>{const pe=V&&V[Ee];return"function"==typeof pe?pe.bind(V):pe&&pe.then?pe.then(q=>ot.run(()=>q)):ot.run(()=>pe)});return new Proxy(()=>{},{get:(V,pe)=>Be[pe],apply:(V,pe,q)=>Be.then(Q=>{var ne;const ee=Q&&Q(...q);return!(null===(ne=Se?.spy)||void 0===ne)&&ne.apply&&Se.spy.apply(Ee,q,ee),ee})})})}),ue=(de,Qe)=>{Qe.forEach(ot=>{Object.getOwnPropertyNames(ot.prototype||ot).forEach(Se=>{Object.defineProperty(de.prototype,Se,Object.getOwnPropertyDescriptor(ot.prototype||ot,Se))})})};class ae{constructor(Qe){return Qe}}const ce=new f.OlP("angularfire2.app.options"),le=new f.OlP("angularfire2.app.name");function U(de,Qe,ot){const ve="object"==typeof ot&&ot||{};ve.name=ve.name||"string"==typeof ot&&ot||"[DEFAULT]";const Ve=J.Z.apps.filter(Be=>Be&&Be.name===ve.name)[0]||Qe.runOutsideAngular(()=>J.Z.initializeApp(de,ve));try{JSON.stringify(de)!==JSON.stringify(Ve.options)&&B("error",`${Ve.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae(Ve)}const B=(de,...Qe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[de](...Qe)},W={provide:ae,useFactory:U,deps:[ce,f.R0b,[new f.FiY,le]]};let ke=(()=>{class de{constructor(ot){J.Z.registerVersion("angularfire",O.q4.full,"core"),J.Z.registerVersion("angularfire",O.q4.full,"app-compat"),J.Z.registerVersion("angular",f.q4F.full,ot.toString())}static initializeApp(ot,Se){return{ngModule:de,providers:[{provide:ce,useValue:ot},{provide:le,useValue:Se}]}}}return de.\u0275fac=function(ot){return new(ot||de)(f.LFG(f.Lbi))},de.\u0275mod=f.oAB({type:de}),de.\u0275inj=f.cJS({providers:[W]}),de})();function xe(de,Qe,ot,Se,ve){const[,Ee,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===de)||[];if(Ee)return function we(de,Qe){try{return de.toString()===Qe.toString()}catch{return de===Qe}}(ve,Ve)||(ge("error",`${Qe} was already initialized on the ${ot} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ve,was:Ve})),Ee;{const Be=Se();return globalThis.\u0275AngularfireInstanceCache.push([de,Be,ve]),Be}}const tt=!!lt.hot,ge=(de,...Qe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[de](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(lt,Ce,k)=>{k.d(Ce,{q4:()=>Or,iC:()=>es,HU:()=>xu,vb:()=>Kr,JM:()=>va});var f=k(4650),J=k(259),O=k(5861),ie=k(9681),re=k(2090),ue=k(4859),ae=k(1877),ce=k(8766);const le="@firebase/installations",U="0.6.0",W=`w:${U}`,ke="FIS_v2",Qe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ot(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Se({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:Q(D.expiresIn),creationTime:Date.now()}}function Ee(D,b){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Qe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:b}){const x=Be(D);return x.append("Authorization",function ne(D){return`${ke} ${D}`}(b)),x}function pe(D){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function Q(D){return Number(D.replace("s","000"))}function ee(D,b){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=Se(D),Z=Be(D),te=b.getImmediate({optional:!0});if(te){const it=yield te.getHeartbeatsHeader();it&&Z.append("x-firebase-client",it)}const Ke={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:ke,appId:D.appId,sdkVersion:W})},nt=yield pe(()=>fetch(F,Ke));if(nt.ok){const it=yield nt.json();return{fid:it.fid||x,registrationStatus:2,refreshToken:it.refreshToken,authToken:ve(it.authToken)}}throw yield Ee("Create Installation",nt)})).apply(this,arguments)}function Re(D){return new Promise(b=>{setTimeout(b,D)})}const Yt=/^[cdef][\w-]{21}$/;function ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function an(D){return function dt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Yt.test(x)?x:""}catch{return""}}function mn(D){return`${D.appName}!${D.appId}`}const Zt=new Map;function Qt(D,b){const x=mn(D);un(x,b),function $i(D,b){const x=function xr(){return!gi&&"BroadcastChannel"in self&&(gi=new BroadcastChannel("[Firebase] FID Change"),gi.onmessage=D=>{un(D.data.key,D.data.fid)}),gi}();x&&x.postMessage({key:D,fid:b}),function $r(){0===Zt.size&&gi&&(gi.close(),gi=null)}()}(x,b)}function un(D,b){const x=Zt.get(D);if(x)for(const F of x)F(b)}let gi=null;const ti="firebase-installations-store";let ni=null;function Zo(){return ni||(ni=(0,ce.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(ti)}})),ni}function Ze(D,b){return yr.apply(this,arguments)}function yr(){return(yr=(0,O.Z)(function*(D,b){const x=mn(D),Z=(yield Zo()).transaction(ti,"readwrite"),te=Z.objectStore(ti),be=yield te.get(x);return yield te.put(b,x),yield Z.done,(!be||be.fid!==b.fid)&&Qt(D,b.fid),b})).apply(this,arguments)}function gs(D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(D){const b=mn(D),F=(yield Zo()).transaction(ti,"readwrite");yield F.objectStore(ti).delete(b),yield F.done})).apply(this,arguments)}function ri(D,b){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(D,b){const x=mn(D),Z=(yield Zo()).transaction(ti,"readwrite"),te=Z.objectStore(ti),be=yield te.get(x),Ke=b(be);return void 0===Ke?yield te.delete(x):yield te.put(Ke,x),yield Z.done,Ke&&(!be||be.fid!==Ke.fid)&&Qt(D,Ke.fid),Ke})).apply(this,arguments)}function An(D){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(D){let b;const x=yield ri(D.appConfig,F=>{const Z=hn(F),te=ft(D,Z);return b=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function hn(D){return bt(D||{fid:ze(),registrationStatus:0})}function ft(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Qe.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function ut(D,b){return rn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:dr(D)}:{installationEntry:b}}function rn(){return(rn=(0,O.Z)(function*(D,b){try{const x=yield ee(D,b);return Ze(D.appConfig,x)}catch(x){throw ot(x)&&409===x.customData.serverCode?yield gs(D.appConfig):yield Ze(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function dr(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,O.Z)(function*(D){let b=yield Hr(D.appConfig);for(;1===b.registrationStatus;)yield Re(100),b=yield Hr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield An(D);return F||x}return b})).apply(this,arguments)}function Hr(D){return ri(D,b=>{if(!b)throw Qe.create("installation-not-found");return bt(b)})}function bt(D){return function ms(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Jt(D,b){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=Xt(D,x),Z=V(D,x),te=b.getImmediate({optional:!0});if(te){const it=yield te.getHeartbeatsHeader();it&&Z.append("x-firebase-client",it)}const Ke={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:W,appId:D.appId}})},nt=yield pe(()=>fetch(F,Ke));if(nt.ok)return ve(yield nt.json());throw yield Ee("Generate Auth Token",nt)})).apply(this,arguments)}function Xt(D,{fid:b}){return`${Se(D)}/${b}/authTokens:generate`}function qn(D){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,O.Z)(function*(D,b=!1){let x;const F=yield ri(D.appConfig,te=>{if(!Ot(te))throw Qe.create("not-registered");const be=te.authToken;if(!b&&j(be))return te;if(1===be.requestStatus)return x=Xe(D,b),te;{if(!navigator.onLine)throw Qe.create("app-offline");const Ke=z(te);return x=Et(D,Ke),Ke}});return x?yield x:F.authToken})).apply(this,arguments)}function Xe(D,b){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,O.Z)(function*(D,b){let x=yield Je(D.appConfig);for(;1===x.authToken.requestStatus;)yield Re(100),x=yield Je(D.appConfig);const F=x.authToken;return 0===F.requestStatus?qn(D,b):F})).apply(this,arguments)}function Je(D){return ri(D,b=>{if(!Ot(b))throw Qe.create("not-registered");return function _e(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Et(D,b){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,O.Z)(function*(D,b){try{const x=yield Jt(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield Ze(D.appConfig,F),x}catch(x){if(!ot(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Ze(D.appConfig,F)}else yield gs(D.appConfig);throw x}})).apply(this,arguments)}function Ot(D){return void 0!==D&&2===D.registrationStatus}function j(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function z(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function $e(){return($e=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield An(b);return F?F.catch(console.error):qn(b).catch(console.error),x.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,O.Z)(function*(D,b=!1){const x=D;return yield dn(x),(yield qn(x,b)).token})).apply(this,arguments)}function dn(D){return qt.apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(D){const{registrationPromise:b}=yield An(D);b&&(yield b)})).apply(this,arguments)}function ys(D){return Qe.create("missing-app-config-values",{valueName:D})}const wo="installations",_n=D=>{const b=D.getProvider("app").getImmediate(),x=function yn(D){if(!D||!D.options)throw ys("App Configuration");if(!D.name)throw ys("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw ys(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Hs=D=>{const b=D.getProvider("app").getImmediate(),x=(0,ie._getProvider)(b,wo).getImmediate();return{getId:()=>function K(D){return $e.apply(this,arguments)}(x),getToken:Z=>function ht(D){return Kt.apply(this,arguments)}(x,Z)}};(function Wa(){(0,ie._registerComponent)(new ue.wA(wo,_n,"PUBLIC")),(0,ie._registerComponent)(new ue.wA("installations-internal",Hs,"PRIVATE"))})(),(0,ie.registerVersion)(le,U),(0,ie.registerVersion)(le,U,"esm2017");const Mi="@firebase/remote-config",Vn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Kh{constructor(b,x,F,Z){this.client=b,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Z}.`),Z}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return Z;b.eTag=Z&&Z.eTag;const te=yield x.client.fetch(b),be=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&be.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(be),te})()}}function Dc(D=navigator){return D.languages&&D.languages[0]||D.language}class Cc{constructor(b,x,F,Z,te,be){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=te,this.appId=be}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},nt={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:Z,app_id:x.appId,language_code:Dc()},it={method:"POST",headers:Ke,body:JSON.stringify(nt)},Mt=fetch(be,it),_t=new Promise((or,kr)=>{b.signal.addEventListener(()=>{const Kn=new Error("The operation was aborted.");Kn.name="AbortError",kr(Kn)})});let Un;try{yield Promise.race([Mt,_t]),Un=yield Mt}catch(or){let kr="fetch-client-network";throw"AbortError"===or?.name&&(kr="fetch-timeout"),Vn.create(kr,{originalErrorMessage:or?.message})}let Sn=Un.status;const Ms=Un.headers.get("ETag")||void 0;let io,so;if(200===Un.status){let or;try{or=yield Un.json()}catch(kr){throw Vn.create("fetch-client-parse",{originalErrorMessage:kr?.message})}io=or.entries,so=or.state}if("INSTANCE_STATE_UNSPECIFIED"===so?Sn=500:"NO_CHANGE"===so?Sn=304:("NO_TEMPLATE"===so||"EMPTY_CONFIG"===so)&&(io={}),304!==Sn&&200!==Sn)throw Vn.create("fetch-status",{httpStatus:Sn});return{status:Sn,eTag:Ms,config:io}})()}}class Gp{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,O.Z)(function*(){yield function Wn(D,b){return new Promise((x,F)=>{const Z=Math.max(b-Date.now(),0),te=setTimeout(x,Z);D.addEventListener(()=>{clearTimeout(te),F(Vn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const te=yield Z.client.fetch(b);return yield Z.storage.deleteThrottleMetadata(),te}catch(te){if(!function ed(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(te))throw te;const be={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(be),Z.attemptFetch(b,be)}})()}}class td{constructor(b,x,F,Z,te){this.app=b,this._client=x,this._storageCache=F,this._storage=Z,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bc(D,b){const x=D.target.error||void 0;return Vn.create(b,{originalErrorMessage:x&&x?.message})}const Is="app_namespace_store";class Zp{constructor(b,x,F,Z=function Wp(){return new Promise((D,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{b(bc(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Is,{keyPath:"compositeKey"})}}catch(x){b(Vn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,te)=>{const Ke=F.transaction([Is],"readonly").objectStore(Is),nt=x.createCompositeKey(b);try{const it=Ke.get(nt);it.onerror=Mt=>{te(bc(Mt,"storage-get"))},it.onsuccess=Mt=>{const _t=Mt.target.result;Z(_t?_t.value:void 0)}}catch(it){te(Vn.create("storage-get",{originalErrorMessage:it?.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((te,be)=>{const nt=Z.transaction([Is],"readwrite").objectStore(Is),it=F.createCompositeKey(b);try{const Mt=nt.put({compositeKey:it,value:x});Mt.onerror=_t=>{be(bc(_t,"storage-set"))},Mt.onsuccess=()=>{te()}}catch(Mt){be(Vn.create("storage-set",{originalErrorMessage:Mt?.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,te)=>{const Ke=F.transaction([Is],"readwrite").objectStore(Is),nt=x.createCompositeKey(b);try{const it=Ke.delete(nt);it.onerror=Mt=>{te(bc(Mt,"storage-delete"))},it.onsuccess=()=>{Z()}}catch(it){te(Vn.create("storage-delete",{originalErrorMessage:it?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class rd{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),Z=b.storage.getActiveConfig(),te=yield x;te&&(b.lastFetchStatus=te);const be=yield F;be&&(b.lastSuccessfulFetchTimestampMillis=be);const Ke=yield Z;Ke&&(b.activeConfig=Ke)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Ya(){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function Ds(){(0,ie._registerComponent)(new ue.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),Z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Vn.create("registration-window");if(!(0,re.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:te,apiKey:be,appId:Ke}=F.options;if(!te)throw Vn.create("registration-project-id");if(!be)throw Vn.create("registration-api-key");if(!Ke)throw Vn.create("registration-app-id");const nt=new Zp(Ke,F.name,x=x||"firebase"),it=new rd(nt),Mt=new ae.Yd(Mi);Mt.logLevel=ae.in.ERROR;const _t=new Cc(Z,ie.SDK_VERSION,x,te,be,Ke),Un=new Gp(_t,nt),Sn=new Kh(Un,nt,it,Mt),Ms=new td(F,Sn,it,nt,Mt);return function fr(D){const b=(0,re.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ms),Ms},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Mi,"0.4.0"),(0,ie.registerVersion)(Mi,"0.4.0","esm2017")}();const Ri="/firebase-messaging-sw.js",Gi="/firebase-cloud-messaging-push-scope",qi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Qo="google.c.a.c_id",Qa="google.c.a.c_l",Tc="google.c.a.ts",Qh="google.c.a.e";var zi=(()=>{return(D=zi||(zi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",zi;var D})();function ii(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let te=0;te<F.length;++te)Z[te]=F.charCodeAt(te);return Z}const Eo="fcm_token_details_db",pr="fcm_token_object_Store";function Jh(D){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Eo))return null;let b=null;return(yield(0,ce.X3)(Eo,5,{upgrade:(F=(0,O.Z)(function*(Z,te,be,Ke){var nt;if(te<2||!Z.objectStoreNames.contains(pr))return;const it=Ke.objectStore(pr),Mt=yield it.index("fcmSenderId").get(D);if(yield it.clear(),Mt)if(2===te){const _t=Mt;if(!_t.auth||!_t.p256dh||!_t.endpoint)return;b={token:_t.fcmToken,createTime:null!==(nt=_t.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:_t.auth,p256dh:_t.p256dh,endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:"string"==typeof _t.vapidKey?_t.vapidKey:ii(_t.vapidKey)}}}else if(3===te){const _t=Mt;b={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:ii(_t.auth),p256dh:ii(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:ii(_t.vapidKey)}}}else if(4===te){const _t=Mt;b={token:_t.fcmToken,createTime:_t.createTime,subscriptionOptions:{auth:ii(_t.auth),p256dh:ii(_t.p256dh),endpoint:_t.endpoint,swScope:_t.swScope,vapidKey:ii(_t.vapidKey)}}}}),function(te,be,Ke,nt){return F.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Eo),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),In(b)?b:null;var F}),Xh.apply(this,arguments)}function In(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const si="firebase-messaging-store";let _r=null;function Xa(){return _r||(_r=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(si)}})),_r}function Io(D){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,O.Z)(function*(D){const b=vi(D),F=yield(yield Xa()).transaction(si).objectStore(si).get(b);if(F)return F;{const Z=yield Jh(D.appConfig.senderId);if(Z)return yield zt(D,Z),Z}})).apply(this,arguments)}function zt(D,b){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(D,b){const x=vi(D),Z=(yield Xa()).transaction(si,"readwrite");return yield Z.objectStore(si).put(b,x),yield Z.done,b})).apply(this,arguments)}function zs(D){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D){const b=vi(D),F=(yield Xa()).transaction(si,"readwrite");yield F.objectStore(si).delete(b),yield F.done})).apply(this,arguments)}function vi({appConfig:D}){return D.appId}const wn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function It(D,b){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(D,b){const x=yield Ac(D),F=De(b),Z={method:"POST",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Zi(D.appConfig),Z)).json()}catch(be){throw wn.create("token-subscribe-failed",{errorInfo:be?.toString()})}if(te.error)throw wn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw wn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function tf(D,b){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(D,b){const x=yield Ac(D),F=De(b.subscriptionOptions),Z={method:"PATCH",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Zi(D.appConfig)}/${b.token}`,Z)).json()}catch(be){throw wn.create("token-update-failed",{errorInfo:be?.toString()})}if(te.error)throw wn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw wn.create("token-update-no-token");return te.token})).apply(this,arguments)}function su(D,b){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Ac(D)};try{const te=yield(yield fetch(`${Zi(D.appConfig)}/${b}`,F)).json();if(te.error)throw wn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(Z){throw wn.create("token-unsubscribe-failed",{errorInfo:Z?.toString()})}})).apply(this,arguments)}function Zi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ac(D){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function De({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:b,p256dh:D}};return F!==qi&&(Z.web.applicationPubKey=F),Z}const jt=6048e5;function ou(D){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(D){const b=yield xc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:ii(b.getKey("auth")),p256dh:ii(b.getKey("p256dh"))},F=yield Io(D.firebaseDependencies);if(F){if(ad(F.subscriptionOptions,x))return Date.now()>=F.createTime+jt?Do(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield su(D.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return ea(D.firebaseDependencies,x)}return ea(D.firebaseDependencies,x)})).apply(this,arguments)}function Dn(D){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(D){const b=yield Io(D.firebaseDependencies);b&&(yield su(D.firebaseDependencies,b.token),yield zs(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Do(D,b){return oi.apply(this,arguments)}function oi(){return(oi=(0,O.Z)(function*(D,b){try{const x=yield tf(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield zt(D.firebaseDependencies,F),x}catch(x){throw yield Dn(D),x}})).apply(this,arguments)}function ea(D,b){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(D,b){const F={token:yield It(D,b),createTime:Date.now(),subscriptionOptions:b};return yield zt(D,F),F.token})).apply(this,arguments)}function xc(D,b){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qr(b)})})).apply(this,arguments)}function ad(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function na(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Cn(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const Z=b.notification.image;Z&&(D.notification.image=Z);const te=b.notification.icon;te&&(D.notification.icon=te)}(b,D),function Ni(D,b){!b.data||(D.data=b.data)}(b,D),function Rc(D,b){var x,F,Z,te,be;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Ke=null!==(Z=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Z?Z:null===(te=b.notification)||void 0===te?void 0:te.click_action;Ke&&(D.fcmOptions.link=Ke);const nt=null===(be=b.fcmOptions)||void 0===be?void 0:be.analytics_label;nt&&(D.fcmOptions.analyticsLabel=nt)}(b,D),b}function Ws(D){return"object"==typeof D&&!!D&&Qo in D}function Ki(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function ra(D){return wn.create("missing-app-config-values",{valueName:D})}Ki("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ki("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Yp{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Kp(D){if(!D||!D.options)throw ra("App Configuration Object");if(!D.name)throw ra("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw ra(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Nc(D){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Ri,{scope:Gi}),D.swRegistration.update().catch(()=>{})}catch(b){throw wn.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function ia(D,b){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Nc(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function sa(D,b){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=qi)})).apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(D,b){if(!navigator)throw wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wn.create("permission-blocked");return yield sa(D,b?.vapidKey),yield ia(D,b?.serviceWorkerRegistration),ou(D)})).apply(this,arguments)}function kc(D,b,x){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,O.Z)(function*(D,b,x){const F=Lc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Qo],message_name:x[Qa],message_time:x[Tc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Lc(D){switch(D){case zi.NOTIFICATION_CLICKED:return"notification_open";case zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zs(){return(Zs=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===zi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(na(x)):D.onMessageHandler.next(na(x)));const F=x.data;Ws(F)&&"1"===F[Qh]&&(yield kc(D,x.messageType,F))})).apply(this,arguments)}const Ks="@firebase/messaging",Zn=D=>{const b=new Yp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ud(D,b){return Zs.apply(this,arguments)}(b,x)),b},zr=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function lu(D,b){return du.apply(this,arguments)}(b,F)}};function cd(){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function fn(){(0,ie._registerComponent)(new ue.wA("messaging",Zn,"PUBLIC")),(0,ie._registerComponent)(new ue.wA("messaging-internal",zr,"PRIVATE")),(0,ie.registerVersion)(Ks,"0.12.0"),(0,ie.registerVersion)(Ks,"0.12.0","esm2017")}();const bo="analytics",hd="firebase_id",Qs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",gu="https://www.googletagmanager.com/gtag/js",bn=new ae.Yd("@firebase/analytics");function mu(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function yu(D,b){const x=document.createElement("script");x.src=`${gu}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function rf(D,b,x,F,Z,te){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(D,b,x,F,Z,te){const be=F[Z];try{if(be)yield b[be];else{const nt=(yield mu(x)).find(it=>it.measurementId===Z);nt&&(yield b[nt.appId])}}catch(Ke){bn.error(Ke)}D("config",Z,te)})).apply(this,arguments)}function So(D,b,x,F,Z){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(D,b,x,F,Z){try{let te=[];if(Z&&Z.send_to){let be=Z.send_to;Array.isArray(be)||(be=[be]);const Ke=yield mu(x);for(const nt of be){const it=Ke.find(_t=>_t.measurementId===nt),Mt=it&&b[it.appId];if(!Mt){te=[];break}te.push(Mt)}}0===te.length&&(te=Object.values(b)),yield Promise.all(te),D("event",F,Z||{})}catch(te){bn.error(te)}})).apply(this,arguments)}function pd(D){const b=window.document.getElementsByTagName("script");for(const x of Object.values(b))if(x.src&&x.src.includes(gu)&&x.src.includes(D))return x;return null}const ir=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ca=new class Oi{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function md(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function la(D){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,Z={method:"GET",headers:md(F)},te=Qs.replace("{app-id}",x),be=yield fetch(te,Z);if(200!==be.status&&304!==be.status){let Ke="";try{const nt=yield be.json();null!==(b=nt.error)&&void 0!==b&&b.message&&(Ke=nt.error.message)}catch{}throw ir.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Ke})}return be.json()})).apply(this,arguments)}function xn(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(D,b=ca,x){const{appId:F,apiKey:Z,measurementId:te}=D.options;if(!F)throw ir.create("no-app-id");if(!Z){if(te)return{measurementId:te,appId:F};throw ir.create("no-api-key")}const be=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Eu;return setTimeout((0,O.Z)(function*(){Ke.abort()}),void 0!==x?x:6e4),_u({appId:F,apiKey:Z,measurementId:te},be,Ke,b)})).apply(this,arguments)}function _u(D,b,x){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,Z=ca){var te;const{appId:be,measurementId:Ke}=D;try{yield da(F,b)}catch(nt){if(Ke)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${nt?.message}]`),{appId:be,measurementId:Ke};throw nt}try{const nt=yield la(D);return Z.deleteThrottleMetadata(be),nt}catch(nt){const it=nt;if(!wu(it)){if(Z.deleteThrottleMetadata(be),Ke)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${it?.message}]`),{appId:be,measurementId:Ke};throw nt}const Mt=503===Number(null===(te=it?.customData)||void 0===te?void 0:te.httpStatus)?(0,re.$s)(x,Z.intervalMillis,30):(0,re.$s)(x,Z.intervalMillis),_t={throttleEndTimeMillis:Date.now()+Mt,backoffCount:x+1};return Z.setThrottleMetadata(be,_t),bn.debug(`Calling attemptFetch again in ${Mt} millis`),_u(D,_t,F,Z)}})).apply(this,arguments)}function da(D,b){return new Promise((x,F)=>{const Z=Math.max(b-Date.now(),0),te=setTimeout(x,Z);D.addEventListener(()=>{clearTimeout(te),F(ir.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function wu(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Eu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Ts,fa;function Ss(){return(Ss=(0,O.Z)(function*(D,b,x,F,Z){if(Z&&Z.global)D("event",x,F);else{const te=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function to(D){fa=D}function Hc(D){Ts=D}function Qi(){return Du.apply(this,arguments)}function Du(){return(Du=(0,O.Z)(function*(){if(!(0,re.hl)())return bn.warn(ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return bn.warn(ir.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(D,b,x,F,Z,te,be){var Ke;const nt=xn(D);nt.then(Sn=>{x[Sn.measurementId]=Sn.appId,D.options.measurementId&&Sn.measurementId!==D.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sn=>bn.error(Sn)),b.push(nt);const it=Qi().then(Sn=>{if(Sn)return F.getId()}),[Mt,_t]=yield Promise.all([nt,it]);pd(te)||yu(te,Mt.measurementId),fa&&(Z("consent","default",fa),to(void 0)),Z("js",new Date);const Un=null!==(Ke=be?.config)&&void 0!==Ke?Ke:{};return Un.origin="firebase",Un.update=!0,null!=_t&&(Un[hd]=_t),Z("config",Mt.measurementId,Un),Ts&&(Z("set",Ts),Hc(void 0)),Mt.measurementId})).apply(this,arguments)}class Cu{constructor(b){this.app=b}_delete(){return delete Wr[this.app.options.appId],Promise.resolve()}}let Wr={},As=[];const Ro={};let Oo,no,No="dataLayer",pa=!1;function hy(D,b,x){!function Qp(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=ir.create("invalid-analytics-context",{errorInfo:b});bn.warn(x.message)}}();const F=D.options.appId;if(!F)throw ir.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ir.create("no-api-key");bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wr[F])throw ir.create("already-exists",{id:F});if(!pa){!function fd(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(No);const{wrappedGtag:te,gtagCore:be}=function oa(D,b,x,F,Z){let te=function(...be){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(te=window[Z]),window[Z]=function vu(D,b,x,F){function te(){return(te=(0,O.Z)(function*(be,Ke,nt){try{"event"===be?yield So(D,b,x,Ke,nt):"config"===be?yield rf(D,b,x,F,Ke,nt):"consent"===be?D("consent","update",nt):D("set",Ke)}catch(it){bn.error(it)}})).apply(this,arguments)}return function Z(be,Ke,nt){return te.apply(this,arguments)}}(te,D,b,x),{gtagCore:te,wrappedGtag:window[Z]}}(Wr,As,Ro,No,"gtag");no=te,Oo=be,pa=!0}return Wr[F]=function xo(D,b,x,F,Z,te,be){return Mo.apply(this,arguments)}(D,As,Ro,b,Oo,No,x),new Cu(D)}function py(){return sf.apply(this,arguments)}function sf(){return(sf=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const af="@firebase/analytics";!function Zr(){(0,ie._registerComponent)(new ue.wA(bo,(b,{options:x})=>hy(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new ue.wA("analytics-internal",function D(b){try{const x=b.getProvider(bo).getImmediate();return{logEvent:(F,Z,te)=>function ln(D,b,x,F){D=(0,re.m9)(D),function yd(D,b,x,F,Z){return Ss.apply(this,arguments)}(no,Wr[D.app.options.appId],b,x,F).catch(Z=>bn.error(Z))}(x,F,Z,te)}}catch(x){throw ir.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(af,"0.9.0"),(0,ie.registerVersion)(af,"0.9.0","esm2017")}();var wi=k(4408),Po=k(7565);const Ji=new class Ei extends Po.v{}(class qc extends wi.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):(b.flush(this),0)}});var vt=k(4986),Su=k(8505),ko=k(9468),ga=k(5363);const Or=new f.GfV("7.5.0"),ma="__angularfire_symbol__analyticsIsSupportedValue",Xi="__angularfire_symbol__analyticsIsSupported",Pi="__angularfire_symbol__remoteConfigIsSupportedValue",Pr="__angularfire_symbol__remoteConfigIsSupported",zc="__angularfire_symbol__messagingIsSupportedValue",Au="__angularfire_symbol__messagingIsSupported";function va(D,b,x){if(b){if(1===b.length)return b[0];const te=b.filter(be=>be.app===x);if(1===te.length)return te[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Xi]||(globalThis[Xi]=py().then(D=>globalThis[ma]=D).catch(()=>globalThis[ma]=!1)),globalThis[Au]||(globalThis[Au]=cd().then(D=>globalThis[zc]=D).catch(()=>globalThis[zc]=!1)),globalThis[Pr]||(globalThis[Pr]=Ya().then(D=>globalThis[Pi]=D).catch(()=>globalThis[Pi]=!1));const Kr=(D,b)=>{const x=b?[b]:(0,J.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(D).instances.forEach(be=>{F.includes(be)||F.push(be)})}),F};function Lo(){}class gn{constructor(b,x=Ji){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const Z=this.zone;return this.delegate.schedule(function(be){Z.runGuarded(()=>{b.apply(this,[be])})},x,F)}}class ki{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lo,{},Lo,Lo)),x.pipe((0,Su.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new gn(Zone.current)),this.insideAngular=x.run(()=>new gn(Zone.current,vt.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(f.LFG(f.R0b))},D.\u0275prov=f.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function xs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function es(D){return xs(),function Wc(D){return function(x){return(x=x.lift(new ki(D.ngZone))).pipe((0,ko.R)(D.outsideAngular),(0,ga.Q)(D.insideAngular))}}(xs())(D)}},2090:(lt,Ce,k)=>{k.d(Ce,{$s:()=>Je,BH:()=>Lt,G6:()=>Ee,L:()=>ce,LL:()=>Zt,Pz:()=>Yt,Sg:()=>ze,UG:()=>we,US:()=>ue,ZB:()=>B,ZR:()=>mn,aH:()=>dt,b$:()=>de,eu:()=>Be,hl:()=>Ve,jU:()=>tt,m9:()=>Ot,ne:()=>kn,pd:()=>Ai,r3:()=>mi,ru:()=>ge,tV:()=>le,uI:()=>xe,vZ:()=>Ze,w1:()=>ot,xO:()=>Gn,xb:()=>ni,z$:()=>ke,zI:()=>V,zd:()=>ri});const ie=function(j){const L=[];let z=0;for(let _e=0;_e<j.length;_e++){let K=j.charCodeAt(_e);K<128?L[z++]=K:K<2048?(L[z++]=K>>6|192,L[z++]=63&K|128):55296==(64512&K)&&_e+1<j.length&&56320==(64512&j.charCodeAt(_e+1))?(K=65536+((1023&K)<<10)+(1023&j.charCodeAt(++_e)),L[z++]=K>>18|240,L[z++]=K>>12&63|128,L[z++]=K>>6&63|128,L[z++]=63&K|128):(L[z++]=K>>12|224,L[z++]=K>>6&63|128,L[z++]=63&K|128)}return L},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,L){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let K=0;K<j.length;K+=3){const $e=j[K],ht=K+1<j.length,Kt=ht?j[K+1]:0,dn=K+2<j.length,qt=dn?j[K+2]:0;let Pt=(15&Kt)<<2|qt>>6,nr=63&qt;dn||(nr=64,ht||(Pt=64)),_e.push(z[$e>>2],z[(3&$e)<<4|Kt>>4],z[Pt],z[nr])}return _e.join("")},encodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(j):this.encodeByteArray(ie(j),L)},decodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(j):function(j){const L=[];let z=0,_e=0;for(;z<j.length;){const K=j[z++];if(K<128)L[_e++]=String.fromCharCode(K);else if(K>191&&K<224){const $e=j[z++];L[_e++]=String.fromCharCode((31&K)<<6|63&$e)}else if(K>239&&K<365){const dn=((7&K)<<18|(63&j[z++])<<12|(63&j[z++])<<6|63&j[z++])-65536;L[_e++]=String.fromCharCode(55296+(dn>>10)),L[_e++]=String.fromCharCode(56320+(1023&dn))}else{const $e=j[z++],ht=j[z++];L[_e++]=String.fromCharCode((15&K)<<12|(63&$e)<<6|63&ht)}}return L.join("")}(this.decodeStringToByteArray(j,L))},decodeStringToByteArray(j,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let K=0;K<j.length;){const $e=z[j.charAt(K++)],Kt=K<j.length?z[j.charAt(K)]:0;++K;const qt=K<j.length?z[j.charAt(K)]:64;++K;const je=K<j.length?z[j.charAt(K)]:64;if(++K,null==$e||null==Kt||null==qt||null==je)throw Error();_e.push($e<<2|Kt>>4),64!==qt&&(_e.push(Kt<<4&240|qt>>2),64!==je&&_e.push(qt<<6&192|je))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ce=function(j){return function(j){const L=ie(j);return ue.encodeByteArray(L,!0)}(j).replace(/\./g,"")},le=function(j){try{return ue.decodeString(j,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function B(j,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!W(z)||(j[z]=B(j[z],L[z]));return j}function W(j){return"__proto__"!==j}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function tt(){return"object"==typeof self&&self.self===self}function ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function de(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ot(){const j=ke();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ee(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((j,L)=>{try{let z=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(_e);K.onsuccess=()=>{K.result.close(),z||self.indexedDB.deleteDatabase(_e),j(!0)},K.onupgradeneeded=()=>{z=!1},K.onerror=()=>{var $e;L((null===($e=K.error)||void 0===$e?void 0:$e.message)||"")}}catch(z){L(z)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ee=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=j&&le(j[1]);return L&&JSON.parse(L)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},dt=()=>{var j;return null===(j=ee())||void 0===j?void 0:j.config},Yt=j=>{var L;return null===(L=ee())||void 0===L?void 0:L[`_${j}`]};class Lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,_e)=>{z?this.reject(z):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,_e))}}}function ze(j,L){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",K=j.iat||0,$e=j.sub||j.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:K,exp:K+3600,auth_time:K,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(ht)),""].join(".")}class mn extends Error{constructor(L,z,_e){super(z),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(L,z,_e){this.service=L,this.serviceName=z,this.errors=_e}create(L,...z){const _e=z[0]||{},K=`${this.service}/${L}`,$e=this.errors[L],ht=$e?function Qt(j,L){return j.replace(Ar,(z,_e)=>{const K=L[_e];return null!=K?String(K):`<${_e}?>`})}($e,_e):"Error";return new mn(K,`${this.serviceName}: ${ht} (${K}).`,_e)}}const Ar=/\{\$([^}]+)}/g;function mi(j,L){return Object.prototype.hasOwnProperty.call(j,L)}function ni(j){for(const L in j)if(Object.prototype.hasOwnProperty.call(j,L))return!1;return!0}function Ze(j,L){if(j===L)return!0;const z=Object.keys(j),_e=Object.keys(L);for(const K of z){if(!_e.includes(K))return!1;const $e=j[K],ht=L[K];if(yr($e)&&yr(ht)){if(!Ze($e,ht))return!1}else if($e!==ht)return!1}for(const K of _e)if(!z.includes(K))return!1;return!0}function yr(j){return null!==j&&"object"==typeof j}function Gn(j){const L=[];for(const[z,_e]of Object.entries(j))Array.isArray(_e)?_e.forEach(K=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function ri(j){const L={};return j.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[K,$e]=_e.split("=");L[decodeURIComponent(K)]=decodeURIComponent($e)}}),L}function Ai(j){const L=j.indexOf("?");if(!L)return"";const z=j.indexOf("#",L);return j.substring(L,z>0?z:void 0)}function kn(j,L){const z=new hn(j,L);return z.subscribe.bind(z)}class hn{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,_e){let K;if(void 0===L&&void 0===z&&void 0===_e)throw new Error("Missing Observer.");K=function ut(j,L){if("object"!=typeof j||null===j)return!1;for(const z of L)if(z in j&&"function"==typeof j[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:_e},void 0===K.next&&(K.next=rn),void 0===K.error&&(K.error=rn),void 0===K.complete&&(K.complete=rn);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),$e}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function Je(j,L=1e3,z=2){const _e=L*Math.pow(z,j),K=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+K)}function Ot(j){return j&&j._delegate?j._delegate:j}},3500:(lt,Ce,k)=>{var f=k(4650);let J=null;function O(){return J}const ae=new f.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function le(){return(0,f.LFG)(B)}()},providedIn:"platform"}),n})();const U=new f.OlP("Location Initialized");let B=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){W()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){W()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ke(){return new B((0,f.LFG)(ae))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Qe)},providedIn:"root"}),n})();const de=new f.OlP("appBaseHref");let Qe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+tt(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+tt(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(de,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ot=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+tt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+tt(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(de,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Ve(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=tt,n.joinWithSlash=xe,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(f.LFG(ge))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(){return new Se((0,f.LFG)(ge))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}class Ko{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ws=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ko(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Es(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Es(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Es(n,e){n.context.$implicit=e.item}let Jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function pr(n){return"server"===n}let Ja=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new ef((0,f.LFG)(ae),window)}),n})();class ef{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function _r(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=si(this.window.history)||si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Zs extends class ud extends class ue{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){J||(J=n)}(new Zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hu(){return Ks=Ks||document.querySelector("base"),Ks?Ks.getAttribute("href"):null}();return null==t?null:function zr(n){Zn=Zn||document.createElement("a"),Zn.setAttribute("href",n);const e=Zn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ks=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Za(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Zn,Ks=null;const fn=new f.OlP("TRANSITION_ID"),Vc=[{provide:f.ip1,useFactory:function cd(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[fn,ae,f.zs3],multi:!0}];let Uc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const fu=new f.OlP("EventManagerPlugins");let ld=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fu),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class pu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ys=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Co=(()=>{class n extends Ys{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(dd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(dd))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function dd(n){O().remove(n)}const bo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hd=/%COMP%/g;function yu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?yu(n,o,t):(o=o.replace(hd,n),t.push(o))}return t}function fd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let To=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new So(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new pd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new gd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=yu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ld),f.LFG(Co),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class So{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(oa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(oa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=bo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=bo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,fd(r)):this.eventManager.addEventListener(e,t,fd(r))}}function oa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class pd extends So{constructor(e,t,r,o){super(e),this.component=r;const u=yu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function bn(n){return"_ngcontent-%COMP%".replace(hd,n)}(o+"-"+r.id),this.hostAttr=function mu(n){return"_nghost-%COMP%".replace(hd,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class gd extends So{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=yu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ir=(()=>{class n extends pu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const aa=["alt","control","meta","shift"],ua={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ca=(()=>{class n extends pu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),aa.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=ua[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),aa.forEach(d=>{d!==o&&(0,Oi[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function _u(){Zs.makeCurrent()},multi:!0},{provide:ae,useFactory:function da(){return(0,f.RDi)(document),document},deps:[]}]),Ts=new f.OlP(""),yd=[{provide:f.rWj,useClass:class nf{addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Ss=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Xs(){return new f.qLn},deps:[]},{provide:fu,useClass:ir,multi:!0,deps:[ae,f.R0b,f.Lbi]},{provide:fu,useClass:ca,multi:!0,deps:[ae]},{provide:To,useClass:To,deps:[ld,Co,f.AFp]},{provide:f.FYo,useExisting:To},{provide:Ys,useExisting:Co},{provide:Co,useClass:Co,deps:[ae]},{provide:ld,useClass:ld,deps:[fu,f.R0b]},{provide:class Io{},useClass:Uc,deps:[]},[]];let jc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:fn,useExisting:f.AFp},Vc]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ts,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Ss,...yd],imports:[Jo,f.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ao(){return new Yi((0,f.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ln=k(8996),Nr=k(9751);const{isArray:af}=Array,{getPrototypeOf:Tu,prototype:Zr,keys:wi}=Object;function qc(n){if(1===n.length){const e=n[0];if(af(e))return{args:e,keys:null};if(function Po(n){return n&&"object"==typeof n&&Tu(n)===Zr}(e)){const t=wi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ei=k(8421),Ji=k(7669),wr=k(5403),vt=k(4004);const{isArray:Su}=Array;function ga(n){return(0,vt.U)(e=>function ko(n,e){return Su(e)?n(...e):n(e)}(n,e))}function Or(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Xi=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Pi=(()=>{class n extends Xi{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Pr=new f.OlP("NgValueAccessor"),ya={provide:Pr,useExisting:(0,f.Gpc)(()=>Fo),multi:!0},_d=new f.OlP("CompositionEventMode");let Fo=(()=>{class n extends Xi{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Xp(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(_d,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([ya]),f.qOj]}),n})();const gn=new f.OlP("NgValidators"),ki=new f.OlP("NgAsyncValidators");function wd(n){return function Kr(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function D(n){return null}function b(n){return null!=n}function x(n){return(0,f.QGY)(n)?(0,ln.D)(n):n}function F(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Z(n,e){return e.map(t=>t(n))}function be(n){return n.map(e=>function te(n){return!n.validate}(e)?e:t=>e.validate(t))}function nt(n){return null!=n?function Ke(n){if(!n)return null;const e=n.filter(b);return 0==e.length?null:function(t){return F(Z(t,e))}}(be(n)):null}function Mt(n){return null!=n?function it(n){if(!n)return null;const e=n.filter(b);return 0==e.length?null:function(t){return function ma(...n){const e=(0,Ji.jO)(n),{args:t,keys:r}=qc(n),o=new Nr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let A=0;A<d;A++){let R=!1;(0,Ei.Xf)(t[A]).subscribe((0,wr.x)(u,H=>{R||(R=!0,C--),m[A]=H},()=>w--,void 0,()=>{(!w||!R)&&(C||u.next(r?Or(r,m):m),u.complete())}))}});return e?o.pipe(ga(e)):o}(Z(t,e).map(x)).pipe((0,vt.U)(F))}}(be(n)):null}function _t(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Un(n){return n._rawValidators}function Sn(n){return n._rawAsyncValidators}function Ms(n){return n?Array.isArray(n)?n:[n]:[]}function io(n,e){return Array.isArray(n)?n.includes(e):n===e}function so(n,e){const t=Ms(e);return Ms(n).forEach(o=>{io(t,o)||t.push(o)}),t}function or(n,e){return Ms(e).filter(t=>!io(n,t))}class kr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=nt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Kn extends kr{get formDirective(){return null}get path(){return null}}class _a extends kr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class uf{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zc=(()=>{class n extends uf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_a,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),Kc=(()=>{class n extends uf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Kn,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const Cd="VALID",bd="INVALID",Ea="PENDING",Ia="DISABLED";function Ru(n){return(Qc(n)?n.validators:n)||null}function df(n){return Array.isArray(n)?nt(n):n||null}function Nu(n,e){return(Qc(e)?e.asyncValidators:n)||null}function ts(n){return Array.isArray(n)?Mt(n):n||null}function Qc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function ng(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function Td(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new f.vHH(1002,"")})}class Jc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=df(this._rawValidators),this._composedAsyncValidatorFn=ts(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Cd}get invalid(){return this.status===bd}get pending(){return this.status==Ea}get disabled(){return this.status===Ia}get enabled(){return this.status!==Ia}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=df(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ts(e)}addValidators(e){this.setValidators(so(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(so(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(or(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(or(e,this._rawAsyncValidators))}hasValidator(e){return io(this._rawValidators,e)}hasAsyncValidator(e){return io(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ea,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ia,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cd||this.status===Ea)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ia:Cd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ea,this._hasOwnPendingAsyncValidator=!0;const t=x(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Ia:this.errors?bd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ea)?Ea:this._anyControlsHaveStatus(bd)?bd:Cd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Vo extends Jc{constructor(e,t,r){super(Ru(t),Nu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Td(this,0,e),Object.keys(e).forEach(r=>{ng(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class rg extends Vo{}function Xc(n,e){ns(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function el(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ig(n,e)})}(n,e),function hf(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ad(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ig(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Iy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ar(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ur(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ou(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ns(n,e){const t=Un(n);null!==e.validator?n.setValidators(_t(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Sn(n);null!==e.asyncValidator?n.setAsyncValidators(_t(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Ou(e._rawValidators,o),Ou(e._rawAsyncValidators,o)}function ur(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Un(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Sn(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Ou(e._rawValidators,r),Ou(e._rawAsyncValidators,r),t}function ig(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Pu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ku(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Fu=class extends Jc{constructor(e=null,t,r){super(Ru(t),Nu(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ku(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ku(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Ca=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Ef={provide:Pr,useExisting:(0,f.Gpc)(()=>ba),multi:!0};let ba=(()=>{class n extends Pi{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([Ef]),f.qOj]}),n})(),Df=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Vu=new f.OlP("NgModelWithFormControlWarning"),Bo={provide:Kn,useExisting:(0,f.Gpc)(()=>jo)};let jo=(()=>{class n extends Kn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ur(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Xc(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ar(t.control||null,t,!1),function og(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function xd(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ar(r||null,t),(n=>n instanceof Fu)(o)&&(Xc(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function ff(n,e){ns(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Dy(n,e){return ur(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ns(this.form,this),this._oldForm&&ur(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gn,10),f.Y36(ki,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Bo]),f.qOj,f.TTD]}),n})();const Pd={provide:_a,useExisting:(0,f.Gpc)(()=>Fr)};let Fr=(()=>{class n extends _a{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function vf(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Fo?t=u:function yf(n){return Object.getPrototypeOf(n.constructor)===Pi}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function mf(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Sd(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Kn,13),f.Y36(gn,10),f.Y36(ki,10),f.Y36(Pr,10),f.Y36(Vu,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Pd]),f.qOj,f.TTD]}),n})(),Di=(()=>{class n{constructor(){this._validator=D}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):D,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const xf={provide:gn,useExisting:(0,f.Gpc)(()=>h),multi:!0};let h=(()=>{class n extends Di{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>wd}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([xf]),f.qOj]}),n})(),ao=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Df]}),n})(),hg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ao]}),n})(),Mf=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vu,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[ao]}),n})();class fg extends Jc{constructor(e,t,r){super(Ru(t),Nu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Td(this,0,e),e.forEach((r,o)=>{ng(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function pg(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let $u=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let u={};return pg(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new Vo(o,u)}record(t,r=null){const o=this._reduceControls(t);return new rg(o,r)}control(t,r,o){let u={};return this.useNonNullable?(pg(r)?u=r:(u.validators=r,u.asyncValidators=o),new Fu(t,{...u,nonNullable:!0})):new Fu(t,r,o)}array(t,r,o){const u=t.map(d=>this._createControl(d));return new fg(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof Fu||t instanceof Jc?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:Mf}),n})();function ct(...n){const e=(0,Ji.yG)(n);return(0,ln.D)(n,e)}var rs=k(7579);class Ir extends rs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Nf=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Fd=k(4671),rw=k(9672);function GD(...n){const e=(0,Ji.yG)(n),t=(0,Ji.jO)(n),{args:r,keys:o}=qc(n);if(0===r.length)return(0,ln.D)([],e);const u=new Nr.y(function wA(n,e,t=Fd.y){return r=>{qD(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)qD(e,()=>{const C=(0,ln.D)(n[w],e);let A=!1;C.subscribe((0,wr.x)(r,R=>{u[w]=R,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Or(o,d):Fd.y));return t?u.pipe(ga(t)):u}function qD(n,e,t){n?(0,rw.f)(t,n,e):e()}var al=k(8189);function iw(...n){return function Ny(){return(0,al.J)(1)}()((0,ln.D)(n,(0,Ji.yG)(n)))}function zD(n){return new Nr.y(e=>{(0,Ei.Xf)(n()).subscribe(e)})}var sw=k(9635),Oy=k(576);function Of(n,e){const t=(0,Oy.m)(n)?n:()=>n,r=o=>o.error(t());return new Nr.y(e?o=>e.schedule(r,0,o):r)}var ul=k(515),ow=k(727),ui=k(4482);function Ld(){return(0,ui.e)((n,e)=>{let t=null;n._refCount++;const r=(0,wr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class aw extends Nr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ui.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ow.w0;const t=this.getSubject();e.add(this.source.subscribe((0,wr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ow.w0.EMPTY)}return e}refCount(){return Ld()(this)}}function mr(n,e){return(0,ui.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,wr.x)(r,w=>{o?.unsubscribe();let C=0;const A=u++;(0,Ei.Xf)(n(w,A)).subscribe(o=(0,wr.x)(r,R=>r.next(e?e(w,R,A,C++):R),()=>{o=null,m()}))},()=>{d=!0,m()}))})}function Pf(n){return n<=0?()=>ul.E:(0,ui.e)((e,t)=>{let r=0;e.subscribe((0,wr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Bn(...n){const e=(0,Ji.yG)(n);return(0,ui.e)((t,r)=>{(e?iw(n,t,e):iw(n,t)).subscribe(r)})}function uo(n,e){return(0,ui.e)((t,r)=>{let o=0;t.subscribe((0,wr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Ci=k(5577);function Vd(n){return(0,ui.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Py(n=WD){return(0,ui.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function WD(){return new Nf}function Sa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?uo((o,u)=>n(o,u,r)):Fd.y,Pf(1),t?Vd(e):Py(()=>new Nf))}function cl(n,e){return(0,Oy.m)(e)?(0,Ci.z)(n,e,1):(0,Ci.z)(n,1)}var ci=k(8505);function Hu(n){return(0,ui.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,wr.x)(t,void 0,void 0,d=>{u=(0,Ei.Xf)(n(d,Hu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function EA(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,wr.x)(d,A=>{const R=C++;w=m?n(w,A,R):(m=!0,A),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function mg(n,e){return(0,ui.e)(EA(n,e,arguments.length>=2,!0))}function ll(n){return n<=0?()=>ul.E:(0,ui.e)((e,t)=>{let r=[];e.subscribe((0,wr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function yg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?uo((o,u)=>n(o,u,r)):Fd.y,ll(1),t?Vd(e):Py(()=>new Nf))}function vg(n){return(0,ui.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const $t="primary",Ud=Symbol("RouteTitle");class lw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Gu(n){return new lw(n)}function IA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Rs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!ky(n[o],e[o]))return!1;return!0}function ky(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Fy(n){return Array.prototype.concat.apply([],n)}function qu(n){return n.length>0?n[n.length-1]:null}function Dr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function co(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,ln.D)(Promise.resolve(n)):ct(n)}const _g={exact:function dw(n,e,t){if(!fl(n.segments,e.segments)||!wg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!dw(n.children[r],e.children[r],t))return!1;return!0},subset:jy},zu={exact:function By(n,e){return Rs(n,e)},subset:function KD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ky(n[t],e[t]))},ignored:()=>!0};function Uy(n,e,t){return _g[t.paths](n.root,e.root,t.matrixParams)&&zu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jy(n,e,t){return dl(n,e,e.segments,t)}function dl(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!fl(o,t)||e.hasChildren()||!wg(o,t,r))}if(n.segments.length===t.length){if(!fl(n.segments,t)||!wg(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!jy(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(fl(n.segments,o)&&wg(n.segments,o,r)&&n.children[$t])&&dl(n.children[$t],e,u,r)}}function wg(n,e,t){return e.every((r,o)=>zu[t](n[o].parameters,r.parameters))}class hl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gu(this.queryParams)),this._queryParamMap}toString(){return CA.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Dr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ig(this)}}class kf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Gu(this.parameters)),this._parameterMap}toString(){return gw(this)}}function fl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let fw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new Eg},providedIn:"root"}),n})();class Eg{parse(e){const t=new Vf(e);return new hl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Aa(e.root,!0)}`,r=function QD(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${xa(t)}=${xa(o)}`).join("&"):`${xa(t)}=${xa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ff(n){return encodeURI(n)}(e.fragment)}`:""}`}}const CA=new Eg;function Ig(n){return n.segments.map(e=>gw(e)).join("/")}function Aa(n,e){if(!n.hasChildren())return Ig(n);if(e){const t=n.children[$t]?Aa(n.children[$t],!1):"",r=[];return Dr(n.children,(o,u)=>{u!==$t&&r.push(`${u}:${Aa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function hw(n,e){let t=[];return Dr(n.children,(r,o)=>{o===$t&&(t=t.concat(e(r,o)))}),Dr(n.children,(r,o)=>{o!==$t&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===$t?[Aa(n.children[$t],!1)]:[`${o}:${Aa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${Ig(n)}/${t[0]}`:`${Ig(n)}/(${t.join("//")})`}}function pw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xa(n){return pw(n).replace(/%3B/gi,";")}function Hy(n){return pw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gy(n){return decodeURIComponent(n)}function qy(n){return Gy(n.replace(/\+/g,"%20"))}function gw(n){return`${Hy(n.path)}${function YD(n){return Object.keys(n).map(e=>`;${Hy(e)}=${Hy(n[e])}`).join("")}(n.parameters)}`}const mw=/^[^\/()?;=#]+/;function Lf(n){const e=n.match(mw);return e?e[0]:""}const zy=/^[^=?&#]+/,JD=/^[^&#]+/;class Vf{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new Ht(e,t)),r}parseSegment(){const e=Lf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,!1);return this.capture(e),new kf(Gy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Lf(this.remaining);o&&(r=o,this.capture(r))}e[Gy(t)]=Gy(r)}parseQueryParam(e){const t=function Wy(n){const e=n.match(zy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Zy(n){const e=n.match(JD);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=qy(t),u=qy(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lf(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new f.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=$t);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[$t]:new Ht([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,!1)}}function Ky(n){return n.segments.length>0?new Ht([],{[$t]:n}):n}function Dg(n){const e={};for(const r of Object.keys(n.children)){const u=Dg(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function XD(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function pl(n){return n instanceof hl}function Ma(n,e,t,r,o){if(0===t.length)return jf(e.root,e.root,e.root,r,o);const u=function nC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Qy(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Dr(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Qy(t,e,r)}(t);return u.toRoot()?jf(e.root,e.root,new Ht([],{}),r,o):function d(w){const C=function yw(n,e,t,r){if(n.isAbsolute)return new gl(e.root,!0,0);if(-1===r)return new gl(t,t===e.root,0);return function vw(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new f.vHH(4005,!1);o=r.segments.length}return new gl(r,!1,o-u)}(t,r+(Uf(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?$f(C.segmentGroup,C.index,u.commands):Jy(C.segmentGroup,C.index,u.commands);return jf(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function Uf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bf(n){return"object"==typeof n&&null!=n&&n.outlets}function jf(n,e,t,r,o){let d,u={};r&&Dr(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),d=n===e?t:tC(n,e,t);const m=Ky(Dg(d));return new hl(m,u,o)}function tC(n,e,t){const r={};return Dr(n.children,(o,u)=>{r[u]=o===e?t:tC(o,e,t)}),new Ht(n.segments,r)}class Qy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Uf(r[0]))throw new f.vHH(4003,!1);const o=r.find(Bf);if(o&&o!==qu(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Jy(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return $f(n,e,t);const r=function lo(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Bf(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!Iw(w,C,d))return u;r+=2}else{if(!Iw(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ht(n.segments.slice(0,r.pathIndex),{});return u.children[$t]=new Ht(n.segments.slice(r.pathIndex),n.children),$f(u,0,o)}return r.match&&0===o.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?Xy(n,e,t):r.match?$f(n,0,o):Xy(n,e,t)}function $f(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function _w(n){return Bf(n[0])?n[0].outlets:{[$t]:n}}(t),o={};return Dr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Jy(n.children[d],e,u))}),Dr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Ht(n.segments,o)}}function Xy(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Bf(u)){const w=ww(u.outlets);return new Ht(r,w)}if(0===o&&Uf(t[0])){r.push(new kf(n.segments[e].path,Ew(t[0]))),o++;continue}const d=Bf(u)?u.outlets[$t]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Uf(m)?(r.push(new kf(d,Ew(m))),o+=2):(r.push(new kf(d,{})),o++)}return new Ht(r,{})}function ww(n){const e={};return Dr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Xy(new Ht([],{}),0,t))}),e}function Ew(n){const e={};return Dr(n,(t,r)=>e[r]=`${t}`),e}function Iw(n,e,t){return n==t.path&&Rs(e,t.parameters)}class Ra{constructor(e,t){this.id=e,this.url=t}}class ev extends Ra{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wu extends Ra{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cg extends Ra{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dw extends Ra{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rC extends Ra{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt extends Ra{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cw extends Ra{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bw extends Ra{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tw extends Ra{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iC{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sC{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oC{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Aw{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aC{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xw{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=bg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=bg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Na(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Na(e,this._root).map(t=>t.value)}}function bg(n,e){if(n===e.value)return e;for(const t of e.children){const r=bg(n,t);if(r)return r}return null}function Na(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Na(n,t);if(r.length)return r.unshift(e),r}return[]}class Oa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Zu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Tg extends tv{constructor(e,t){super(e),this.snapshot=t,nv(this,e)}toString(){return this.snapshot.toString()}}function Mw(n,e){const t=function AA(n,e){const d=new Hf([],{},{},"",{},$t,e,null,n.root,-1,{});return new lC("",new Oa(d,[]))}(n,e),r=new Ir([new kf("",{})]),o=new Ir({}),u=new Ir({}),d=new Ir({}),m=new Ir(""),w=new Ku(r,o,d,m,u,$t,e,t.root);return w.snapshot=t.root,new Tg(new Oa(w,[]),t)}class Ku{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,vt.U)(C=>C[Ud]))??ct(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>Gu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>Gu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uC(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function cC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Hf{constructor(e,t,r,o,u,d,m,w,C,A,R,H){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[Ud],this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._correctedLastPathIndex=H??A,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lC extends tv{constructor(e,t){super(t),this.url=e,nv(this,t)}toString(){return ml(this._root)}}function nv(n,e){e.value._routerState=n,e.children.forEach(t=>nv(n,t))}function ml(n){const e=n.children.length>0?` { ${n.children.map(ml).join(", ")} } `:"";return`${n.value}${e}`}function rv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Rs(e.params,t.params)||n.params.next(t.params),function ZD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Rs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Sg(n,e){const t=Rs(n.params,e.params)&&function $y(n,e){return fl(n,e)&&n.every((t,r)=>Rs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Sg(n.parent,e.parent))}function Gf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Rw(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Gf(n,r,o);return Gf(n,r)})}(n,e,t);return new Oa(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Gf(n,m)),d}}const r=function dC(n){return new Ku(new Ir(n.url),new Ir(n.params),new Ir(n.queryParams),new Ir(n.fragment),new Ir(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Gf(n,u));return new Oa(r,o)}}const iv="ngNavigationCancelingError";function Nw(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=pl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Ow(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Ow(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[iv]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Pw(n){return sv(n)&&pl(n.url)}function sv(n){return n&&n[iv]}class hC{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jd,this.attachRef=null}}let jd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hC,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qf=!1;let zf=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=o||$t,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,qf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,qf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,qf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,qf);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new xA(t,m,o.injector);if(r&&function ov(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(jd),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class xA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ku?this.route:e===jd?this.childContexts:this.parent.get(e,t)}}let av=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[zf],encapsulation:2}),n})();function fC(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ho(n){const e=n.children&&n.children.map(ho),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=av),t}function Vi(n){return n.outlet||$t}function lv(n,e){const t=n.filter(r=>Vi(r)===e);return t.push(...n.filter(r=>Vi(r)!==e)),t}function yl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Fw{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Zu(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Dr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Zu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Zu(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Zu(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new aC(u.value.snapshot))}),e.children.length&&this.forwardEvent(new oC(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(rv(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),rv(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=yl(o.snapshot),w=m?.get(f._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class yC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vl{constructor(e,t){this.component=e,this.route=t}}function xg(n,e,t){const r=n._root;return _l(r,e?e._root:null,t,[r.value])}function Yu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function _l(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Zu(e);return n.children.forEach(d=>{(function RA(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function vC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!fl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!fl(n.url,e.url)||!Rs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sg(n,e)||!Rs(n.queryParams,e.queryParams);default:return!Sg(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new yC(r)):(u.data=d.data,u._resolvedData=d._resolvedData),_l(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new vl(m.outlet.component,d))}else d&&Zf(e,m,o),o.canActivateChecks.push(new yC(r)),_l(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Dr(u,(d,m)=>Zf(d,t.getContext(m),o)),o}function Zf(n,e,t){const r=Zu(n),o=n.value;Dr(r,(u,d)=>{Zf(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new vl(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Kf(n){return"function"==typeof n}function Yf(n){return n instanceof Nf||"EmptyError"===n?.name}const hv=Symbol("INITIAL_VALUE");function Qf(){return mr(n=>GD(n.map(e=>e.pipe(Pf(1),Bn(hv)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===hv)return hv;if(!1===t||t instanceof hl)return t}return!0}),uo(e=>e!==hv),Pf(1)))}function Mg(n){return(0,sw.z)((0,ci.b)(e=>{if(pl(e))throw Nw(0,e)}),(0,vt.U)(e=>!0===e))}const Rg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ng(n,e,t,r,o){const u=Og(n,e,t);return u.matched?function DC(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?ct(o.map(d=>{const m=Yu(d,n);return co(function Vw(n){return n&&Kf(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(Qf(),Mg()):ct(!0)}(r=fC(e,r),e,t).pipe((0,vt.U)(d=>!0===d?u:{...Rg})):ct(u)}function Og(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Rg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||IA)(t,n,e);if(!o)return{...Rg};const u={};Dr(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function $d(n,e,t,r,o="corrected"){if(t.length>0&&function Uw(n,e,t){return t.some(r=>Pg(n,e,r)&&Vi(r)!==$t)}(n,t,r)){const d=new Ht(e,function Ju(n,e,t,r){const o={};o[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Vi(u)!==$t){const d=new Ht([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Vi(u)]=d}return o}(n,e,r,new Ht(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function bC(n,e,t){return t.some(r=>Pg(n,e,r))}(n,t,r)){const d=new Ht(n.segments,function CC(n,e,t,r,o,u){const d={};for(const m of r)if(Pg(n,t,m)&&!o[Vi(m)]){const w=new Ht([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Vi(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ht(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Pg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function fv(n,e,t,r){return!!(Vi(n)===r||r!==$t&&Pg(e,t,n))&&("**"===n.path||Og(e,n,t).matched)}function Bw(n,e,t){return 0===e.length&&!n.children[t]}const kg=!1;class wl{constructor(e){this.segmentGroup=e||null}}class El{constructor(e){this.urlTree=e}}function Il(n){return Of(new wl(n))}function Dl(n){return Of(new El(n))}class $w{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=$d(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,$t).pipe((0,vt.U)(u=>this.createUrlTree(Dg(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hu(u=>{if(u instanceof El)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof wl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,$t).pipe((0,vt.U)(o=>this.createUrlTree(Dg(o),e.queryParams,e.fragment))).pipe(Hu(o=>{throw o instanceof wl?this.noMatchError(o):o}))}noMatchError(e){return new f.vHH(4002,kg)}createUrlTree(e,t,r){const o=Ky(e);return new hl(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(u=>new Ht([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,ln.D)(o).pipe(cl(u=>{const d=r.children[u],m=lv(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,vt.U)(w=>({segment:w,outlet:u})))}),mg((u,d)=>(u[d.outlet]=d.segment,u),{}),yg())}expandSegment(e,t,r,o,u,d){return(0,ln.D)(r).pipe(cl(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Hu(C=>{if(C instanceof wl)return ct(null);throw C}))),Sa(m=>!!m),Hu((m,w)=>{if(Yf(m))return Bw(t,o,u)?ct(new Ht([],{})):Il(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return fv(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Il(t):Il(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Dl(u):this.lineralizeSegments(r,u).pipe((0,Ci.z)(d=>{const m=new Ht(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=Og(t,o,u);if(!m)return Il(t);const R=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?Dl(R):this.lineralizeSegments(o,R).pipe((0,Ci.z)(H=>this.expandSegment(e,t,r,H.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=fC(r,e),r.loadChildren?(r._loadedRoutes?ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Ht(o,{})))):ct(new Ht(o,{}))):Ng(t,r,o,e).pipe(mr(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,Ci.z)(A=>{const R=A.injector??e,H=A.routes,{segmentGroup:X,slicedSegments:fe}=$d(t,m,w,H),Ne=new Ht(X.segments,X.children);if(0===fe.length&&Ne.hasChildren())return this.expandChildren(R,H,Ne).pipe((0,vt.U)(kt=>new Ht(m,kt)));if(0===H.length&&0===fe.length)return ct(new Ht(m,{}));const Ue=Vi(r)===u;return this.expandSegment(R,Ne,H,fe,Ue?$t:u,!0).pipe((0,vt.U)(Bt=>new Ht(m.concat(Bt.segments),Bt.children)))})):Il(t)))}getChildConfig(e,t,r){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function Qu(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?ct(!0):ct(o.map(d=>{const m=Yu(d,n);return co(function Lw(n){return n&&Kf(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(Qf(),Mg())}(e,t,r).pipe((0,Ci.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,ci.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Fg(n){return Of(Ow(kg,3))}())):ct({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ct(r);if(o.numberOfChildren>1||!o.children[$t])return Of(new f.vHH(4e3,kg));o=o.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new hl(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Dr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Dr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Ht(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new f.vHH(4001,kg);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class Hw{}class $A{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=$d(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,$t).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new Hf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Oa(r,t),u=new lC(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=uC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,ln.D)(Object.keys(r.children)).pipe(cl(o=>{const u=r.children[o],d=lv(t,o);return this.processSegmentGroup(e,d,u,o)}),mg((o,u)=>o&&u?(o.push(...u),o):null),function uw(n,e=!1){return(0,ui.e)((t,r)=>{let o=0;t.subscribe((0,wr.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),Vd(null),yg(),(0,vt.U)(o=>{if(null===o)return null;const u=yv(o);return function SC(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,ln.D)(t).pipe(cl(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),Sa(d=>!!d),Hu(d=>{if(Yf(d))return Bw(r,o,u)?ct([]):ct(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!fv(t,r,o,u))return ct(null);let d;if("**"===t.path){const m=o.length>0?qu(o).parameters:{},w=Ui(r)+o.length;d=ct({snapshot:new Hf(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ww(t),Vi(t),t.component??t._loadedComponent??null,t,zw(r),w,xC(t),w),consumedSegments:[],remainingSegments:[]})}else d=Ng(r,t,o,e).pipe((0,vt.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const R=Ui(r)+w.length;return{snapshot:new Hf(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ww(t),Vi(t),t.component??t._loadedComponent??null,t,zw(r),R,xC(t),R),consumedSegments:w,remainingSegments:C}}));return d.pipe(mr(m=>{if(null===m)return ct(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const R=t._loadedInjector??e,H=function Gw(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:X,slicedSegments:fe}=$d(r,C,A,H.filter(Ue=>void 0===Ue.redirectTo),this.relativeLinkResolution);if(0===fe.length&&X.hasChildren())return this.processChildren(R,H,X).pipe((0,vt.U)(Ue=>null===Ue?null:[new Oa(w,Ue)]));if(0===H.length&&0===fe.length)return ct([new Oa(w,[])]);const Ne=Vi(t)===u;return this.processSegment(R,H,X,fe,Ne?$t:u).pipe((0,vt.U)(Ue=>null===Ue?null:[new Oa(w,Ue)]))}))}}function AC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function yv(n){const e=[],t=new Set;for(const r of n){if(!AC(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=yv(r.children);e.push(new Oa(r.value,o))}return e.filter(r=>!t.has(r))}function zw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ui(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ww(n){return n.data||{}}function xC(n){return n.resolve||{}}function wv(n){return"string"==typeof n.title||null===n.title}function Ev(n){return mr(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,vt.U)(()=>e)):ct(e)})}let Iv=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===$t);return r}getResolvedTitleForRoute(t){return t.data[Ud]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Kw)},providedIn:"root"}),n})(),Kw=(()=>{class n extends Iv{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Yi))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Yw{}class PC extends class Qw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Gd=new f.OlP("",{providedIn:"root",factory:()=>({})}),Dv=new f.OlP("ROUTES");let Xw=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=co(t.loadComponent()).pipe((0,ci.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),vg(()=>{this.componentLoaders.delete(t)})),o=new aw(r,()=>new rs.x).pipe(Ld());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=Fy(w.get(Dv,[],f.XFs.Self|f.XFs.Optional)));return{routes:C.map(ho),injector:w}}),vg(()=>{this.childrenLoaders.delete(r)})),d=new aw(u,()=>new rs.x).pipe(Ld());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return co(t()).pipe((0,Ci.z)(r=>r instanceof f.YKP||Array.isArray(r)?ct(r):(0,ln.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eE{}class kC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function FC(n){throw n}function Cv(n,e,t){return e.parse("/")}const LC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},VC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ug(){const n=(0,f.f3M)(fw),e=(0,f.f3M)(jd),t=(0,f.f3M)(Se),r=(0,f.f3M)(f.zs3),o=(0,f.f3M)(f.Sil),u=(0,f.f3M)(Dv,{optional:!0})??[],d=(0,f.f3M)(Gd,{optional:!0})??{},m=(0,f.f3M)(Kw),w=(0,f.f3M)(Iv,{optional:!0}),C=(0,f.f3M)(eE,{optional:!0}),A=(0,f.f3M)(Yw,{optional:!0}),R=new Mn(null,n,e,t,r,o,Fy(u));return C&&(R.urlHandlingStrategy=C),A&&(R.routeReuseStrategy=A),R.titleStrategy=w??m,function Vg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,R),R}let Mn=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rs.x,this.errorHandler=FC,this.malformedUriErrorHandler=Cv,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ct(void 0),this.urlHandlingStrategy=new kC,this.routeReuseStrategy=new PC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Xw),this.configLoader.onLoadEndListener=H=>this.triggerEvent(new sC(H)),this.configLoader.onLoadStartListener=H=>this.triggerEvent(new iC(H)),this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const R=d.get(f.R0b);this.isNgZoneEnabled=R instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Vy(){return new hl(new Ht([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Mw(this.currentUrlTree,this.rootComponentType),this.transitions=new Ir({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(uo(o=>0!==o.id),(0,vt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mr(o=>{let u=!1,d=!1;return ct(o).pipe((0,ci.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),mr(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Bg(m.source)&&(this.browserUrlTree=m.extractedUrl),ct(m).pipe(mr(R=>{const H=this.transitions.getValue();return r.next(new ev(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),H!==this.transitions.getValue()?ul.E:Promise.resolve(R)}),function gv(n,e,t,r){return mr(o=>function jw(n,e,t,r,o){return new $w(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,vt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ci.b)(R=>{this.currentNavigation={...this.currentNavigation,finalUrl:R.urlAfterRedirects},o.urlAfterRedirects=R.urlAfterRedirects}),function MC(n,e,t,r,o,u){return(0,Ci.z)(d=>function TC(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new $A(n,e,t,r,o,d,m,u).recognize().pipe(mr(w=>null===w?function mv(n){return new Nr.y(e=>e.error(n))}(new Hw):ct(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,vt.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ci.b)(R=>{if(o.targetSnapshot=R.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const X=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(X,R)}this.browserUrlTree=R.urlAfterRedirects}const H=new rC(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:X,source:fe,restoredState:Ne,extras:Ue}=m,Ut=new ev(H,this.serializeUrl(X),fe,Ne);r.next(Ut);const Bt=Mw(X,this.rootComponentType).snapshot;return ct(o={...m,targetSnapshot:Bt,urlAfterRedirects:X,extras:{...Ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),ul.E}),(0,ci.b)(m=>{const w=new Rt(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,vt.U)(m=>o={...m,guards:xg(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function PA(n,e){return(0,Ci.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ct({...t,guardsResult:!0}):function kA(n,e,t,r){return(0,ln.D)(n).pipe((0,Ci.z)(o=>function jA(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ct(u.map(m=>{const w=yl(e)??o,C=Yu(m,w);return co(function OA(n){return n&&Kf(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(Sa())})).pipe(Qf()):ct(!0)}(o.component,o.route,t,e,r)),Sa(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Ci.z)(m=>m&&function _C(n){return"boolean"==typeof n}(m)?function FA(n,e,t,r){return(0,ln.D)(e).pipe(cl(o=>iw(function VA(n,e){return null!==n&&e&&e(new Sw(n)),ct(!0)}(o.route.parent,r),function LA(n,e){return null!==n&&e&&e(new Aw(n)),ct(!0)}(o.route,r),function BA(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function dv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>zD(()=>ct(d.guards.map(w=>{const C=yl(d.node)??t,A=Yu(w,C);return co(function wC(n){return n&&Kf(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(Sa())})).pipe(Qf())));return ct(u).pipe(Qf())}(n,o.path,t),function UA(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const o=r.map(u=>zD(()=>{const d=yl(e)??t,m=Yu(u,d);return co(function NA(n){return n&&Kf(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(Sa())}));return ct(o).pipe(Qf())}(n,o.route,t))),Sa(o=>!0!==o,!0))}(r,u,n,e):ct(m)),(0,vt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,ci.b)(m=>{if(o.guardsResult=m.guardsResult,pl(m.guardsResult))throw Nw(0,m.guardsResult);const w=new Cw(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),uo(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Ev(m=>{if(m.guards.canActivateChecks.length)return ct(m).pipe((0,ci.b)(w=>{const C=new bw(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),mr(w=>{let C=!1;return ct(w).pipe(function _v(n,e){return(0,Ci.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ct(t);let u=0;return(0,ln.D)(o).pipe(cl(d=>function Zw(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!wv(o)&&(u[Ud]=o.title),function RC(n,e,t,r){const o=function NC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return ct({});const u={};return(0,ln.D)(o).pipe((0,Ci.z)(d=>function OC(n,e,t,r){const o=yl(e)??r,u=Yu(n,o);return co(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(Sa(),(0,ci.b)(m=>{u[d]=m}))),ll(1),function cw(n){return(0,vt.U)(()=>n)}(u),Hu(d=>Yf(d)?ul.E:Of(d)))}(u,n,e,r).pipe((0,vt.U)(d=>(n._resolvedData=d,n.data=uC(n,t).resolve,o&&wv(o)&&(n.data[Ud]=o.title),null)))}(d.route,r,n,e)),(0,ci.b)(()=>u++),ll(1),(0,Ci.z)(d=>u===o.length?ct(t):ul.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ci.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,ci.b)(w=>{const C=new Tw(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),Ev(m=>{const w=C=>{const A=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,ci.b)(R=>{C.component=R}),(0,vt.U)(()=>{})));for(const R of C.children)A.push(...w(R));return A};return GD(w(m.targetSnapshot.root)).pipe(Vd(),Pf(1))}),Ev(()=>this.afterPreactivation()),(0,vt.U)(m=>{const w=function Ag(n,e,t){const r=Gf(n,e._root,t?t._root:void 0);return new Tg(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,ci.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new Fw(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,ci.b)({next(){u=!0},complete(){u=!0}}),vg(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Hu(m=>{if(d=!0,sv(m)){Pw(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new Cg(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),Pw(m)){const C=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Bg(o.source)};this.scheduleNavigation(C,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Dw(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return ul.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(ho),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let R=null;switch(m){case"merge":R={...this.currentUrlTree.queryParams,...u};break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),Ma(C,this.currentUrlTree,t,R,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=pl(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function GA(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...LC}:!1===r?{...VC}:r,pl(t))return Uy(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Uy(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Wu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,C;d?(m=d.resolve,w=d.reject,C=d.promise):C=new Promise((H,X)=>{m=H,w=X});const A=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),R=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):R=0,this.setTransition({id:A,targetPageId:R,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(H=>Promise.reject(H))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new Cg(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return Ug()},providedIn:"root"}),n})();function Bg(n){return"imperative"!==n}let jg=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new rs.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mn),f.Y36(Ku),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})(),qd=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new rs.x,this.subscription=t.events.subscribe(u=>{u instanceof Wu&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Mn),f.Y36(Ku),f.Y36(ge))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})();class bv{}let $g=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(uo(t=>t instanceof Wu),cl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,ln.D)(o).pipe((0,al.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ct(null);const u=o.pipe((0,Ci.z)(d=>null===d?ct(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,ln.D)([u,d]).pipe((0,al.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Mn),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(bv),f.LFG(Xw))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zd=new f.OlP("");let Wd=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ev?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Wu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Zd(n,e){return{\u0275kind:n,\u0275providers:e}}function Sv(n){return[{provide:Dv,multi:!0,useValue:n}]}function sE(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Mn),o=n.get(UC);1===n.get(Av)&&r.initialNavigation(),n.get(oE,null,f.XFs.Optional)?.setUpPreloading(),n.get(zd,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const UC=new f.OlP("",{factory:()=>new rs.x}),Av=new f.OlP("",{providedIn:"root",factory:()=>1});const oE=new f.OlP("");function aE(n){return Zd(0,[{provide:oE,useExisting:$g},{provide:bv,useExisting:n}])}const lE=new f.OlP("ROUTER_FORROOT_GUARD"),$C=[Se,{provide:fw,useClass:Eg},{provide:Mn,useFactory:Ug},jd,{provide:Ku,useFactory:function Tv(n){return n.routerState.root},deps:[Mn]},Xw];function HC(){return new f.PXZ("Router",Mn)}let dE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[$C,[],Sv(t),{provide:lE,useFactory:Cl,deps:[[Mn,new f.FiY,new f.tp0]]},{provide:Gd,useValue:r||{}},r?.useHash?{provide:ge,useClass:ot}:{provide:ge,useClass:Qe},{provide:zd,useFactory:()=>{const n=(0,f.f3M)(Mn),e=(0,f.f3M)(Ja),t=(0,f.f3M)(Gd);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Wd(n,e,t)}},r?.preloadingStrategy?aE(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:HC},r?.initialNavigation?zA(r):[],[{provide:Kd,useFactory:sE},{provide:f.tb,multi:!0,useExisting:Kd}]]}}static forChild(t){return{ngModule:n,providers:[Sv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(lE,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[av]}),n})();function Cl(n){return"guarded"}function zA(n){return["disabled"===n.initialNavigation?Zd(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Mn);return()=>{e.setUpLocationChangeListener()}}},{provide:Av,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Zd(2,[{provide:Av,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(Mn),m=e.get(UC);(function o(u){e.get(Mn).events.pipe(uo(m=>m instanceof Wu||m instanceof Cg||m instanceof Dw),(0,vt.U)(m=>m instanceof Wu||m instanceof Cg&&(0===m.code||1===m.code)&&null),uo(m=>null!==m),Pf(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?ct(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const Kd=new f.OlP("");var xv=k(4986),Lr=k(2122);function Ns(){return(0,ui.e)((n,e)=>{let t,r=!1;n.subscribe((0,wr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function li(n,e){return n===e}var rt,Yr=k(2011),Os=(k(9169),k(3942)),me=k(5861),Ps=k(9681),Pa=k(4859),ss=k(1877),Wt=k(2090),Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bi={},ec=ec||{},Dt=Yd||self;function Xf(){}function ep(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Wg="closure_uid_"+(1e9*Math.random()>>>0),fE=0;function pE(n,e,t){return n.call.apply(n.bind,arguments)}function gE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Qr(n,e,t){return(Qr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pE:gE).apply(null,arguments)}function Zg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Jr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function ka(){this.s=this.s,this.o=this.o}ka.prototype.s=!1,ka.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function hE(n){Object.prototype.hasOwnProperty.call(n,Wg)&&n[Wg]||(n[Wg]=++fE)}(this)},ka.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const mE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function tp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Kg(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ep(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}di.prototype.h=function(){this.defaultPrevented=!0};var Yg=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",Xf,e),Dt.removeEventListener("test",Xf,e)}catch{}return n}();function bl(n){return/^[\s\xa0]*$/.test(n)}var Qg=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Rv(n,e){return n<e?-1:n>e?1:0}function Jd(){var n=Dt.navigator;return n&&(n=n.userAgent)?n:""}function ks(n){return-1!=Jd().indexOf(n)}function Jg(n){return Jg[" "](n),n}Jg[" "]=Xf;var rp,n,Nv=ks("Opera"),Tl=ks("Trident")||ks("MSIE"),Ov=ks("Edge"),np=Ov||Tl,Pv=ks("Gecko")&&!(-1!=Jd().toLowerCase().indexOf("webkit")&&!ks("Edge"))&&!(ks("Trident")||ks("MSIE"))&&!ks("Edge"),ZC=-1!=Jd().toLowerCase().indexOf("webkit")&&!ks("Edge");function kv(){var n=Dt.document;return n?n.documentMode:void 0}e:{var Xg="",em=(n=Jd(),Pv?/rv:([^\);]+)(\)|;)/.exec(n):Ov?/Edge\/([\d\.]+)/.exec(n):Tl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ZC?/WebKit\/(\S+)/.exec(n):Nv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(em&&(Xg=em?em[1]:""),Tl){var Fv=kv();if(null!=Fv&&Fv>parseFloat(Xg)){rp=String(Fv);break e}}rp=Xg}var KC={};var vE=Dt.document&&Tl&&(kv()||parseInt(rp,10))||void 0;function Xd(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Pv){e:{try{Jg(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_E[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xd.X.h.call(this)}}Jr(Xd,di);var _E={2:"touch",3:"pen",4:"mouse"};Xd.prototype.h=function(){Xd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var eh="closure_listenable_"+(1e6*Math.random()|0),wE=0;function EE(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++wE,this.ba=this.ea=!1}function sp(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function nm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function QC(n){const e={};for(const t in n)e[t]=n[t];return e}const IE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<IE.length;u++)t=IE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function op(n){this.src=n,this.g={},this.h=0}function Lv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=mE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(sp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cr(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}op.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=cr(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new EE(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var rm="closure_lm_"+(1e6*Math.random()|0),Vv={};function CE(n,e,t,r,o){if(r&&r.once)return Bv(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)CE(n,e[u],t,r,o);return null}return t=sm(t),n&&n[eh]?n.N(e,t,Qd(r)?!!r.capture:!!r,o):Uv(n,e,t,!1,r,o)}function Uv(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Qd(o)?!!o.capture:!!o,m=im(n);if(m||(n[rm]=m=new op(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function JC(){const e=XC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Yg||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(bE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Bv(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Bv(n,e[u],t,r,o);return null}return t=sm(t),n&&n[eh]?n.O(e,t,Qd(r)?!!r.capture:!!r,o):Uv(n,e,t,!0,r,o)}function jv(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)jv(n,e[u],t,r,o);else r=Qd(r)?!!r.capture:!!r,t=sm(t),n&&n[eh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cr(u=n.g[e],t,r,o))&&(sp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=im(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cr(e,t,r,o)),(t=-1<n?e[n]:null)&&tc(t))}function tc(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[eh])Lv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=im(e))?(Lv(t,n),0==t.h&&(t.src=null,e[rm]=null)):sp(n)}}}function bE(n){return n in Vv?Vv[n]:Vv[n]="on"+n}function XC(n,e){if(n.ba)n=!0;else{e=new Xd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&tc(n),n=t.call(r,e)}return n}function im(n){return(n=n[rm])instanceof op?n:null}var $v="__closure_events_fn_"+(1e9*Math.random()>>>0);function sm(n){return"function"==typeof n?n:(n[$v]||(n[$v]=function(e){return n.handleEvent(e)}),n[$v])}function Xr(){ka.call(this),this.i=new op(this),this.P=this,this.I=null}function Vr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var o=e;DE(e=new di(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=th(d,r,!0,e)&&o}if(o=th(d=e.g=n,r,!0,e)&&o,o=th(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=th(d=e.g=t[u],r,!1,e)&&o}function th(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&Lv(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Jr(Xr,ka),Xr.prototype[eh]=!0,Xr.prototype.removeEventListener=function(n,e,t,r){jv(this,n,e,t,r)},Xr.prototype.M=function(){if(Xr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sp(t[r]);delete n.g[e],n.h--}}this.I=null},Xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Fs=Dt.JSON.stringify;function eb(){var n=TE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var om,fo=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new po,n=>n.reset());class po{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function go(n){Dt.setTimeout(()=>{throw n},0)}function Hv(n,e){om||function nb(){var n=Dt.Promise.resolve(void 0);om=function(){n.then(rb)}}(),Gv||(om(),Gv=!0),TE.add(n,e)}var Gv=!1,TE=new class tb{constructor(){this.h=this.g=null}add(e,t){const r=fo.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function rb(){for(var n;n=eb();){try{n.h.call(n.g)}catch(t){go(t)}var e=fo;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Gv=!1}function nh(n,e){Xr.call(this),this.h=n||1,this.g=e||Dt,this.j=Qr(this.lb,this),this.l=Date.now()}function Sl(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function qv(n,e,t){if("function"==typeof n)t&&(n=Qr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function zv(n){n.g=qv(()=>{n.g=null,n.i&&(n.i=!1,zv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Jr(nh,Xr),(rt=nh.prototype).ca=!1,rt.R=null,rt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Vr(this,"tick"),this.ca&&(Sl(this),this.start()))}},rt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){nh.X.M.call(this),Sl(this),delete this.g};class ib extends ka{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zv(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rh(n){ka.call(this),this.h=n,this.g={}}Jr(rh,ka);var Wv=[];function ap(n,e,t,r){Array.isArray(t)||(t&&(Wv[0]=t.toString()),t=Wv);for(var o=0;o<t.length;o++){var u=CE(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function SE(n){nm(n.g,function(e,t){this.g.hasOwnProperty(t)&&tc(e)},n),n.g={}}function up(){this.g=!0}function Fa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ME(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Fs(t)}catch{return e}}(n,t)+(r?" "+r:"")})}rh.prototype.M=function(){rh.X.M.call(this),SE(this)},rh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},up.prototype.Aa=function(){this.g=!1},up.prototype.info=function(){};var nc={},Kv=null;function cp(){return Kv=Kv||new Xr}function Yv(n){di.call(this,nc.Pa,n)}function ih(n){const e=cp();Vr(e,new Yv(e))}function Qv(n,e){di.call(this,nc.STAT_EVENT,n),this.stat=e}function bi(n){const e=cp();Vr(e,new Qv(e,n))}function RE(n,e){di.call(this,nc.Qa,n),this.size=e}function lp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}nc.Pa="serverreachability",Jr(Yv,di),nc.STAT_EVENT="statevent",Jr(Qv,di),nc.Qa="timingevent",Jr(RE,di);var am={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},NE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Jv(){}function PE(){}Jv.prototype.h=null;var t_,dp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Xv(){di.call(this,"d")}function e_(){di.call(this,"c")}function um(){}function hp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new rh(this),this.O=sb,this.T=new nh(n=np?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new kE}function kE(){this.i=null,this.g="",this.h=!1}Jr(Xv,di),Jr(e_,di),Jr(um,Jv),um.prototype.g=function(){return new XMLHttpRequest},um.prototype.i=function(){return{}},t_=new um;var sb=45e3,n_={},cm={};function lm(n,e,t){n.K=1,n.v=hm(ic(e)),n.s=t,n.P=!0,r_(n,null)}function r_(n,e){n.F=Date.now(),sh(n),n.A=ic(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),u_(t.i,"t",r),n.C=0,t=n.l.H,n.h=new kE,n.g=YE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new ib(Qr(n.La,n,n.g),n.N)),ap(n.S,n.g,"readystatechange",n.ib),e=n.H?QC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),ih(),function AE(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var R=A.split("_");d=2<=R.length&&"type"==R[1]?d+(A+"=")+C+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function i_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function s_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=FE(n,t),o==cm){4==e&&(n.o=4,bi(14),r=!1),Fa(n.j,n.m,null,"[Incomplete Response]");break}if(o==n_){n.o=4,bi(15),Fa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Fa(n.j,n.m,o,null),dm(n,o)}i_(n)&&o!=cm&&o!=n_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),w_(e),e.K=!0,bi(11))):(Fa(n.j,n.m,t,"[Invalid Chunked Response]"),rc(n),oh(n))}function FE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?cm:(t=Number(e.substring(t,r)),isNaN(t)?n_:(r+=1)+t>e.length?cm:(e=e.substr(r,t),n.C=r+t,e))}function sh(n){n.V=Date.now()+n.O,o_(n,n.O)}function o_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lp(Qr(n.gb,n),e)}function fp(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function oh(n){0==n.l.G||n.I||Em(n.l,n)}function rc(n){fp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Sl(n.T),SE(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function dm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||c_(t.h,n)))if(!n.J&&c_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;wm(t),ym(t)}_m(t),bi(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=lp(Qr(t.cb,t),6e3));if(1>=$E(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else oc(t,11)}else if((n.J||t.g==n)&&wm(t),!bl(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const R=C[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.J=r=1.5*H,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const X=n.g;if(X){const fe=X.g?X.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var u=r.h;u.g||-1==fe.indexOf("spdy")&&-1==fe.indexOf("quic")&&-1==fe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(l_(u,u.h),u.h=null))}if(r.D){const Ne=X.g?X.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.za=Ne,We(r.F,r.D,Ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=KE(r,r.H?r.ka:null,r.V),d.J){vp(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(fp(m),sh(m)),r.g=d}else WE(r);0<t.i.length&&vm(t)}else"stop"!=C[0]&&"close"!=C[0]||oc(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?oc(t,7):y_(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}ih()}catch{}}function LE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ep(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ob(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ep(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Al(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ep(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(rt=hp.prototype).setTimeout=function(n){this.O=n},rt.ib=function(n){n=n.target;const e=this.L;e&&3==Ua(n)?e.l():this.La(n)},rt.La=function(n){try{if(n==this.g)e:{const A=Ua(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||np||this.g&&(this.h.h||this.g.fa()||g_(this.g)))){this.I||4!=A||7==e||ih(),fp(this);var t=this.g.aa();this.Y=t;t:if(i_(this)){var r=g_(this.g);n="";var o=r.length,u=4==Ua(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){rc(this),oh(this);var d="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function Zv(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bl(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,bi(12),rc(this),oh(this);break e}Fa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dm(this,t)}this.P?(s_(this,A,d),np&&this.i&&3==A&&(ap(this.S,this.T,"tick",this.hb),this.T.start())):(Fa(this.j,this.m,d,null),dm(this,d)),4==A&&rc(this),this.i&&!this.I&&(4==A?Em(this.l,this):(this.i=!1,sh(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,bi(12)):(this.o=0,bi(13)),rc(this),oh(this)}}}catch{}},rt.hb=function(){if(this.g){var n=Ua(this.g),e=this.g.fa();this.C<e.length&&(fp(this),s_(this,n,e),this.i&&4!=n&&sh(this))}},rt.cancel=function(){this.I=!0,rc(this)},rt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function xE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ih(),bi(17)),rc(this),this.o=2,oh(this)):o_(this,this.V-n)};var xl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function La(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof La){this.h=void 0!==e?e:n.h,pp(this,n.j),this.s=n.s,this.g=n.g,gp(this,n.m),this.l=n.l,e=n.i;var t=new uh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ab(this,t),this.o=n.o}else n&&(t=String(n).match(xl))?(this.h=!!e,pp(this,t[1]||"",!0),this.s=mp(t[2]||""),this.g=mp(t[3]||"",!0),gp(this,t[4]),this.l=mp(t[5]||"",!0),ab(this,t[6]||"",!0),this.o=mp(t[7]||"")):(this.h=!!e,this.i=new uh(null,this.h))}function ic(n){return new La(n)}function pp(n,e,t){n.j=t?mp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function gp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ab(n,e,t){e instanceof uh?(n.i=e,function BE(n,e){e&&!n.j&&(Va(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(UE(this,r),u_(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=yp(e,Yn)),n.i=new uh(e,n.h))}function We(n,e,t){n.i.set(e,t)}function hm(n){return We(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function yp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ah),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ah(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}La.prototype.toString=function(){var n=[],e=this.j;e&&n.push(yp(e,VE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(yp(e,VE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(yp(t,"/"==t.charAt(0)?pm:fm,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",yp(t,KA)),n.join("")};var VE=/[#\/\?@]/g,fm=/[#\?:]/g,pm=/[#\?]/g,Yn=/[#\?@]/g,KA=/#/g;function uh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Va(n){n.g||(n.g=new Map,n.h=0,n.i&&function ZA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function UE(n,e){Va(n),e=Ml(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function a_(n,e){return Va(n),e=Ml(n,e),n.g.has(e)}function u_(n,e,t){UE(n,e),0<t.length&&(n.i=null,n.g.set(Ml(n,e),tp(t)),n.h+=t.length)}function Ml(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function jE(n){this.l=n||cb,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ga&&Dt.g.Ga()&&Dt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=uh.prototype).add=function(n,e){Va(this),this.i=null,n=Ml(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Va(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},rt.oa=function(){Va(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},rt.W=function(n){Va(this);let e=[];if("string"==typeof n)a_(this,n)&&(e=e.concat(this.g.get(Ml(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},rt.set=function(n,e){return Va(this),this.i=null,a_(this,n=Ml(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var cb=10;function ch(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $E(n){return n.h?1:n.g?n.g.size:0}function c_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function l_(n,e){n.g?n.g.add(e):n.h=e}function vp(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function d_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return tp(n.i)}function gm(){}function HE(){this.g=new gm}function lb(n,e,t){const r=t||"";try{LE(n,function(o,u){let d=o;Qd(o)&&(d=Fs(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function sc(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function wp(n){this.l=n.ac||null,this.j=n.jb||!1}function mm(n,e){Xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=h_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jE.prototype.cancel=function(){if(this.i=d_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},gm.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},gm.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},Jr(wp,Jv),wp.prototype.g=function(){return new mm(this.l,this.j)},wp.prototype.i=function(n){return function(){return n}}({}),Jr(mm,Xr);var h_=0;function f_(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function lh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,dh(n)}function dh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=mm.prototype).open=function(n,e){if(this.readyState!=h_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,dh(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lh(this)),this.readyState=h_},rt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,dh(this)),this.g&&(this.readyState=3,dh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Dt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;f_(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},rt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?lh(this):dh(this),3==this.readyState&&f_(this)}},rt.Va=function(n){this.g&&(this.response=this.responseText=n,lh(this))},rt.Ua=function(n){this.g&&(this.response=n,lh(this))},rt.ga=function(){this.g&&lh(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(mm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var db=Dt.JSON.parse;function jn(n){Xr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=GE,this.K=this.L=!1}Jr(jn,Xr);var GE="",hb=/^https?$/i,YA=["POST","PUT"];function fb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,pb(n),Rl(n)}function pb(n){n.D||(n.D=!0,Vr(n,"complete"),Vr(n,"error"))}function p_(n){if(n.h&&typeof ec<"u"&&(!n.C[1]||4!=Ua(n)||2!=n.aa()))if(n.v&&4==Ua(n))qv(n.Ha,0,n);else if(Vr(n,"readystatechange"),4==Ua(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(xl)[1]||null;if(!o&&Dt.self&&Dt.self.location){var u=Dt.self.location.protocol;o=u.substr(0,u.length-1)}r=!hb.test(o?o.toLowerCase():"")}t=r}if(t)Vr(n,"complete"),Vr(n,"success");else{n.m=6;try{var d=2<Ua(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",pb(n)}}finally{Rl(n)}}}function Rl(n,e){if(n.g){qE(n);const t=n.g,r=n.C[0]?Xf:null;n.g=null,n.C=null,e||Vr(n,"ready");try{t.onreadystatechange=r}catch{}}}function qE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function Ua(n){return n.g?n.g.readyState:0}function g_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case GE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function hh(n){let e="";return nm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function m_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=hh(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):We(n,e,t))}function Ep(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function zE(n){this.Ca=0,this.i=[],this.j=new up,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ep("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ep("baseRetryDelayMs",5e3,n),this.bb=Ep("retryDelaySeedMs",1e4,n),this.$a=Ep("forwardChannelMaxRetries",2,n),this.ta=Ep("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new jE(n&&n.concurrentRequestLimit),this.Fa=new HE,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function y_(n){if(v_(n),3==n.G){var e=n.U++,t=ic(n.F);We(t,"SID",n.I),We(t,"RID",e),We(t,"TYPE","terminate"),Ip(n,t),(e=new hp(n,n.j,e,void 0)).K=2,e.v=hm(ic(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=YE(e.l,null),e.g.da(e.v)),e.F=Date.now(),sh(e)}I_(n)}function ym(n){n.g&&(w_(n),n.g.cancel(),n.g=null)}function v_(n){ym(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),wm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function vm(n){ch(n.h)||n.m||(n.m=!0,Hv(n.Ja,n),n.C=0)}function fh(n,e){var t;t=e?e.m:n.U++;const r=ic(n.F);We(r,"SID",n.I),We(r,"RID",t),We(r,"AID",n.T),Ip(n,r),n.o&&n.s&&m_(r,n.o,n.s),t=new hp(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=__(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),l_(n.h,t),lm(t,r,e)}function Ip(n,e){n.ia&&nm(n.ia,function(t,r){We(e,r,t)}),n.l&&LE({},function(t,r){We(e,r,t)})}function __(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Qr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const A=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{lb(A,d,"req"+C+"_")}catch{r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function WE(n){n.g||n.u||(n.Z=1,Hv(n.Ia,n),n.A=0)}function _m(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=lp(Qr(n.Ia,n),ZE(n,n.A)),n.A++,0))}function w_(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function E_(n){n.g=new hp(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ic(n.sa);We(e,"RID","rpc"),We(e,"SID",n.I),We(e,"CI",n.L?"0":"1"),We(e,"AID",n.T),We(e,"TYPE","xmlhttp"),Ip(n,e),n.o&&n.s&&m_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=hm(ic(e)),t.s=null,t.P=!0,r_(t,n)}function wm(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function Em(n,e){var t=null;if(n.g==e){wm(n),w_(n),n.g=null;var r=2}else{if(!c_(n.h,e))return;t=e.D,vp(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Vr(r=cp(),new RE(r,t)),vm(n)}else WE(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function gb(n,e){return!($E(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=lp(Qr(n.Ja,n,e),ZE(n,n.C)),n.C++,0)))}(n,e)||2==r&&_m(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:oc(n,5);break;case 4:oc(n,10);break;case 3:oc(n,6);break;default:oc(n,2)}}function ZE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function oc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Qr(n.kb,n);t||(t=new La("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||pp(t,"https"),hm(t)),function _p(n,e){const t=new up;if(Dt.Image){const r=new Image;r.onload=Zg(sc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Zg(sc,t,r,"TestLoadImage: error",!1,e),r.onabort=Zg(sc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zg(sc,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bi(2);n.G=0,n.l&&n.l.va(e),I_(n),v_(n)}function I_(n){if(n.G=0,n.la=[],n.l){const e=d_(n.h);(0!=e.length||0!=n.i.length)&&(Kg(n.la,e),Kg(n.la,n.i),n.h.i.length=0,tp(n.i),n.i.length=0),n.l.ua()}}function KE(n,e,t){var r=t instanceof La?ic(t):new La(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),gp(r,r.m);else{var o=Dt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new La(null,void 0);r&&pp(u,r),e&&(u.g=e),o&&gp(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&We(r,t,e),We(r,"VER",n.ma),Ip(n,r),r}function YE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jn(t&&n.Da&&!n.ra?new wp({jb:!0}):n.ra)).Ka(n.H),e}function QE(){}function ph(){if(Tl&&!(10<=Number(vE)))throw Error("Environmental error: no available transport.")}function os(n,e){Xr.call(this),this.g=new zE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!bl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bl(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new gh(this)}function D_(n){Xv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function JE(){e_.call(this),this.status=1}function gh(n){this.g=n}(rt=jn.prototype).Ka=function(n){this.L=n},rt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():t_.g(),this.C=function OE(n){return n.h||(n.h=n.i())}(this.u?this.u:t_),this.g.onreadystatechange=Qr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void fb(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Dt.FormData&&n instanceof Dt.FormData,!(0<=mE(YA,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qE(this),0<this.B&&((this.K=function QA(n){return Tl&&function YC(){return function yE(n){var e=KC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Qg(String(rp)).split("."),t=Qg("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Rv(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Rv(0==o[2].length,0==u[2].length)||Rv(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qr(this.qa,this)):this.A=qv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){fb(this,u)}},rt.qa=function(){typeof ec<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vr(this,"complete"),Vr(this,"abort"),Rl(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rl(this,!0)),jn.X.M.call(this)},rt.Ha=function(){this.s||(this.F||this.v||this.l?p_(this):this.fb())},rt.fb=function(){p_(this)},rt.aa=function(){try{return 2<Ua(this)?this.g.status:-1}catch{return-1}},rt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},rt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),db(e)}},rt.Ea=function(){return this.m},rt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=zE.prototype).ma=8,rt.G=1,rt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new hp(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=QC(u),DE(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=__(this,o,e),We(t=ic(this.F),"RID",n),We(t,"CVER",22),this.D&&We(t,"X-HTTP-Session-Id",this.D),Ip(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(hh(u)))+"&"+e:this.o&&m_(t,this.o,u)),l_(this.h,o),this.Ya&&We(t,"TYPE","init"),this.O?(We(t,"$req",e),We(t,"SID","null"),o.Z=!0,lm(o,t,null)):lm(o,t,e),this.G=2}}else 3==this.G&&(n?fh(this,n):0==this.i.length||ch(this.h)||fh(this))},rt.Ia=function(){if(this.u=null,E_(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=lp(Qr(this.eb,this),n)}},rt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bi(10),ym(this),E_(this))},rt.cb=function(){null!=this.v&&(this.v=null,ym(this),_m(this),bi(19))},rt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),bi(2)):(this.j.info("Failed to ping google.com"),bi(1))},(rt=QE.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Ra=function(){},ph.prototype.g=function(n,e){return new os(n,e)},Jr(os,Xr),os.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;bi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=KE(n,null,n.V),vm(n)},os.prototype.close=function(){y_(this.g)},os.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Fs(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&vm(e)},os.prototype.M=function(){this.g.l=null,delete this.j,y_(this.g),delete this.g,os.X.M.call(this)},Jr(D_,Xv),Jr(JE,e_),Jr(gh,QE),gh.prototype.xa=function(){Vr(this.g,"a")},gh.prototype.wa=function(n){Vr(this.g,new D_(n))},gh.prototype.va=function(n){Vr(this.g,new JE)},gh.prototype.ua=function(){Vr(this.g,"b")},ph.prototype.createWebChannel=ph.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,am.NO_ERROR=0,am.TIMEOUT=8,am.HTTP_ERROR=6,NE.COMPLETE="complete",PE.EventType=dp,dp.OPEN="a",dp.CLOSE="b",dp.ERROR="c",dp.MESSAGE="d",Xr.prototype.listen=Xr.prototype.N,jn.prototype.listenOnce=jn.prototype.O,jn.prototype.getLastError=jn.prototype.Oa,jn.prototype.getLastErrorCode=jn.prototype.Ea,jn.prototype.getStatus=jn.prototype.aa,jn.prototype.getResponseJson=jn.prototype.Sa,jn.prototype.getResponseText=jn.prototype.fa,jn.prototype.send=jn.prototype.da,jn.prototype.setWithCredentials=jn.prototype.Ka;var mb=Bi.createWebChannelTransport=function(){return new ph},yb=Bi.getStatEventTarget=function(){return cp()},C_=Bi.ErrorCode=am,vb=Bi.EventType=NE,_b=Bi.Event=nc,XE=Bi.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},eI=Bi.FetchXmlHttpFactory=wp,Dp=Bi.WebChannel=PE,wb=Bi.XhrIo=jn;const tI="@firebase/firestore";class Cr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");let mh="9.15.0";const ac=new ss.Yd("@firebase/firestore");function b_(){return ac.logLevel}function Me(n,...e){if(ac.logLevel<=ss.in.DEBUG){const t=e.map(S_);ac.debug(`Firestore (${mh}): ${n}`,...t)}}function Qn(n,...e){if(ac.logLevel<=ss.in.ERROR){const t=e.map(S_);ac.error(`Firestore (${mh}): ${n}`,...t)}}function Ba(n,...e){if(ac.logLevel<=ss.in.WARN){const t=e.map(S_);ac.warn(`Firestore (${mh}): ${n}`,...t)}}function S_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${mh}) INTERNAL ASSERTION FAILED: `+n;throw Qn(e),new Error(e)}function at(n,e){n||et()}function qe(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Wt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ib{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cr.UNAUTHENTICATED))}shutdown(){}}class A_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Db{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new br;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new br,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new br)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(at("string"==typeof r.accessToken),new Ib(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return at(null===e||"string"==typeof e),new Cr(e)}}class x_{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(at(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Cb{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new x_(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class M_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R_{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(at("string"==typeof t.token),this.A=t.token,new M_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function rI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class N_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=rI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function yh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function iI(n){return n+"\0"}class Rn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pt(e)}static min(){return new pt(new Rn(0,0))}static max(){return new pt(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class vh{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===vh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends vh{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const sI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jn extends vh{construct(e,t,r){return new Jn(e,t,r)}static isValidIdentifier(e){return sI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ae(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Ae(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jn(t)}static emptyPath(){return new Jn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(sn.fromString(e))}static fromName(e){return new Ge(sn.fromString(e).popFirst(5))}static empty(){return new Ge(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new sn(e.slice()))}}class O_{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function oI(n){return n.fields.find(e=>2===e.kind)}function Nl(n){return n.fields.filter(e=>2!==e.kind)}O_.UNKNOWN_ID=-1;class Im{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cp(0,as.min())}}function aI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=pt.fromTimestamp(1e9===r?new Rn(t+1,0):new Rn(t,r));return new as(o,Ge.empty(),e)}function uI(n){return new as(n.readTime,n.key,-1)}class as{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new as(pt.min(),Ge.empty(),-1)}static max(){return new as(pt.max(),Ge.empty(),-1)}}function P_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}const cI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function uc(n){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,me.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==cI)throw n;Me("LocalStore","Unexpectedly lost primary lease")}),Ol.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{d[C]=A,++m,m===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class bp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new br,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new _h(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=k_(r.target.error);this.P.reject(new _h(e,o))}}static open(e,t,r,o){try{return new bp(t,e.transaction(o,r))}catch(u){throw new _h(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ab(t)}}class Ls{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ls.D((0,Wt.z$)())&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),wh(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Wt.hl)())return!1;if(Ls.N())return!0;const e=(0,Wt.z$)(),t=Ls.D(e),r=0<t&&t<10,o=Ls.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new _h(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Ae(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new _h(e,m))},u.onupgradeneeded=d=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=bp.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),se.reject(A))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(Me("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class dI{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return wh(this.q.delete())}}class _h extends Ae{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function cc(n){return"IndexedDbTransactionError"===n.name}class Ab{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),wh(r)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),wh(this.store.add(e))}get(e){return wh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),wh(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),wh(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const d=k_(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new se((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new dI(m),C=t(m.primaryKey,m.value,w);if(C instanceof se){const A=C.catch(R=>(w.done(),se.reject(R)));r.push(A)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wh(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=k_(r.target.error);t(o)}})}let hI=!1;function k_(n){const e=Ls.D((0,Wt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hI||(hI=!0,setTimeout(()=>{throw r},0)),r}}return n}class xb{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Me("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Me("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){cc(r)?Me("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield uc(r)}yield t.nt(6e4)}))}}class Mb{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Me("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Me("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=uI(u);P_(d,r)>0&&(r=d)}),new as(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let us=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class Tp{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class lc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new lc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}function Dm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Pl(n){return null==n}function ja(n){return 0===n&&1/n==-1/0}function pI(n){return"number"==typeof n&&Number.isInteger(n)&&!ja(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const Cm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(n){if(at(!!n),"string"==typeof n){let e=0;const t=Cm.exec(n);if(at(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function kl(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function bm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function F_(n){const e=n.mapValue.fields.__previous_value__;return bm(e)?F_(e):e}function Fl(n){const e=mo(n.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}const $a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tm={nullValue:"NULL_VALUE"};function Ll(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bm(n)?4:mI(n)?9007199254740991:10:et()}function Ha(n,e){if(n===e)return!0;const t=Ll(n);if(t!==Ll(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fl(n).isEqual(Fl(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=mo(r.timestampValue),d=mo(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,kl(n.bytesValue).isEqual(kl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Xn(r.geoPointValue.latitude)===Xn(o.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Xn(r.integerValue)===Xn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Xn(r.doubleValue),d=Xn(o.doubleValue);return u===d?ja(u)===ja(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return yh(n.arrayValue.values||[],e.arrayValue.values||[],Ha);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Dm(u)!==Dm(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Ha(u[m],d[m])))return!1;return!0}(n,e);default:return et()}var o}function Vl(n,e){return void 0!==(n.values||[]).find(t=>Ha(t,e))}function Ho(n,e){if(n===e)return 0;const t=Ll(n),r=Ll(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Xn(o.integerValue||o.doubleValue),m=Xn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return L_(n.timestampValue,e.timestampValue);case 4:return L_(Fl(n),Fl(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(o,u){const d=kl(o),m=kl(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=St(d[w],m[w]);if(0!==C)return C}return St(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=St(Xn(o.latitude),Xn(u.latitude));return 0!==d?d:St(Xn(o.longitude),Xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=Ho(d[w],m[w]);if(C)return C}return St(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===$a.mapValue&&u===$a.mapValue)return 0;if(o===$a.mapValue)return 1;if(u===$a.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const R=St(m[A],C[A]);if(0!==R)return R;const H=Ho(d[m[A]],w[C[A]]);if(0!==H)return H}return St(m.length,C.length)}(n.mapValue,e.mapValue);default:throw et()}}function L_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=mo(n),r=mo(e),o=St(t.seconds,r.seconds);return 0!==o?o:St(t.nanos,r.nanos)}function dc(n){return Sp(n)}function Sp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=mo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?kl(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Sp(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Sp(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function Ul(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function V_(n){return!!n&&"integerValue"in n}function Ap(n){return!!n&&"arrayValue"in n}function gI(n){return!!n&&"nullValue"in n}function U_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Eh(n){return!!n&&"mapValue"in n}function Ih(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ih(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ih(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function yI(n){return"nullValue"in n?Tm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ul(lc.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function vI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ul(lc.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?$a:et()}function _I(n,e){const t=Ho(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function B_(n,e){const t=Ho(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ga{constructor(e,t){this.position=e,this.inclusive=t}}function wI(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(d.referenceValue),t.key):Ho(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function j_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ha(n.position[t],e.position[t]))return!1;return!0}class EI{}class Ct extends EI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new q_(e,t,r):"array-contains"===t?new kb(e,r):"in"===t?new bI(e,r):"not-in"===t?new z_(e,r):"array-contains-any"===t?new TI(e,r):new Ct(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Pb(e,r):new DI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ho(t,this.value)):null!==t&&Ll(this.value)===Ll(t)&&this.matchesComparison(Ho(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class en extends EI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new en(e,t)}matches(e){return Dh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Dh(n){return"and"===n.op}function $_(n){return"or"===n.op}function Nb(n){return Ob(n)&&Dh(n)}function Ob(n){for(const e of n.filters)if(e instanceof en)return!1;return!0}function H_(n){if(n instanceof Ct)return n.field.canonicalString()+n.op.toString()+dc(n.value);{const e=n.filters.map(t=>H_(t)).join(",");return`${n.op}(${e})`}}function G_(n,e){return n instanceof Ct?(t=n,(r=e)instanceof Ct&&t.op===r.op&&t.field.isEqual(r.field)&&Ha(t.value,r.value)):n instanceof en?function(t,r){return r instanceof en&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,d)=>o&&G_(u,r.filters[d]),!0)}(n,e):void et();var t,r}function Ch(n,e){const t=n.filters.concat(e);return en.create(t,n.op)}function II(n){return n instanceof Ct?`${(e=n).field.canonicalString()} ${e.op} ${dc(e.value)}`:n instanceof en?function(e){return e.op.toString()+" {"+e.getFilters().map(II).join(" ,")+"}"}(n):"Filter";var e}class q_ extends Ct{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pb extends Ct{constructor(e,t){super(e,"in",t),this.keys=CI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DI extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=CI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class kb extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ap(t)&&Vl(t.arrayValue,this.value)}}class bI extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vl(this.value.arrayValue,t)}}class z_ extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vl(this.value.arrayValue,t)}}class TI extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vl(this.value.arrayValue,r))}}class Bl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Sm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Nn{constructor(e,t){this.comparator=e,this.root=t||Ur.EMPTY}insert(e,t){return new Nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new W_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new W_(this.root,e,this.comparator,!1)}getReverseIterator(){return new W_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new W_(this.root,e,this.comparator,!0)}}class W_{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Ur.RED,this.left=o??Ur.EMPTY,this.right=u??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Ur(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Ur.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1,Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Ur(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Z_(this.data.getIterator())}getIteratorFrom(e){return new Z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class Z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yo(n){return n.hasNext()?n.getNext():void 0}class cs{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new cs([])}unionWith(e){let t=new vn(Jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Br{constructor(e){this.value=e}static empty(){return new Br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Eh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ih(t)}setAll(e){let t=Jn.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Ih(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Eh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){hi(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Br(Ih(this.value))}}function Am(n){const e=[];return hi(n.fields,(t,r)=>{const o=new Jn([t]);if(Eh(r)){const u=Am(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new cs(e)}class On{constructor(e,t,r,o,u,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new On(e,0,pt.min(),pt.min(),pt.min(),Br.empty(),0)}static newFoundDocument(e,t,r,o){return new On(e,1,t,pt.min(),r,o,0)}static newNoDocument(e,t){return new On(e,2,t,pt.min(),pt.min(),Br.empty(),0)}static newUnknownDocument(e,t){return new On(e,3,t,pt.min(),pt.min(),Br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fb{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ft=null}}function SI(n,e=null,t=[],r=[],o=null,u=null,d=null){return new Fb(n,e,t,r,o,u,d)}function jl(n){const e=qe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>H_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Pl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dc(r)).join(",")),e.ft=t}return e.ft}function xp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Sm(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!G_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!j_(n.startAt,e.startAt)&&j_(n.endAt,e.endAt)}function xm(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Mp(n,e){return n.filters.filter(t=>t instanceof Ct&&t.field.isEqual(e))}function K_(n,e,t){let r=Tm,o=!0;for(const u of Mp(n,e)){let d=Tm,m=!0;switch(u.op){case"<":case"<=":d=yI(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Tm}_I({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];_I({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function AI(n,e,t){let r=$a,o=!0;for(const u of Mp(n,e)){let d=$a,m=!0;switch(u.op){case">=":case">":d=vI(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=$a}B_({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];B_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Go{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.dt=null,this._t=null}}function Y_(n,e,t,r,o,u,d,m){return new Go(n,e,t,r,o,u,d,m)}function bh(n){return new Go(n)}function xI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Mm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Rm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Nm(n){return null!==n.collectionGroup}function hc(n){const e=qe(n);if(null===e.dt){e.dt=[];const t=Rm(e),r=Mm(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Bl(t)),e.dt.push(new Bl(Jn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Bl(Jn.keyField(),u))}}}return e.dt}function fi(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=SI(e.path,e.collectionGroup,hc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of hc(e))t.push(new Bl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ga(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ga(e.startAt.position,e.startAt.inclusive):null;e._t=SI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function Om(n,e){e.getFirstInequalityField(),Rm(n);const t=n.filters.concat([e]);return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Pm(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rp(n,e){return xp(fi(n),fi(e))&&n.limitType===e.limitType}function Lb(n){return`${jl(fi(n))}|lt:${n.limitType}`}function km(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>II(r)).join(", ")}]`),Pl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>dc(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>dc(r)).join(",")),`Target(${t})`}(fi(n))}; limitType=${n.limitType})`}function MI(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ge.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of hc(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=wI(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,hc(t),r)||t.endAt&&!function(o,u,d){const m=wI(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,hc(t),r)));var t,r}function Vb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ub(n){return(e,t)=>{let r=!1;for(const o of hc(n)){const u=JA(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function JA(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Ho(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function Bb(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function jb(n){return{integerValue:""+n}}function $b(n,e){return pI(e)?jb(e):Bb(n,e)}class Q_{constructor(){this._=void 0}}function Fm(n,e,t){return n instanceof qa?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof fc?X_(n,e):n instanceof Th?Lm(n,e):function(r,o){const u=J_(r,o),d=RI(u)+RI(r.gt);return V_(u)&&V_(r.gt)?jb(d):Bb(r.yt,d)}(n,e)}function XA(n,e,t){return n instanceof fc?X_(n,e):n instanceof Th?Lm(n,e):t}function J_(n,e){return n instanceof $l?V_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class qa extends Q_{}class fc extends Q_{constructor(e){super(),this.elements=e}}function X_(n,e){const t=e0(e);for(const r of n.elements)t.some(o=>Ha(o,r))||t.push(r);return{arrayValue:{values:t}}}class Th extends Q_{constructor(e){super(),this.elements=e}}function Lm(n,e){let t=e0(e);for(const r of n.elements)t=t.filter(o=>!Ha(o,r));return{arrayValue:{values:t}}}class $l extends Q_{constructor(e,t){super(),this.yt=e,this.gt=t}}function RI(n){return Xn(n.integerValue||n.doubleValue)}function e0(n){return Ap(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Vm{constructor(e,t){this.field=e,this.transform=t}}class Hb{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hl(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Um{}function Gb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Np(n.key,Pn.none()):new Sh(n.key,n.data,Pn.none());{const t=n.data,r=Br.empty();let o=new vn(Jn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new pc(n.key,r,new cs(o.toArray()),Pn.none())}}function tx(n,e,t){n instanceof Sh?function(r,o,u){const d=r.value.clone(),m=t0(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof pc?function(r,o,u){if(!Hl(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=t0(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(OI(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Bm(n,e,t,r){return n instanceof Sh?function(o,u,d,m){if(!Hl(o.precondition,u))return d;const w=o.value.clone(),C=n0(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof pc?function(o,u,d,m){if(!Hl(o.precondition,u))return d;const w=n0(o.fieldTransforms,m,u),C=u.data;return C.setAll(OI(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,Hl(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function qb(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=J_(r.transform,o||null);null!=u&&(null===t&&(t=Br.empty()),t.set(r.field,u))}return t||null}function NI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&yh(t,r,(o,u)=>function ex(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof fc&&r instanceof fc||t instanceof Th&&r instanceof Th?yh(t.elements,r.elements,Ha):t instanceof $l&&r instanceof $l?Ha(t.gt,r.gt):t instanceof qa&&r instanceof qa);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Sh extends Um{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class pc extends Um{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function OI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function t0(n,e,t){const r=new Map;at(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,XA(d,m,t[o]))}return r}function n0(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,Fm(u,d,e))}return r}class Np extends Um{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ls extends Um{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zb{constructor(e){this.count=e}}var er,tn;function ds(n){switch(n){default:return et();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function PI(n){if(void 0===n)return Qn("GRPC error has no .code"),oe.UNKNOWN;switch(n){case er.OK:return oe.OK;case er.CANCELLED:return oe.CANCELLED;case er.UNKNOWN:return oe.UNKNOWN;case er.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case er.INTERNAL:return oe.INTERNAL;case er.UNAVAILABLE:return oe.UNAVAILABLE;case er.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case er.NOT_FOUND:return oe.NOT_FOUND;case er.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case er.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case er.ABORTED:return oe.ABORTED;case er.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case er.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case er.DATA_LOSS:return oe.DATA_LOSS;default:return et()}}(tn=er||(er={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}const Wb=new Nn(Ge.comparator);function ji(){return Wb}const jm=new Nn(Ge.comparator);function Ah(...n){let e=jm;for(const t of n)e=e.insert(t.key,t);return e}function r0(n){let e=jm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zo(){return xh()}function s0(){return xh()}function xh(){return new qo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Zb=new Nn(Ge.comparator),kI=new vn(Ge.comparator);function Vt(...n){let e=kI;for(const t of n)e=e.add(t);return e}const o0=new vn(St);function vo(){return o0}class Mh{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Gl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Mh(pt.min(),o,vo(),ji(),Vt())}}class Gl{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Gl(r,t,Vt(),Vt(),Vt())}}class Vs{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class FI{constructor(e,t){this.targetId=e,this.Et=t}}class Kb{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class LI{constructor(){this.At=0,this.Rt=UI(),this.bt=Tr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Vt(),t=Vt(),r=Vt();return this.Rt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new Gl(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=UI()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Yb{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=ji(),this.qt=VI(),this.Ut=new vn(St)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.zt(o)&&t(o)})}Jt(e){const t=e.targetId,r=e.Et.count,o=this.Yt(t);if(o){const u=o.target;if(xm(u))if(0===r){const d=new Ge(u.path);this.Qt(t,d,On.newNoDocument(d,pt.min()))}else at(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,d)=>{const m=this.Yt(d);if(m){if(u.current&&xm(m.target)){const w=new Ge(m.target.path);null!==this.Lt.get(w)||this.te(d,w)||this.Qt(d,w,On.newNoDocument(w,e))}u.St&&(t.set(d,u.Ct()),u.xt())}});let r=Vt();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.Yt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Lt.forEach((u,d)=>d.setReadTime(e));const o=new Mh(e,t,this.Ut,this.Lt,r);return this.Lt=ji(),this.qt=VI(),this.Ut=new vn(St),o}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const o=this.Wt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new LI,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new vn(St),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new LI),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function VI(){return new Nn(Ge.comparator)}function UI(){return new Nn(Ge.comparator)}const BI={asc:"ASCENDING",desc:"DESCENDING"},nx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jI={and:"AND",or:"OR"};class Qb{constructor(e,t){this.databaseId=e,this.wt=t}}function ql(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jb(n,e){return n.wt?e.toBase64():e.toUint8Array()}function a0(n,e){return ql(n,e.toTimestamp())}function tr(n){return at(!!n),pt.fromTimestamp(function(e){const t=mo(e);return new Rn(t.seconds,t.nanos)}(n))}function $m(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function u0(n){const e=sn.fromString(n);return at(h0(e)),e}function Rh(n,e){return $m(n.databaseId,e.path)}function _o(n,e){const t=u0(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge($I(t))}function Nh(n,e){return $m(n.databaseId,e)}function Op(n){const e=u0(n);return 4===e.length?sn.emptyPath():$I(e)}function Oh(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $I(n){return at(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function c0(n,e,t){return{name:Rh(n,e),fields:t.value.mapValue.fields}}function l0(n,e,t){const r=_o(n,e.name),o=tr(e.updateTime),u=e.createTime?tr(e.createTime):pt.min(),d=new Br({mapValue:{fields:e.fields}}),m=On.newFoundDocument(r,o,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Hm(n,e){let t;if(e instanceof Sh)t={update:c0(n,e.key,e.value)};else if(e instanceof Np)t={delete:Rh(n,e.key)};else if(e instanceof pc)t={update:c0(n,e.key,e.data),updateMask:nT(e.fieldMask)};else{if(!(e instanceof ls))return et();t={verify:Rh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof qa)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof fc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Th)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $l)return{fieldPath:u.field.canonicalString(),increment:d.gt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:a0(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function HI(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Pn.updateTime(tr(o.updateTime)):void 0!==o.exists?Pn.exists(o.exists):Pn.none():Pn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(at("REQUEST_TIME"===d.setToServerValue),m=new qa):"appendMissingElements"in d?m=new fc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Th(d.removeAllFromArray.values||[]):"increment"in d?m=new $l(u,d.increment):et();const w=Jn.fromServerFormat(d.fieldPath);return new Vm(w,m)}(n,o)):[];var o;if(e.update){const o=_o(n,e.update.name),u=new Br({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new cs((e.updateMask.fieldPaths||[]).map(C=>Jn.fromServerFormat(C)));return new pc(o,u,d,t,r)}return new Sh(o,u,t,r)}if(e.delete){const o=_o(n,e.delete);return new Np(o,t)}if(e.verify){const o=_o(n,e.verify);return new ls(o,t)}return et()}function qI(n,e){return{documents:[Nh(n,e.path)]}}function d0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Nh(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Nh(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return WI(en.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Ph((A=C).field),direction:ix(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.wt||Pl(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function zI(n){let e=Op(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){at(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const R=tT(A);return R instanceof en&&Nb(R)?R.getFilters():[R]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Bl(za((R=A).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(A){let R;return R="object"==typeof A?A.value:A,Pl(R)?null:R}(t.limit));let w=null;var A;t.startAt&&(w=new Ga((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new Ga(A.values||[],!A.before)}(t.endAt)),Y_(e,o,d,u,m,"F",w,C)}function tT(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=za(e.unaryFilter.field);return Ct.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=za(e.unaryFilter.field);return Ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=za(e.unaryFilter.field);return Ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=za(e.unaryFilter.field);return Ct.create(u,"!=",{nullValue:"NULL_VALUE"});default:return et()}}(n):void 0!==n.fieldFilter?Ct.create(za((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return en.create(e.compositeFilter.filters.map(t=>tT(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return et()}}(e.compositeFilter.op))}(n):et();var e}function ix(n){return BI[n]}function sx(n){return nx[n]}function ox(n){return jI[n]}function Ph(n){return{fieldPath:n.canonicalString()}}function za(n){return Jn.fromServerFormat(n.fieldPath)}function WI(n){return n instanceof Ct?function(e){if("=="===e.op){if(U_(e.value))return{unaryFilter:{field:Ph(e.field),op:"IS_NAN"}};if(gI(e.value))return{unaryFilter:{field:Ph(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(U_(e.value))return{unaryFilter:{field:Ph(e.field),op:"IS_NOT_NAN"}};if(gI(e.value))return{unaryFilter:{field:Ph(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ph(e.field),op:sx(e.op),value:e.value}}}(n):n instanceof en?function(e){const t=e.getFilters().map(r=>WI(r));return 1===t.length?t[0]:{compositeFilter:{op:ox(e.op),filters:t}}}(n):et()}function nT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function h0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function lr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gm(e)),e=ZI(n.get(t),e);return Gm(e)}function ZI(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Gm(n){return n+"\x01\x01"}function Us(n){const e=n.length;if(at(e>=2),2===e)return at("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&et(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:et()}u=d+2}return new sn(r)}const KI=["userId","batchId"];function kh(n,e){return[n,lr(e)]}function qm(n,e,t){return[n,lr(e),t]}const zm={},ax=["prefixPath","collectionGroup","readTime","documentId"],ux=["prefixPath","collectionGroup","documentId"],cx=["collectionGroup","readTime","prefixPath","documentId"],lx=["canonicalId","targetId"],YI=["targetId","path"],rT=["path","targetId"],iT=["collectionId","parent"],sT=["indexId","uid"],oT=["uid","sequenceNumber"],QI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],JI=["indexId","uid","orderedDocumentKey"],XI=["userId","collectionPath","documentId"],aT=["userId","collectionPath","largestBatchId"],uT=["userId","collectionGroup","largestBatchId"],f0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p0=[...f0,"documentOverlays"],cT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],g0=cT,m0=[...g0,"indexConfiguration","indexState","indexEntries"];class y0 extends lI{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function jr(n,e){const t=qe(n);return Ls.M(t.se,e)}class eD{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&tx(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=s0();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=Gb(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(pt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&yh(this.mutations,e.mutations,(t,r)=>NI(t,r))&&yh(this.baseMutations,e.baseMutations,(t,r)=>NI(t,r))}}class tD{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){at(e.mutations.length===r.length);let o=Zb;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new tD(e,t,r,o)}}class v0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gc{constructor(e,t,r,o,u=pt.min(),d=pt.min(),m=Tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new gc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class nD{constructor(e){this.ie=e}}function lT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Rh(o=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ql(o,u.version.toTimestamp()),createTime:ql(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fh(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Fh(e.version)}}var o,u;return r}function _0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lh(n){const e=new Rn(n.seconds,n.nanoseconds);return pt.fromTimestamp(e)}function zl(n,e){const t=(e.baseMutations||[]).map(u=>HI(n.ie,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>HI(n.ie,u)),o=Rn.fromMillis(e.localWriteTimeMs);return new eD(e.batchId,o,t,r)}function Wm(n){const e=Lh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Lh(n.lastLimboFreeSnapshotVersion):pt.min();let r;var o;return void 0!==n.query.documents?(at(1===(o=n.query).documents.length),r=fi(bh(Op(o.documents[0])))):r=fi(zI(n.query)),new gc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Tr.fromBase64String(n.resumeToken))}function dT(n,e){const t=Fh(e.snapshotVersion),r=Fh(e.lastLimboFreeSnapshotVersion);let o;o=xm(e.target)?qI(n.ie,e.target):d0(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function rD(n){const e=zI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Pm(e,e.limit,"L"):e}function iD(n,e){return new v0(e.largestBatchId,HI(n.ie,e.overlayMutation))}function hT(n,e){const t=e.path.lastSegment();return[n,lr(e.path.popLast()),t]}function fT(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Fh(r.readTime),documentKey:lr(r.documentKey.path),largestBatchId:r.largestBatchId}}class i{getBundleMetadata(e,t){return s(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Lh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return s(e).put({bundleId:(r=t).id,createTime:Fh(tr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return a(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:rD(o.bundledQuery),readTime:Lh(o.readTime)};var o})}saveNamedQuery(e,t){return a(e).put({name:(r=t).name,readTime:Fh(tr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function s(n){return jr(n,"bundles")}function a(n){return jr(n,"namedQueries")}class c{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new c(e,t.uid||"")}getOverlay(e,t){return l(e).get(hT(this.userId,t)).next(r=>r?iD(this.yt,r):null)}getOverlays(e,t){const r=zo();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new v0(t,d);o.push(this.oe(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(lr(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(l(e).Y("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=zo(),u=lr(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return l(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=iD(this.yt,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=zo();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return l(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const R=iD(this.yt,C);u.size()<o||R.largestBatchId===d?(u.set(R.getKey(),R),d=R.largestBatchId):A.done()}).next(()=>u)}oe(e,t){return l(e).put(function(r,o,u){const[d,m,w]=hT(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Hm(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function l(n){return jr(n,"documentOverlays")}class p{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Xn(e.integerValue));else if("doubleValue"in e){const r=Xn(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),ja(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(kl(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?mI(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):et()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const o of Object.keys(r))this.de(o,t),this.ce(r[o],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const o of r)this.ce(o,t)}me(e,t){this.he(t,37),Ge.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function v(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function E(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=v(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}p.Ie=new p;class I{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const o=t.codePointAt(0);this.Ee(240|o>>>18),this.Ee(128|63&o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Pe()}Se(e){const t=this.De(e),r=E(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}xe(e){const t=this.De(e),r=E(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class T{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class M{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class P{constructor(){this.$e=new I,this.Be=new T(this.$e),this.Le=new M(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class ${constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $(this.indexId,this.documentKey,this.arrayValue,r)}}function Y(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=ye(n.arrayValue,e.arrayValue),0!==t?t:(t=ye(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function ye(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Pe{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){at(e.collectionGroup===this.collectionId);const t=oI(e);if(void 0!==t&&!this.We(t))return!1;const r=Nl(e);let o=0,u=0;for(;o<r.length&&this.We(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Qe){const d=r[o];if(!this.ze(this.Qe,d)||!this.He(this.Ke[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ke.length||!this.He(this.Ke[u++],d))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function He(n){var e,t;if(at(n instanceof Ct||n instanceof en),n instanceof Ct){if(n instanceof bI){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Ct.create(n.field,"==",u)))||[];return en.create(o,"or")}return n}const r=n.filters.map(o=>He(o));return en.create(r,n.op)}function st(n){if(0===n.getFilters().length)return[];const e=on(He(n));return at(wt(e)),mt(e)||Te(e)?[e]:e.getFilters()}function mt(n){return n instanceof Ct}function Te(n){return n instanceof en&&Nb(n)}function wt(n){return mt(n)||Te(n)||function(e){if(e instanceof en&&$_(e)){for(const t of e.getFilters())if(!mt(t)&&!Te(t))return!1;return!0}return!1}(n)}function on(n){if(at(n instanceof Ct||n instanceof en),n instanceof Ct)return n;if(1===n.filters.length)return on(n.filters[0]);const e=n.filters.map(r=>on(r));let t=en.create(e,n.op);return t=Vh(t),wt(t)?t:(at(t instanceof en),at(Dh(t)),at(t.filters.length>1),t.filters.reduce((r,o)=>En(r,o)))}function En(n,e){let t;return at(n instanceof Ct||n instanceof en),at(e instanceof Ct||e instanceof en),t=n instanceof Ct?e instanceof Ct?en.create([n,e],"and"):mc(n,e):e instanceof Ct?mc(e,n):function(r,o){if(at(r.filters.length>0&&o.filters.length>0),Dh(r)&&Dh(o))return Ch(r,o.getFilters());const u=$_(r)?r:o,d=$_(r)?o:r,m=u.filters.map(w=>En(w,d));return en.create(m,"or")}(n,e),Vh(t)}function mc(n,e){if(Dh(e))return Ch(e,n.getFilters());{const t=e.filters.map(r=>En(n,r));return en.create(t,"or")}}function Vh(n){if(at(n instanceof Ct||n instanceof en),n instanceof Ct)return n;const e=n.getFilters();if(1===e.length)return Vh(e[0]);if(Ob(n))return n;const t=e.map(o=>Vh(o)),r=[];return t.forEach(o=>{o instanceof Ct?r.push(o):o instanceof en&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:en.create(r,n.op)}class w0{constructor(){this.Je=new Pp}addToCollectionParentIndex(e,t){return this.Je.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(as.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(as.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Pp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new vn(sn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new vn(sn.comparator)).toArray()}}const Uh=new Uint8Array(0);class E0{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Pp,this.Xe=new qo(r=>jl(r),(r,o)=>xp(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:lr(o)};return Zm(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[iI(t),""],!1,!0);return Zm(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Us(d.parent))}return r})}addFieldIndex(e,t){const r=Bh(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=Zl(e);return u.next(m=>{d.put(fT(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Bh(e),o=Zl(e),u=Wl(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Wl(e);let o=!0;const u=new Map;return se.forEach(this.Ze(t),d=>this.tn(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Vt();const m=[];return se.forEach(u,(w,C)=>{var A;Me("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(kt=>`${kt.fieldPath}:${kt.kind}`).join(",")}`} to execute ${jl(t)}`);const R=function(kt,Ft){const Nt=oI(Ft);if(void 0===Nt)return null;for(const Gt of Mp(kt,Nt.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(C,w),H=function(kt,Ft){const Nt=new Map;for(const Gt of Nl(Ft))for(const ei of Mp(kt,Gt.fieldPath))switch(ei.op){case"==":case"in":Nt.set(Gt.fieldPath.canonicalString(),ei.value);break;case"not-in":case"!=":return Nt.set(Gt.fieldPath.canonicalString(),ei.value),Array.from(Nt.values())}return null}(C,w),X=function(kt,Ft){const Nt=[];let Gt=!0;for(const ei of Nl(Ft)){const B0=0===ei.kind?K_(kt,ei.fieldPath,kt.startAt):AI(kt,ei.fieldPath,kt.startAt);Nt.push(B0.value),Gt&&(Gt=B0.inclusive)}return new Ga(Nt,Gt)}(C,w),fe=function(kt,Ft){const Nt=[];let Gt=!0;for(const ei of Nl(Ft)){const B0=0===ei.kind?AI(kt,ei.fieldPath,kt.endAt):K_(kt,ei.fieldPath,kt.endAt);Nt.push(B0.value),Gt&&(Gt=B0.inclusive)}return new Ga(Nt,Gt)}(C,w),Ne=this.en(w,C,X),Ue=this.en(w,C,fe),Ut=this.nn(w,C,H),Bt=this.sn(w.indexId,R,Ne,X.inclusive,Ue,fe.inclusive,Ut);return se.forEach(Bt,kt=>r.J(kt,t.limit).next(Ft=>{Ft.forEach(Nt=>{const Gt=Ge.fromSegments(Nt.documentKey);d.has(Gt)||(d=d.add(Gt),m.push(Gt))})}))}).next(()=>m)}return se.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:st(en.create(e.filters,"and")).map(r=>SI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let R=0;R<w;++R){const H=t?this.rn(t[R/C]):Uh,X=this.on(e,H,r[R%C],o),fe=this.un(e,H,u[R%C],d),Ne=m.map(Ue=>this.on(e,H,Ue,!0));A.push(...this.createRange(X,fe,Ne))}return A}on(e,t,r,o){const u=new $(e,Ge.empty(),t,r);return o?u:u.Ue()}un(e,t,r,o){const u=new $(e,Ge.empty(),t,r);return o?u.Ue():u}tn(e,t){const r=new Pe(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.je(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;const o=this.Ze(t);return se.forEach(o,u=>this.tn(e,u).next(d=>{d?0!==r&&d.fields.length<function(m){let w=new vn(Jn.comparator),C=!1;for(const A of m.filters)for(const R of A.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?C=!0:w=w.add(R.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}cn(e,t){const r=new P;for(const o of Nl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);p.Ie.ue(u,d)}return r.Fe()}rn(e){const t=new P;return p.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new P;return p.Ie.ue(Ul(this.databaseId,t),r.qe(function(o){const u=Nl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let o=[];o.push(new P);let u=0;for(const d of Nl(e)){const m=r[u++];for(const w of o)if(this.hn(t,d.fieldPath)&&Ap(m))o=this.ln(o,d,m);else{const C=w.qe(d.kind);p.Ie.ue(m,C)}}return this.fn(o)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new P;w.seed(m.Fe()),p.Ie.ue(d,w.qe(t.kind)),u.push(w)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof Ct&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Bh(e),o=Zl(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,A){const R=A?new Cp(A.sequenceNumber,new as(Lh(A.readTime),new Ge(Us(A.documentKey)),A.largestBatchId)):Cp.empty(),H=C.fields.map(([X,fe])=>new Im(Jn.fromServerFormat(X),fe));return new O_(C.indexId,C.collectionGroup,H,R)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:St(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Bh(e),u=Zl(e);return this.dn(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,w=>u.put(fT(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?se.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,w=>this._n(e,o,w).next(C=>{const A=this.wn(u,w);return C.isEqual(A)?se.resolve():this.mn(e,u,w,C,A)}))))})}gn(e,t,r,o){return Wl(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,o){return Wl(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const o=Wl(e);let u=new vn(Y);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(d,m)=>{u=u.add(new $(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}wn(e,t){let r=new vn(Y);const o=this.cn(t,e);if(null==o)return r;const u=oI(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Ap(d))for(const m of d.arrayValue.values||[])r=r.add(new $(t.indexId,e.key,this.rn(m),o))}else r=r.add(new $(t.indexId,e.key,Uh,o));return r}mn(e,t,r,o,u){Me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,A,R){const H=m.getIterator(),X=w.getIterator();let fe=yo(H),Ne=yo(X);for(;fe||Ne;){let Ue=!1,Ut=!1;if(fe&&Ne){const Bt=C(fe,Ne);Bt<0?Ut=!0:Bt>0&&(Ue=!0)}else null!=fe?Ut=!0:Ue=!0;Ue?(A(Ne),Ne=yo(X)):Ut?(R(fe),fe=yo(H)):(fe=yo(H),Ne=yo(X))}}(o,u,Y,m=>{d.push(this.gn(e,t,r,m))},m=>{d.push(this.yn(e,t,r,m))}),se.waitFor(d)}dn(e){let t=1;return Zl(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Y(d,m)).filter((d,m,w)=>!m||0!==Y(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=Y(d,e),w=Y(d,t);if(0===m)o[0]=e.Ue();else if(m>0&&w<0)o.push(d),o.push(d.Ue());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2){if(this.pn(o[d],o[d+1]))return[];u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Uh,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Uh,[]]))}return u}pn(e,t){return Y(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hx)}getMinOffset(e,t){return se.mapArray(this.Ze(t),r=>this.tn(e,r).next(o=>o||et())).next(hx)}}function Zm(n){return jr(n,"collectionParents")}function Wl(n){return jr(n,"indexEntries")}function Bh(n){return jr(n,"indexConfiguration")}function Zl(n){return jr(n,"indexState")}function hx(n){at(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;P_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new as(e.readTime,e.documentKey,t)}const fx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function px(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(A,R,H)=>(m++,H.delete()));u.push(w.next(()=>{at(1===m)}));const C=[];for(const A of t.mutations){const R=qm(e,A.key.path,t.batchId);u.push(o.delete(R)),C.push(A.key)}return se.waitFor(u).next(()=>C)}function sD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class oD{constructor(e,t,r,o){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static re(e,t,r,o){at(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new oD(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jh(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Km(e),d=jh(e);return d.add({}).next(m=>{at("number"==typeof m);const w=new eD(m,t,r,o),C=function(H,X,fe){const Ne=fe.baseMutations.map(Ut=>Hm(H.ie,Ut)),Ue=fe.mutations.map(Ut=>Hm(H.ie,Ut));return{userId:X,batchId:fe.batchId,localWriteTimeMs:fe.localWriteTime.toMillis(),baseMutations:Ne,mutations:Ue}}(this.yt,this.userId,w),A=[];let R=new vn((H,X)=>St(H.canonicalString(),X.canonicalString()));for(const H of o){const X=qm(this.userId,H.key.path,m);R=R.add(H.key.path.popLast()),A.push(d.put(C)),A.push(u.put(X,zm))}return R.forEach(H=>{A.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),se.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return jh(e).get(t).next(r=>r?(at(r.userId===this.userId),zl(this.yt,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return jh(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(at(m.batchId>=r),u=zl(this.yt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return jh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jh(e).W("userMutationsIndex",t).next(r=>r.map(o=>zl(this.yt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=kh(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Km(e).Z({range:o},(d,m,w)=>{const[C,A,R]=d,H=Us(A);if(C===this.userId&&t.path.isEqual(H))return jh(e).get(R).next(X=>{if(!X)throw et();at(X.userId===this.userId),u.push(zl(this.yt,X))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(St);const o=[];return t.forEach(u=>{const d=kh(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Km(e).Z({range:m},(C,A,R)=>{const[H,X,fe]=C,Ne=Us(X);H===this.userId&&u.path.isEqual(Ne)?r=r.add(fe):R.done()});o.push(w)}),se.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=kh(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new vn(St);return Km(e).Z({range:d},(w,C,A)=>{const[R,H,X]=w,fe=Us(H);R===this.userId&&r.isPrefixOf(fe)?fe.length===o&&(m=m.add(X)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(jh(e).get(u).next(d=>{if(null===d)throw et();at(d.userId===this.userId),r.push(zl(this.yt,d))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return px(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Km(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Us(u[1]);o.push(w)}else m.done()}).next(()=>{at(0===o.length)})})}containsKey(e,t){return gx(e,this.userId,t)}Rn(e){return mx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gx(n,e,t){const r=kh(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Km(n).Z({range:u,X:!0},(m,w,C)=>{const[A,R,H]=m;A===e&&R===o&&(d=!0),C.done()}).next(()=>d)}function jh(n){return jr(n,"mutations")}function Km(n){return jr(n,"documentMutations")}function mx(n){return jr(n,"mutationQueues")}class kp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new kp(0)}static vn(){return new kp(-1)}}class BR{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new kp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>pt.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ym(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(at(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Ym(e).Z((d,m)=>{const w=Wm(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Ym(e).Z((r,o)=>{const u=Wm(o);t(u)})}Vn(e){return yx(e).get("targetGlobalKey").next(t=>(at(null!==t),t))}Sn(e,t){return yx(e).put("targetGlobalKey",t)}Dn(e,t){return Ym(e).put(dT(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=jl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ym(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Wm(m);xp(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=$h(e);return t.forEach(d=>{const m=lr(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=$h(e);return se.forEach(t,u=>{const d=lr(u.path);return se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=$h(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=$h(e);let u=Vt();return o.Z({range:r,X:!0},(d,m,w)=>{const C=Us(d[1]),A=new Ge(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=lr(t.path),o=IDBKeyRange.bound([r],[iI(r)],!1,!0);let u=0;return $h(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}ne(e,t){return Ym(e).get(t).next(r=>r?Wm(r):null)}}function Ym(n){return jr(n,"targets")}function yx(n){return jr(n,"targetGlobal")}function $h(n){return jr(n,"targetDocuments")}function vx([n,e],[t,r]){const o=St(n,t);return 0===o?St(e,r):o}class jR{constructor(e){this.xn=e,this.buffer=new vn(vx),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $R{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){cc(r)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield uc(r)}yield t.Fn(3e5)}))}}class HR{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(us.at);const r=new jR(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(fx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fx):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,o,u,d,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,d=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(C=Date.now(),b_()<=ss.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${R} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class GR{constructor(e,t){this.db=e,this.garbageCollector=new HR(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return aD(e,r)}removeReference(e,t,r){return aD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aD(e,t)}Gn(e,t){return function(r,o){let u=!1;return mx(r).tt(d=>gx(r,d,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,pt.min()),$h(e).delete([0,lr(d.path)])))});o.push(w)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aD(e,t)}Kn(e,t){const r=$h(e);let o,u=us.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==us.at&&t(new Ge(Us(o)),u),u=C,o=w):u=us.at}).next(()=>{u!==us.at&&t(new Ge(Us(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aD(n,e){return $h(n).put((r=n.currentSequenceNumber,{targetId:0,path:lr(e.path),sequenceNumber:r}));var r}class _x{constructor(){this.changes=new qo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qR{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fp(e).put(r)}removeEntry(e,t,r){return Fp(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],_0(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=On.newInvalidDocument(t);return Fp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(I0(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:On.newInvalidDocument(t)};return Fp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(I0(t))},(o,u)=>{r={document:this.jn(t,u),size:sD(u)}}).next(()=>r)}getEntries(e,t){let r=ji();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=ji(),o=new Nn(Ge.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,sD(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let o=new vn(Dx);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(I0(o.first()),I0(o.last())),d=o.getIterator();let m=d.getNext();return Fp(e).Z({index:"documentKeyIndex",range:u},(w,C,A)=>{const R=Ge.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Dx(m,R)<0;)r(m,null),m=d.getNext();m&&m.isEqual(R)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?A.j(I0(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),_0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fp(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=ji();for(const w of d){const C=this.jn(Ge.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=ji();const d=Ix(t,r),m=Ix(t,as.max());return Fp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,A)=>{const R=this.jn(Ge.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(R.key,R),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new zR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ex(e).get("remoteDocumentGlobalKey").next(t=>(at(!!t),t))}Qn(e,t){return Ex(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function dx(n,e){let t;if(e.document)t=l0(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),o=Lh(e.noDocument.readTime);t=On.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ge.fromSegments(e.unknownDocument.path),o=Lh(e.unknownDocument.version);t=On.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Rn(r[0],r[1]);return pt.fromTimestamp(o)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(pt.min()))return r}return On.newInvalidDocument(e)}}function wx(n){return new qR(n)}class zR extends _x{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new qo(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new vn((u,d)=>St(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=lT(this.Yn.yt,d);o=o.add(u.path.popLast()),r+=sD(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=lT(this.Yn.yt,d.convertToNoDocument(pt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Ex(n){return jr(n,"remoteDocumentGlobal")}function Fp(n){return jr(n,"remoteDocumentsV14")}function I0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ix(n,e){const t=e.documentKey.path.toArray();return[n,_0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Dx(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=St(t[u],r[u]),o)return o;return o=St(t.length,r.length),o||(o=St(t[t.length-2],r[r.length-2]),o||St(t[t.length-1],r[r.length-1]))}class WR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Cx{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Bm(r.mutation,o,cs.empty(),Rn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const o=zo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Ah();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=zo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=ji();const d=xh(),m=xh();return t.forEach((w,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof pc)?u=u.insert(C.key,C):void 0!==A&&(d.set(C.key,A.mutation.getFieldMask()),Bm(A.mutation,C,A.mutation.getFieldMask(),Rn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>d.set(C,A)),t.forEach((C,A)=>{var R;return m.set(C,new WR(A,null!==(R=d.get(C))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=xh();let o=new Nn((d,m)=>d-m),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||cs.empty();A=m.applyToLocalView(C,A),r.set(w,A);const R=(o.get(m.batchId)||Vt()).add(w);o=o.insert(m.batchId,R)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,R=s0();A.forEach(H=>{if(!u.has(H)){const X=Gb(t.get(H),r.get(H));null!==X&&R.set(H,X),u=u.add(H)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,R))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Nm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(zo());let m=-1,w=u;return d.next(C=>se.forEach(C,(A,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(A)?se.resolve():this.remoteDocumentCache.getEntry(e,A).next(H=>{w=w.insert(A,H)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Vt())).next(A=>({batchId:m,changes:r0(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let o=Ah();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Ah();return this.indexManager.getCollectionParents(e,o).next(d=>se.forEach(d,m=>{const w=(C=t,A=m.child(o),new Go(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,R)=>{u=u.insert(A,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===o.get(C)&&(o=o.insert(C,On.newInvalidDocument(C)))});let d=Ah();return o.forEach((m,w)=>{const C=u.get(m);void 0!==C&&Bm(C.mutation,w,cs.empty(),Rn.now()),MI(t,w)&&(d=d.insert(m,w))}),d})}}class ZR{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:tr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:rD(r.bundledQuery),readTime:tr(r.readTime)}),se.resolve();var r}}class KR{constructor(){this.overlays=new Nn(Ge.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=zo();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.oe(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=zo(),u=t.length+1,d=new Ge(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Nn((C,A)=>C-A);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=zo(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=zo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=o)););return se.resolve(m)}oe(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new v0(t,r));let u=this.es.get(t);void 0===u&&(u=Vt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class pT{constructor(){this.ns=new vn(pi.ss),this.rs=new vn(pi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new pi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new pi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new sn([])),r=new pi(t,e),o=new pi(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new sn([])),r=new pi(t,e),o=new pi(t,e+1);let u=Vt();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new pi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||St(e._s,t._s)}static os(e,t){return St(e._s,t._s)||Ge.comparator(e.key,t.key)}}class YR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new vn(pi.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new eD(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new pi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pi(t,0),o=new pi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(St);return t.forEach(o=>{const u=new pi(o,0),d=new pi(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const d=new pi(new Ge(u),0);let m=new vn(St);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w._s)),!0)},d),se.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){at(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,o=>{const u=new pi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new pi(t,0),o=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class QR{constructor(e){this.Es=e,this.docs=new Nn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():On.newInvalidDocument(t))}getEntries(e,t){let r=ji();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():On.newInvalidDocument(o))}),se.resolve(r)}getAllFromCollection(e,t,r){let o=ji();const u=new Ge(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||P_(uI(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JR(this)}getSize(e){return se.resolve(this.size)}}class JR extends _x{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class XR{constructor(e){this.persistence=e,this.Rs=new qo(t=>jl(t),xp),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new pT,this.targetCount=0,this.vs=kp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new kp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class bx{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new us(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new XR(this),this.indexManager=new w0,this.remoteDocumentCache=new QR(r=>this.referenceDelegate.xs(r)),this.yt=new nD(t),this.Ns=new ZR(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new YR(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const o=new eN(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class eN extends lI{constructor(e){super(),this.currentSequenceNumber=e}}class uD{constructor(e){this.persistence=e,this.Fs=new pT,this.$s=null}static Bs(e){return new uD(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const o=Ge.fromPath(r);return this.qs(e,o).next(u=>{u||t.removeEntry(o,pt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class tN{constructor(e){this.yt=e}$(e,t,r,o){const u=new bp("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KI,{unique:!0}),m.createObjectStore("documentMutations"),Tx(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Tx(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KI,{unique:!0});const A=w.store("mutations"),R=C.map(H=>A.put(H));return se.waitFor(R)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Us(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:XI});w.createIndex("collectionPathOverlayIndex",aT,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",uT,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:ax});w.createIndex("documentKeyIndex",ux),w.createIndex("collectionGroupIndex",cx)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:sT}).createIndex("sequenceNumberIndex",oT,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:QI}).createIndex("documentKeyIndex",JI,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=sD(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>se.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>se.forEach(m,w=>{at(w.userId===u.userId);const C=zl(this.yt,w);return px(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new sn(d),C=[0,lr(w)];u.push(t.get(C).next(A=>A?se.resolve():t.put({targetId:0,path:lr(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:iT});const r=t.store("collectionParents"),o=new Pp,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:lr(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new sn(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],C)=>{const A=Us(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Wm(o),d=dT(this.yt,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new Ge(sn.fromString(C.document.name).popFirst(5)):C.noDocument?Ge.fromSegments(C.noDocument.path):C.unknownDocument?Ge.fromSegments(C.unknownDocument.path):et()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(A))}).next(()=>se.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=wx(this.yt),u=new bx(uD.Bs,this.yt.ie);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:Vt();zl(this.yt,w).keys().forEach(R=>A=A.add(R)),m.set(w.userId,A)}),se.forEach(m,(w,C)=>{const A=new Cr(C),R=c.re(this.yt,A),H=u.getIndexManager(A),X=oD.re(A,this.yt,H,u.referenceDelegate);return new Cx(o,X,R,H).recalculateAndSaveOverlaysForDocumentKeys(new y0(t,us.at),w).next()})})}}function Tx(n){n.createObjectStore("targetDocuments",{keyPath:YI}).createIndex("documentTargetsIndex",rT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lx,{unique:!0}),n.createObjectStore("targetGlobal")}const gT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mT{constructor(e,t,r,o,u,d,m,w,C,A,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=C,this.Ys=A,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=H=>Promise.resolve(),!mT.C())throw new Ae(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GR(this,o),this.ii=t+"main",this.yt=new nD(w),this.ri=new Ls(this.ii,this.Xs,new tN(this.yt)),this.Cs=new BR(this.referenceDelegate,this.yt),this.remoteDocumentCache=wx(this.yt),this.Ns=new i,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&Qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(oe.FAILED_PRECONDITION,gT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new us(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(cc(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return D0(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return cD(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=jr(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return se.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):D0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ae(oe.FAILED_PRECONDITION,gT);return!1}}return!(!this.networkEnabled||!this.inForeground)||cD(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new y0(t,us.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>cD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return oD.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new E0(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return c.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Me("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?m0:14===d?g0:13===d?cT:12===d?p0:11===d?f0:void et();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new y0(w,this.Ss?this.Ss.next():us.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ae(oe.FAILED_PRECONDITION,cI);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return D0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(oe.FAILED_PRECONDITION,gT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return D0(e).put("owner",t)}static C(){return Ls.C()}_i(e){const t=D0(e);return t.get("owner").next(r=>this.mi(r)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Wt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function D0(n){return jr(n,"owner")}function cD(n){return jr(n,"clientMetadata")}function yT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class vT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Vt(),o=Vt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new vT(e,t.fromCache,r,o)}}class Sx{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(xI(t))return se.resolve(null);let r=fi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Pm(t,null,"F"),r=fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Vt(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,d,w.readTime)?this.ki(e,Pm(t,null,"F")):this.Bi(e,C,t,w)}))})))}Oi(e,t,r,o){return xI(t)||o.isEqual(pt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(b_()<=ss.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),km(t)),this.Bi(e,d,t,aI(o,-1)))})}Fi(e,t){let r=new vn(Ub(e));return t.forEach((o,u)=>{MI(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return b_()<=ss.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",km(t)),this.Ni.getDocumentsMatchingQuery(e,t,as.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class nN{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.yt=o,this.qi=new Nn(St),this.Ui=new qo(u=>jl(u),xp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cx(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function Ax(n,e,t,r){return new nN(n,e,t,r)}function xx(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,me.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Vt();for(const C of o){d.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:m}))})})}),_T.apply(this,arguments)}function rN(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const A=w.batch,R=A.keys();let H=se.resolve();return R.forEach(X=>{H=H.next(()=>C.getEntry(m,X)).next(fe=>{const Ne=w.docVersions.get(X);at(null!==Ne),fe.version.compareTo(Ne)<0&&(A.applyToRemoteDocument(fe,w),fe.isValidDocument()&&(fe.setReadTime(w.commitVersion),C.addEntry(fe)))})}),H.next(()=>d.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Vt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function Mx(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function iN(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.qi;const m=[];e.targetChanges.forEach((A,R)=>{const H=o.get(R);if(!H)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,R)));let X=H.withSequenceNumber(u.currentSequenceNumber);var fe,Ne,Ue;e.targetMismatches.has(R)?X=X.withResumeToken(Tr.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):A.resumeToken.approximateByteSize()>0&&(X=X.withResumeToken(A.resumeToken,r)),o=o.insert(R,X),Ne=X,Ue=A,(0===(fe=H).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-fe.snapshotVersion.toMicroseconds()>=3e8||Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,X))});let w=ji(),C=Vt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(Rx(u,d,e.documentUpdates).next(A=>{w=A.Wi,C=A.zi})),!r.isEqual(pt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(R=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return se.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.qi=o,u))}function Rx(n,e,t){let r=Vt(),o=Vt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=ji();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(pt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Me("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function sN(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qm(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new gc(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qi.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Jm(n,e,t){return wT.apply(this,arguments)}function wT(){return wT=(0,me.Z)(function*(n,e,t){const r=qe(n),o=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!cc(d))throw d;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.qi=r.qi.remove(e),r.Ui.delete(o.target)}),wT.apply(this,arguments)}function lD(n,e,t){const r=qe(n);let o=pt.min(),u=Vt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const A=qe(m),R=A.Ui.get(C);return void 0!==R?se.resolve(A.qi.get(R)):A.Cs.getTargetData(w,C)}(r,d,fi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:pt.min(),t?u:Vt())).next(m=>(Px(r,Vb(e),m),{documents:m,Hi:u})))}function Nx(n,e){const t=qe(n),r=qe(t.Cs),o=t.qi.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(d=>d?d.target:null))}function Ox(n,e){const t=qe(n),r=t.Ki.get(e)||pt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,aI(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Px(t,e,o),o))}function Px(n,e,t){let r=n.Ki.get(e)||pt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function ET(){return ET=(0,me.Z)(function*(n,e,t,r){const o=qe(n);let u=Vt(),d=ji();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const R=e.Yi(C);R.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(A,R)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield Qm(o,(C=r,fi(bh(sn.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Rx(C,m,d).next(A=>(m.apply(C),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),ET.apply(this,arguments)}function aN(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,me.Z)(function*(n,e,t=Vt()){const r=yield Qm(n,fi(rD(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=tr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Tr.EMPTY_BYTE_STRING,d);return o.qi=o.qi.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),IT.apply(this,arguments)}function kx(n,e){return`firestore_clients_${n}_${e}`}function Fx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function DT(n,e){return`firestore_targets_${n}_${e}`}class dD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Ae(o.error.code,o.error.message))),d?new dD(e,t,o.state,u):(Qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class C0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ae(r.error.code,r.error.message))),u?new C0(e,r.state,o):(Qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=vo();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=pI(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new hD(e,u):(Qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class CT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new CT(t.clientId,t.onlineState):(Qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bT{constructor(){this.activeTargetIds=vo()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TT{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Nn(St),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=kx(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new bT),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(kx(e.persistenceKey,o));if(u){const d=hD.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(DT(this.persistenceKey,e));if(r){const o=C0.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(DT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=us.at;if(null!=u)try{const m=JSON.parse(u);at("number"==typeof m),d=m}catch(m){Qn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==us.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new dD(this.currentUser,e,t,r),u=Fx(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=Fx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=DT(this.persistenceKey,e),u=new C0(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return hD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return dD.Zi(new Cr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return C0.Zi(o,t)}yr(e){return CT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=vo();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Lx{constructor(){this.Lr=new bT,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new bT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uN{Ur(e){}shutdown(){}}class Vx{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lN{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class dN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);Me("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Me("RestConnection","Received: ",w),w),w=>{throw Ba("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+mh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${cN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new wb;m.setWithCredentials(!0),m.listenOnce(vb.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case C_.NO_ERROR:const C=m.getResponseJson();Me("Connection","XHR received:",JSON.stringify(C)),u(C);break;case C_.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),d(new Ae(oe.DEADLINE_EXCEEDED,"Request time out"));break;case C_.HTTP_ERROR:const A=m.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const H=R?.error;if(H&&H.status&&H.message){const X=function(fe){const Ne=fe.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Ne)>=0?Ne:oe.UNKNOWN}(H.status);d(new Ae(X,H.message))}else d(new Ae(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Ae(oe.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=mb(),d=yb(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new eI({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Me("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let A=!1,R=!1;const H=new lN({Hr:fe=>{R?Me("Connection","Not sending because WebChannel is closed:",fe):(A||(Me("Connection","Opening WebChannel transport."),C.open(),A=!0),Me("Connection","WebChannel sending:",fe),C.send(fe))},Jr:()=>C.close()}),X=(fe,Ne,Ue)=>{fe.listen(Ne,Ut=>{try{Ue(Ut)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return X(C,Dp.EventType.OPEN,()=>{R||Me("Connection","WebChannel transport opened.")}),X(C,Dp.EventType.CLOSE,()=>{R||(R=!0,Me("Connection","WebChannel transport closed"),H.io())}),X(C,Dp.EventType.ERROR,fe=>{R||(R=!0,Ba("Connection","WebChannel transport errored:",fe),H.io(new Ae(oe.UNAVAILABLE,"The operation could not be completed")))}),X(C,Dp.EventType.MESSAGE,fe=>{var Ne;if(!R){const Ue=fe.data[0];at(!!Ue);const Ut=Ue,Bt=Ut.error||(null===(Ne=Ut[0])||void 0===Ne?void 0:Ne.error);if(Bt){Me("Connection","WebChannel received error:",Bt);const kt=Bt.status;let Ft=function(Gt){const ei=er[Gt];if(void 0!==ei)return PI(ei)}(kt),Nt=Bt.message;void 0===Ft&&(Ft=oe.INTERNAL,Nt="Unknown error status: "+kt+" with message "+Bt.message),R=!0,H.io(new Ae(Ft,Nt)),C.close()}else Me("Connection","WebChannel received:",Ue),H.ro(Ue)}}),X(d,_b.STAT_EVENT,fe=>{fe.stat===XE.PROXY?Me("Connection","Detected buffering proxy"):fe.stat===XE.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.so()},0),H}}function Ux(){return typeof window<"u"?window:null}function fD(){return typeof document<"u"?document:null}function b0(n){return new Qb(n,!0)}class ST{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Bx{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ST(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Ae(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hN extends Bx{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function eT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),o=e.targetChange.targetIds||[],u=function(w,C){return w.wt?(at(void 0===C||"string"==typeof C),Tr.fromBase64String(C||"")):(at(void 0===C||C instanceof Uint8Array),Tr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?oe.UNKNOWN:PI(w.code);return new Ae(C,w.message||"")}(d);t=new Kb(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=_o(n,r.document.name),u=tr(r.document.updateTime),d=r.document.createTime?tr(r.document.createTime):pt.min(),m=new Br({mapValue:{fields:r.document.fields}}),w=On.newFoundDocument(o,u,d,m);t=new Vs(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=_o(n,r.document),u=r.readTime?tr(r.readTime):pt.min(),d=On.newNoDocument(o,u);t=new Vs([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=_o(n,r.document);t=new Vs([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new zb(r.count||0);t=new FI(r.targetId,u)}}var w;return t}(this.yt,e),r=function(o){if(!("targetChange"in o))return pt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?pt.min():u.readTime?tr(u.readTime):pt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Oh(this.yt),t.addTarget=function(o,u){let d;const m=u.target;return d=xm(m)?{documents:qI(o,m)}:{query:d0(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Jb(o,u.resumeToken):u.snapshotVersion.compareTo(pt.min())>0&&(d.readTime=ql(o,u.snapshotVersion.toTimestamp())),d}(this.yt,e);const r=function rx(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Oh(this.yt),t.removeTarget=e,this.Bo(t)}}class fN extends Bx{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function GI(n,e){return n&&n.length>0?(at(void 0!==e),n.map(t=>function(r,o){let u=tr(r.updateTime?r.updateTime:o);return u.isEqual(pt.min())&&(u=tr(o)),new Hb(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.Zo(r,t)}return at(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Oh(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hm(this.yt,r))};this.Bo(t)}}class pN extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=o,this.nu=!1}su(){if(this.nu)throw new Ae(oe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(oe.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(oe.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class mN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Qn(t),this.ou=!1):Me("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class yN{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;Kl(d)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(C){const A=qe(C);A._u.add(4),yield Xm(A),A.gu.set("Unknown"),A._u.delete(4),yield T0(A)}),function(C){return w.apply(this,arguments)})(d))}))}),this.gu=new mN(r,o)}}function T0(n){return xT.apply(this,arguments)}function xT(){return xT=(0,me.Z)(function*(n){if(Kl(n))for(const e of n.wu)yield e(!0)}),xT.apply(this,arguments)}function Xm(n){return MT.apply(this,arguments)}function MT(){return MT=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),MT.apply(this,arguments)}function pD(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),OT(t)?NT(t):ty(t).ko()&&RT(t,e))}function S0(n,e){const t=qe(n),r=ty(t);t.du.delete(e),r.ko()&&jx(t,e),0===t.du.size&&(r.ko()?r.Fo():Kl(t)&&t.gu.set("Unknown"))}function RT(n,e){n.yu.Ot(e.targetId),ty(n).zo(e)}function jx(n,e){n.yu.Ot(e),ty(n).Ho(e)}function NT(n){n.yu=new Yb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),ty(n).start(),n.gu.uu()}function OT(n){return Kl(n)&&!ty(n).No()&&n.du.size>0}function Kl(n){return 0===qe(n)._u.size}function $x(n){n.yu=void 0}function vN(n){return PT.apply(this,arguments)}function PT(){return PT=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{RT(n,e)})}),PT.apply(this,arguments)}function _N(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,me.Z)(function*(n,e){$x(n),OT(n)?(n.gu.hu(e),NT(n)):n.gu.set("Unknown")}),kT.apply(this,arguments)}function wN(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Kb&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gD(n,r)}else if(e instanceof Vs?n.yu.Kt(e):e instanceof FI?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(pt.min()))try{const r=yield Mx(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.Zt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.du.get(w);C&&o.du.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(Tr.EMPTY_BYTE_STRING,w.snapshotVersion)),jx(o,m);const C=new gc(w.target,m,1,w.sequenceNumber);RT(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Me("RemoteStore","Failed to raise snapshot:",r),yield gD(n,r)}var r}),FT.apply(this,arguments)}function gD(n,e,t){return LT.apply(this,arguments)}function LT(){return LT=(0,me.Z)(function*(n,e,t){if(!cc(e))throw e;n._u.add(1),yield Xm(n),n.gu.set("Offline"),t||(t=()=>Mx(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield T0(n)}))}),LT.apply(this,arguments)}function Hx(n,e){return e().catch(t=>gD(n,t,e))}function ey(n){return VT.apply(this,arguments)}function VT(){return VT=(0,me.Z)(function*(n){const e=qe(n),t=Hh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;EN(e);)try{const o=yield sN(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,IN(e,o)}catch(o){yield gD(e,o)}Gx(e)&&qx(e)}),VT.apply(this,arguments)}function EN(n){return Kl(n)&&n.fu.length<10}function IN(n,e){n.fu.push(e);const t=Hh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Gx(n){return Kl(n)&&!Hh(n).No()&&n.fu.length>0}function qx(n){Hh(n).start()}function DN(n){return UT.apply(this,arguments)}function UT(){return UT=(0,me.Z)(function*(n){Hh(n).eu()}),UT.apply(this,arguments)}function CN(n){return BT.apply(this,arguments)}function BT(){return BT=(0,me.Z)(function*(n){const e=Hh(n);for(const t of n.fu)e.Xo(t.mutations)}),BT.apply(this,arguments)}function bN(n,e,t){return jT.apply(this,arguments)}function jT(){return jT=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),o=tD.from(r,e,t);yield Hx(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield ey(n)}),jT.apply(this,arguments)}function TN(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,me.Z)(function*(n,e){var t;e&&Hh(n).Yo&&(yield(t=(0,me.Z)(function*(r,o){if(ds(u=o.code)&&u!==oe.ABORTED){const d=r.fu.shift();Hh(r).Mo(),yield Hx(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield ey(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Gx(n)&&qx(n)}),$T.apply(this,arguments)}function zx(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,me.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const r=Kl(t);t._u.add(3),yield Xm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield T0(t)}),HT.apply(this,arguments)}function GT(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,me.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield T0(t)):e||(t._u.add(2),yield Xm(t),t.gu.set("Unknown"))}),qT.apply(this,arguments)}function ty(n){return n.pu||(n.pu=function(e,t,r){const o=qe(e);return o.su(),new hN(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:vN.bind(null,n),Zr:_N.bind(null,n),Wo:wN.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Mo(),OT(n)?NT(n):n.gu.set("Unknown")):(yield n.pu.stop(),$x(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Hh(n){return n.Iu||(n.Iu=function(e,t,r){const o=qe(e);return o.su(),new fN(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:DN.bind(null,n),Zr:TN.bind(null,n),tu:CN.bind(null,n),Zo:bN.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Mo(),yield ey(n)):(yield n.Iu.stop(),n.fu.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class zT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new zT(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ny(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),cc(n))return new Ae(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class ry{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Ah(),this.sortedSet=new Nn(this.comparator)}static emptySet(e){return new ry(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ry)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ry;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Wx{constructor(){this.Tu=new Nn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):et():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class iy{constructor(e,t,r,o,u,d,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new iy(e,t,ry.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class SN{constructor(){this.Au=void 0,this.listeners=[]}}class AN{constructor(){this.queries=new qo(e=>Lb(e),Rp),this.onlineState="Unknown",this.Ru=new Set}}function WT(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new SN),o)try{u.Au=yield t.onListen(r)}catch(d){const m=ny(d,`Initialization of query '${km(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&QT(t)}),ZT.apply(this,arguments)}function KT(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),YT.apply(this,arguments)}function xN(n,e){const t=qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Pu(o)&&(r=!0);d.Au=o}}r&&QT(t)}function MN(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function QT(n){n.Ru.forEach(e=>{e.next()})}class JT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new iy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class RN{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Zx{constructor(e){this.yt=e}Ji(e){return _o(this.yt,e)}Yi(e){return e.metadata.exists?l0(this.yt,e.document,!1):On.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return tr(e)}}class NN{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=sn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Zx(this.yt);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Vt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function oN(n,e,t,r){return ET.apply(this,arguments)}(e.localStore,new Zx(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield aN(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Kx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Yx{constructor(e){this.key=e}}class Qx{constructor(e){this.key=e}}class Jx{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Vt(),this.mutatedKeys=Vt(),this.Gu=Ub(e),this.Qu=new ry(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new Wx,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,R)=>{const H=o.get(A),X=MI(this.query,R)?R:null,fe=!!H&&this.mutatedKeys.has(H.key),Ne=!!X&&(X.hasLocalMutations||this.mutatedKeys.has(X.key)&&X.hasCommittedMutations);let Ue=!1;H&&X?H.data.isEqual(X.data)?fe!==Ne&&(r.track({type:3,doc:X}),Ue=!0):this.Hu(H,X)||(r.track({type:2,doc:X}),Ue=!0,(w&&this.Gu(X,w)>0||C&&this.Gu(X,C)<0)&&(m=!0)):!H&&X?(r.track({type:0,doc:X}),Ue=!0):H&&!X&&(r.track({type:1,doc:H}),Ue=!0,(w||C)&&(m=!0)),Ue&&(X?(d=d.add(X),u=Ne?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((C,A)=>function(R,H){const X=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return X(R)-X(H)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new iy(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Wx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Vt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Qx(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Yx(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Vt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return iy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class ON{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PN{constructor(e){this.key=e,this.nc=!1}}class kN{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new qo(m=>Lb(m),Rp),this.rc=new Map,this.oc=new Set,this.uc=new Nn(Ge.comparator),this.cc=new Map,this.ac=new pT,this.hc={},this.lc=new Map,this.fc=kp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function FN(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,me.Z)(function*(n,e){const t=IS(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield Qm(t.localStore,fi(e));t.isPrimaryClient&&pD(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield eS(t,e,r,"current"===m,d.resumeToken)}return o}),XT.apply(this,arguments)}function eS(n,e,t,r,o){return tS.apply(this,arguments)}function tS(){return tS=(0,me.Z)(function*(n,e,t,r,o){n._c=(R,H,X)=>{return(fe=(0,me.Z)(function*(Ne,Ue,Ut,Bt){let kt=Ue.view.Wu(Ut);kt.$i&&(kt=yield lD(Ne.localStore,Ue.query,!1).then(({documents:Gt})=>Ue.view.Wu(Gt,kt)));const Ft=Bt&&Bt.targetChanges.get(Ue.targetId),Nt=Ue.view.applyChanges(kt,Ne.isPrimaryClient,Ft);return dS(Ne,Ue.targetId,Nt.Xu),Nt.snapshot}),function(Ne,Ue,Ut,Bt){return fe.apply(this,arguments)})(n,R,H,X);var fe};const u=yield lD(n.localStore,e,!0),d=new Jx(e,u.Hi),m=d.Wu(u.documents),w=Gl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=d.applyChanges(m,n.isPrimaryClient,w);dS(n,t,C.Xu);const A=new ON(e,t,d);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),tS.apply(this,arguments)}function LN(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,me.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!Rp(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),S0(t.remoteStore,r.targetId),sy(t,r.targetId)}).catch(uc))):(sy(t,r.targetId),yield Jm(t.localStore,r.targetId,!0))}),nS.apply(this,arguments)}function rS(){return rS=(0,me.Z)(function*(n,e,t){const r=DS(n);try{const o=yield function(u,d){const m=qe(u),w=Rn.now(),C=d.reduce((H,X)=>H.add(X.key),Vt());let A,R;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let X=ji(),fe=Vt();return m.Gi.getEntries(H,C).next(Ne=>{X=Ne,X.forEach((Ue,Ut)=>{Ut.isValidDocument()||(fe=fe.add(Ue))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,X)).next(Ne=>{A=Ne;const Ue=[];for(const Ut of d){const Bt=qb(Ut,A.get(Ut.key).overlayedDocument);null!=Bt&&Ue.push(new pc(Ut.key,Bt,Am(Bt.value.mapValue),Pn.exists(!0)))}return m.mutationQueue.addMutationBatch(H,w,Ue,d)}).next(Ne=>{R=Ne;const Ue=Ne.applyToLocalDocumentSet(A,fe);return m.documentOverlayCache.saveOverlays(H,Ne.batchId,Ue)})}).then(()=>({batchId:R.batchId,changes:r0(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.hc[u.currentUser.toKey()];w||(w=new Nn(St)),w=w.insert(d,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Yl(r,o.changes),yield ey(r.remoteStore)}catch(o){const u=ny(o,"Failed to persist write");t.reject(u)}}),rS.apply(this,arguments)}function Xx(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,me.Z)(function*(n,e){const t=qe(n);try{const r=yield iN(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?at(d.nc):o.removedDocuments.size>0&&(at(d.nc),d.nc=!1))}),yield Yl(t,r,e)}catch(r){yield uc(r)}}),iS.apply(this,arguments)}function eM(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let w=!1;m.queries.forEach((C,A)=>{for(const R of A.listeners)R.bu(d)&&(w=!0)}),w&&QT(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UN(n,e,t){return sS.apply(this,arguments)}function sS(){return sS=(0,me.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new Nn(Ge.comparator);d=d.insert(u,On.newNoDocument(u,pt.min()));const m=Vt().add(u),w=new Mh(pt.min(),new Map,new vn(St),d,m);yield Xx(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),hS(r)}else yield Jm(r.localStore,e,!1).then(()=>sy(r,e,t)).catch(uc)}),sS.apply(this,arguments)}function BN(n,e){return oS.apply(this,arguments)}function oS(){return oS=(0,me.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield rN(t.localStore,e);lS(t,r,null),cS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Yl(t,o)}catch(o){yield uc(o)}}),oS.apply(this,arguments)}function jN(n,e,t){return aS.apply(this,arguments)}function aS(){return aS=(0,me.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,d).next(A=>(at(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);lS(r,e,t),cS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Yl(r,o)}catch(o){yield uc(o)}}),aS.apply(this,arguments)}function uS(){return uS=(0,me.Z)(function*(n,e){const t=qe(n);Kl(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=ny(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),uS.apply(this,arguments)}function cS(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function lS(n,e,t){const r=qe(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function sy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||tM(n,r)})}function tM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(S0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),hS(n))}function dS(n,e,t){for(const r of t)r instanceof Yx?(n.ac.addReference(r.key,e),HN(n,r)):r instanceof Qx?(Me("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||tM(n,r.key)):et()}function HN(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Me("SyncEngine","New document in limbo: "+t),n.oc.add(r),hS(n))}function hS(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ge(sn.fromString(e)),r=n.fc.next();n.cc.set(r,new PN(t)),n.uc=n.uc.insert(t,r),pD(n.remoteStore,new gc(fi(bh(t.path)),r,2,us.at))}}function Yl(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,me.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],d=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{d.push(r._c(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const A=vT.Ci(w.targetId,C);u.push(A)}}))}),yield Promise.all(d),r.sc.Wo(o),yield(m=(0,me.Z)(function*(w,C){const A=qe(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>se.forEach(C,H=>se.forEach(H.Si,X=>A.persistence.referenceDelegate.addReference(R,H.targetId,X)).next(()=>se.forEach(H.Di,X=>A.persistence.referenceDelegate.removeReference(R,H.targetId,X)))))}catch(R){if(!cc(R))throw R;Me("LocalStore","Failed to update sequence numbers: "+R)}for(const R of C){const H=R.targetId;if(!R.fromCache){const X=A.qi.get(H),Ne=X.withLastLimboFreeSnapshotVersion(X.snapshotVersion);A.qi=A.qi.insert(H,Ne)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),fS.apply(this,arguments)}function GN(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,me.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const r=yield xx(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(m=>{m.reject(new Ae(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Yl(t,r.ji)}var o}),pS.apply(this,arguments)}function qN(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return Vt().add(r.key);{let o=Vt();const u=t.rc.get(e);if(!u)return o;for(const d of u){const m=t.ic.get(d);o=o.unionWith(m.view.ju)}return o}}function zN(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,me.Z)(function*(n,e){const t=qe(n),r=yield lD(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&dS(t,e.targetId,o.Xu),o}),gS.apply(this,arguments)}function WN(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,me.Z)(function*(n,e){const t=qe(n);return Ox(t.localStore,e).then(r=>Yl(t,r))}),mS.apply(this,arguments)}function ZN(n,e,t,r){return yS.apply(this,arguments)}function yS(){return yS=(0,me.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(d,m){const w=qe(d),C=qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,m).next(R=>R?w.localDocuments.getDocuments(A,R):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield ey(o.remoteStore):"acknowledged"===t||"rejected"===t?(lS(o,e,r||null),cS(o,e),m=e,qe(qe(o.localStore).mutationQueue).An(m)):et(),yield Yl(o,u)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)}),yS.apply(this,arguments)}function vS(){return vS=(0,me.Z)(function*(n,e){const t=qe(n);if(IS(t),DS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield nM(t,r.toArray());t.dc=!0,yield GT(t.remoteStore,!0);for(const u of o)pD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(sy(t,d),Jm(t.localStore,d,!0))),S0(t.remoteStore,d)}),yield o,yield nM(t,r),function(u){const d=qe(u);d.cc.forEach((m,w)=>{S0(d.remoteStore,w)}),d.ac.fs(),d.cc=new Map,d.uc=new Nn(Ge.comparator)}(t),t.dc=!1,yield GT(t.remoteStore,!1)}}),vS.apply(this,arguments)}function nM(n,e,t){return _S.apply(this,arguments)}function _S(){return _S=(0,me.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const d of e){let m;const w=r.rc.get(d);if(w&&0!==w.length){m=yield Qm(r.localStore,fi(w[0]));for(const C of w){const A=r.ic.get(C),R=yield zN(r,A);R.snapshot&&u.push(R.snapshot)}}else{const C=yield Nx(r.localStore,d);m=yield Qm(r.localStore,C),yield eS(r,rM(C),d,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),_S.apply(this,arguments)}function rM(n){return Y_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function YN(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function QN(n,e,t,r){return wS.apply(this,arguments)}function wS(){return wS=(0,me.Z)(function*(n,e,t,r){const o=qe(n);if(o.dc)return void Me("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Ox(o.localStore,Vb(u[0])),m=Mh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Tr.EMPTY_BYTE_STRING);yield Yl(o,d,m);break}case"rejected":yield Jm(o.localStore,e,!0),sy(o,e,r);break;default:et()}}),wS.apply(this,arguments)}function JN(n,e,t){return ES.apply(this,arguments)}function ES(){return ES=(0,me.Z)(function*(n,e,t){const r=IS(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Me("SyncEngine","Adding an already active target "+o);continue}const u=yield Nx(r.localStore,o),d=yield Qm(r.localStore,u);yield eS(r,rM(u),d.targetId,!1,d.resumeToken),pD(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield Jm(r.localStore,o,!1).then(()=>{S0(r.remoteStore,o),sy(r,o)}).catch(uc))}}),ES.apply(this,arguments)}function IS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UN.bind(null,e),e.sc.Wo=xN.bind(null,e.eventManager),e.sc.wc=MN.bind(null,e.eventManager),e}function DS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jN.bind(null,e),e}class iM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.yt=b0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Ax(this.persistence,new Sx,e.initialUser,this.yt)}yc(e){return new bx(uD.Bs,this.yt)}gc(e){return new Lx}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sM extends iM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield DS(r.Ac.syncEngine),yield ey(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Ax(this.persistence,new Sx,e.initialUser,this.yt)}Tc(e,t){return new $R(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Mb(t,this.persistence);return new xb(e.asyncQueue,r)}yc(e){const t=yT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new mT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Ux(),fD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Lx}}class eO extends sM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof TT&&(r.sharedClientState.syncEngine={Fr:ZN.bind(null,o),$r:QN.bind(null,o),Br:JN.bind(null,o),vi:YN.bind(null,o),Mr:WN.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(d){yield function KN(n,e){return vS.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=Ux();if(!TT.C(t))throw new Ae(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new TT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class CS{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>eM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,r.syncEngine),yield GT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new AN}createDatastore(e){const t=b0(e.databaseInfo.databaseId),r=new dN(e.databaseInfo);return new pN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>eM(this.syncEngine,m,0),d=Vx.C()?new Vx:new uN,new yN(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const A=new kN(r,o,u,d,m,w);return C&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=qe(t);Me("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Xm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bS(n,e,t){if(!t)throw new Ae(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oM(n,e,t,r){if(!0===e&&!0===r)throw new Ae(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aM(n){if(!Ge.isDocumentKey(n))throw new Ae(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uM(n){if(Ge.isDocumentKey(n))throw new Ae(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mD(n);throw new Ae(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cM(n,e){if(e<=0)throw new Ae(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const lM=new Map;class dM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class A0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nI;switch(t.type){case"gapi":return new Cb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=lM.get(e);t&&(Me("ComponentProvider","Removing Datastore"),lM.delete(e),t.terminate())}(this),Promise.resolve()}}class $n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class Ti{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ti(this.firestore,e,this._query)}}class yc extends Ti{constructor(e,t,r){super(e,t,bh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Ge(e))}withConverter(e){return new yc(this.firestore,e,this._path)}}function fM(n,e,...t){if(n=(0,Wt.m9)(n),bS("collection","path",e),n instanceof A0){const r=sn.fromString(e,...t);return uM(r),new yc(n,null,r)}{if(!(n instanceof $n||n instanceof yc))throw new Ae(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return uM(r),new yc(n.firestore,null,r)}}function yD(n,e,...t){if(n=(0,Wt.m9)(n),1===arguments.length&&(e=N_.R()),bS("doc","path",e),n instanceof A0){const r=sn.fromString(e,...t);return aM(r),new $n(n,null,new Ge(r))}{if(!(n instanceof $n||n instanceof yc))throw new Ae(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return aM(r),new $n(n.firestore,n instanceof yc?n.converter:null,new Ge(r))}}function pM(n,e){return n=(0,Wt.m9)(n),e=(0,Wt.m9)(e),(n instanceof $n||n instanceof yc)&&(e instanceof $n||e instanceof yc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function TS(n,e){return n=(0,Wt.m9)(n),e=(0,Wt.m9)(e),n instanceof Ti&&e instanceof Ti&&n.firestore===e.firestore&&Rp(n._query,e._query)&&n.converter===e.converter}function gM(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class vD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nO{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new br,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new RN(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,d){const m=qe(u),w=Oh(m.yt)+"/documents",C={documents:d.map(X=>Rh(m.yt,X))},A=yield m._o("BatchGetDocuments",w,C,d.length),R=new Map;A.forEach(X=>{const fe=function Xb(n,e){return"found"in e?function(t,r){at(!!r.found);const o=_o(t,r.found.name),u=tr(r.found.updateTime),d=r.found.createTime?tr(r.found.createTime):pt.min(),m=new Br({mapValue:{fields:r.found.fields}});return On.newFoundDocument(o,u,d,m)}(n,e):"missing"in e?function(t,r){at(!!r.missing),at(!!r.readTime);const o=_o(t,r.missing),u=tr(r.readTime);return On.newNoDocument(o,u)}(n,e):et()}(m.yt,X);R.set(fe.key.toString(),fe)});const H=[];return d.forEach(X=>{const fe=R.get(X.toString());at(!!fe),H.push(fe)}),H}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Np(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ge.fromPath(o);e.mutations.push(new ls(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const d=qe(o),m=Oh(d.yt)+"/documents",w={writes:u.map(C=>Hm(d.yt,C))};yield d.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pt.min())?Pn.exists(!1):Pn.updateTime(t):Pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pt.min()))throw new Ae(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pn.updateTime(t)}return Pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oO{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new ST(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new sO(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Pl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ds(t)}return!1}}class aO{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Cr.UNAUTHENTICATED,this.clientId=N_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){Me("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Me("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=ny(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function mM(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield xx(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),SS.apply(this,arguments)}function yM(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield xS(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>zx(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>zx(e.remoteStore,u)),n.onlineComponents=e}),AS.apply(this,arguments)}function xS(n){return MS.apply(this,arguments)}function MS(){return MS=(0,me.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield mM(n,new iM)),n.offlineComponents}),MS.apply(this,arguments)}function _D(n){return RS.apply(this,arguments)}function RS(){return RS=(0,me.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield yM(n,new CS)),n.onlineComponents}),RS.apply(this,arguments)}function vM(n){return xS(n).then(e=>e.persistence)}function wD(n){return xS(n).then(e=>e.localStore)}function NS(n){return _D(n).then(e=>e.remoteStore)}function OS(n){return _D(n).then(e=>e.syncEngine)}function oy(n){return PS.apply(this,arguments)}function PS(){return PS=(0,me.Z)(function*(n){const e=yield _D(n),t=e.eventManager;return t.onListen=FN.bind(null,e.syncEngine),t.onUnlisten=LN.bind(null,e.syncEngine),t}),PS.apply(this,arguments)}function wM(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new vD({next:R=>{u.enqueueAndForget(()=>KT(o,A));const H=R.docs.has(d);!H&&R.fromCache?w.reject(new Ae(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&m&&"server"===m.source?w.reject(new Ae(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),A=new JT(bh(d.path),C,{includeMetadataChanges:!0,Nu:!0});return WT(o,A)}(yield oy(n),n.asyncQueue,e,t,r)})),r.promise}function EM(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new vD({next:R=>{u.enqueueAndForget(()=>KT(o,A)),R.fromCache&&"server"===m.source?w.reject(new Ae(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),A=new JT(d,C,{includeMetadataChanges:!0,Nu:!0});return WT(o,A)}(yield oy(n),n.asyncQueue,e,t,r)})),r.promise}class gO{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ST(this,"async_queue_retry"),this.Wc=()=>{const t=fD();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=fD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=fD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new br;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!cc(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Qn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=zT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(o),o}zc(){this.Kc&&et()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function kS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class mO{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Hn extends A0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new gO,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||IM(this),this._firestoreClient.terminate()}}function Sr(n){return n._firestoreClient||IM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function IM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Tp(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new aO(n._authCredentials,n._appCheckCredentials,n._queue,r)}function DM(n,e,t){const r=new br;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield mM(n,t),yield yM(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===oe.FAILED_PRECONDITION||d.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Ba("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function CM(n){if(n._initialized||n._terminated)throw new Ae(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(Tr.fromBase64String(e))}catch(t){throw new Ae(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ql{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lp{constructor(e){this._methodName=e}}class ED{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const TO=/^__.*__$/;class SO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new pc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sh(e,this.data,t,this.fieldTransforms)}}class bM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new pc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function TM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class ID{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ID(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return bD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(TM(this.sa)&&TO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class AO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||b0(e)}da(e,t,r,o=!1){return new ID({sa:e,methodName:t,fa:r,path:Jn.emptyPath(),oa:!1,la:o},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Vp(n){const e=n._freezeSettings(),t=b0(n._databaseId);return new AO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DD(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);US("Data must be an object, but it was:",d,r);const m=xM(r,d);let w,C;if(u.merge)w=new cs(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const R of u.mergeFields){const H=BS(e,R,t);if(!d.contains(H))throw new Ae(oe.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);RM(A,H)||A.push(H)}w=new cs(A),C=d.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,C=d.fieldTransforms;return new SO(new Br(m),w,C)}class x0 extends Lp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof x0}}function SM(n,e,t){return new ID({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class FS extends Lp{_toFieldTransform(e){return new Vm(e.path,new qa)}isEqual(e){return e instanceof FS}}class xO extends Lp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=SM(this,e,!0),r=this._a.map(u=>Up(u,t)),o=new fc(r);return new Vm(e.path,o)}isEqual(e){return this===e}}class MO extends Lp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=SM(this,e,!0),r=this._a.map(u=>Up(u,t)),o=new Th(r);return new Vm(e.path,o)}isEqual(e){return this===e}}class RO extends Lp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new $l(e.yt,$b(e.yt,this.wa));return new Vm(e.path,t)}isEqual(e){return this===e}}function LS(n,e,t,r){const o=n.da(1,e,t);US("Data must be an object, but it was:",o,r);const u=[],d=Br.empty();hi(r,(w,C)=>{const A=CD(e,w,t);C=(0,Wt.m9)(C);const R=o.ca(A);if(C instanceof x0)u.push(A);else{const H=Up(C,R);null!=H&&(u.push(A),d.set(A,H))}});const m=new cs(u);return new bM(d,m,o.fieldTransforms)}function VS(n,e,t,r,o,u){const d=n.da(1,e,t),m=[BS(e,r,t)],w=[o];if(u.length%2!=0)throw new Ae(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(BS(e,u[H])),w.push(u[H+1]);const C=[],A=Br.empty();for(let H=m.length-1;H>=0;--H)if(!RM(C,m[H])){const X=m[H];let fe=w[H];fe=(0,Wt.m9)(fe);const Ne=d.ca(X);if(fe instanceof x0)C.push(X);else{const Ue=Up(fe,Ne);null!=Ue&&(C.push(X),A.set(X,Ue))}}const R=new cs(C);return new bM(A,R,d.fieldTransforms)}function AM(n,e,t,r=!1){return Up(t,n.da(r?4:3,e))}function Up(n,e){if(MM(n=(0,Wt.m9)(n)))return US("Unsupported field value:",e,n),xM(n,e);if(n instanceof Lp)return function(t,r){if(!TM(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Up(d,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Wt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $b(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Rn.fromDate(t);return{timestampValue:ql(r.yt,o)}}if(t instanceof Rn){const o=new Rn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ql(r.yt,o)}}if(t instanceof ED)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:Jb(r.yt,t._byteString)};if(t instanceof $n){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$m(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${mD(t)}`)}(n,e)}function xM(n,e){const t={};return fI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(n,(r,o)=>{const u=Up(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function MM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof ED||n instanceof vc||n instanceof $n||n instanceof Lp)}function US(n,e,t){if(!MM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=mD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function BS(n,e,t){if((e=(0,Wt.m9)(e))instanceof Ql)return e._internalPath;if("string"==typeof e)return CD(n,e);throw bD("Field path arguments must be of type string or ",n,!1,void 0,t)}const NO=new RegExp("[~\\*/\\[\\]]");function CD(n,e,t){if(e.search(NO)>=0)throw bD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ql(...e.split("."))._internalPath}catch{throw bD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Ae(oe.INVALID_ARGUMENT,m+n+w)}function RM(n,e){return n.some(t=>t.isEqual(e))}class M0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OO extends M0{data(){return super.data()}}function TD(n,e){return"string"==typeof e?CD(n,e):e instanceof Ql?e._internalPath:e._delegate._internalPath}function NM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jS{}class R0 extends jS{}function Gh(n,e,...t){let r=[];e instanceof jS&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof ay).length,d=o.filter(m=>m instanceof N0).length;if(u>1||u>0&&d>0)throw new Ae(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class N0 extends R0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new N0(e,t,r)}_apply(e){const t=this._parse(e);return FM(e._query,t),new Ti(e.firestore,e.converter,Om(e._query,t))}_parse(e){const t=Vp(e.firestore);return function(o,u,d,m,w,C,A){let R;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){kM(A,C);const H=[];for(const X of A)H.push(PM(m,o,X));R={arrayValue:{values:H}}}else R=PM(m,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||kM(A,C),R=AM(d,"where",A,"in"===C||"not-in"===C);return Ct.create(w,C,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ay extends jS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ay(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:en.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const d=o.getFlattenedFilters();for(const m of d)FM(u,m),u=Om(u,m)}(e._query,t),new Ti(e.firestore,e.converter,Om(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $S extends R0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $S(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Bl(o,u);return function(m,w){if(null===Mm(m)){const C=Rm(m);null!==C&&LM(0,C,w.field)}}(r,d),d}(e._query,this._field,this._direction);return new Ti(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Go(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class SD extends R0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new SD(e,t,r)}_apply(e){return new Ti(e.firestore,e.converter,Pm(e._query,this._limit,this._limitType))}}class AD extends R0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new AD(e,t,r)}_apply(e){const t=OM(e,this.type,this._docOrFields,this._inclusive);return new Ti(e.firestore,e.converter,(o=t,new Go((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class xD extends R0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new xD(e,t,r)}_apply(e){const t=OM(e,this.type,this._docOrFields,this._inclusive);return new Ti(e.firestore,e.converter,(o=t,new Go((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function OM(n,e,t,r){if(t[0]=(0,Wt.m9)(t[0]),t[0]instanceof M0)return function(o,u,d,m,w){if(!m)throw new Ae(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const A of hc(o))if(A.field.isKeyField())C.push(Ul(u,m.key));else{const R=m.data.field(A.field);if(bm(R))throw new Ae(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=A.field.canonicalString();throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(R)}return new Ga(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Vp(n.firestore);return function(u,d,m,w,C,A){const R=u.explicitOrderBy;if(C.length>R.length)throw new Ae(oe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let X=0;X<C.length;X++){const fe=C[X];if(R[X].field.isKeyField()){if("string"!=typeof fe)throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof fe}`);if(!Nm(u)&&-1!==fe.indexOf("/"))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${fe}' contains a slash.`);const Ne=u.path.child(sn.fromString(fe));if(!Ge.isDocumentKey(Ne))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Ue=new Ge(Ne);H.push(Ul(d,Ue))}else{const Ne=AM(m,w,fe);H.push(Ne)}}return new Ga(H,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function PM(n,e,t){if("string"==typeof(t=(0,Wt.m9)(t))){if(""===t)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nm(e)&&-1!==t.indexOf("/"))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ge.isDocumentKey(r))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ul(n,new Ge(r))}if(t instanceof $n)return Ul(n,t._key);throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mD(t)}.`)}function kM(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function FM(n,e){if(e.isInequality()){const r=Rm(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=Mm(n);null!==u&&LM(0,o,u)}const t=function(r,o){for(const u of r)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function LM(n,e,t){if(!t.isEqual(e))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class HS{convertValue(e,t="none"){switch(Ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return hi(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ED(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=F_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fl(e));default:return null}}convertTimestamp(e){const t=mo(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);at(h0(r));const o=new lc(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return o.isEqual(t)||Qn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function MD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class $O extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}class Bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jl extends M0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new O0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class O0 extends Jl{data(e={}){return super.data(e)}}class qh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Bp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new O0(this._firestore,this._userDataWriter,r.key,r,new Bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new O0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Bp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new O0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Bp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:HO(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function UM(n,e){return n instanceof Jl&&e instanceof Jl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof qh&&e instanceof qh&&n._firestore===e._firestore&&TS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class zh extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}function BM(n,e,t){n=nn(n,$n);const r=nn(n.firestore,Hn),o=MD(n.converter,e,t);return uy(r,[DD(Vp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Pn.none())])}function jM(n,e,t,...r){n=nn(n,$n);const o=nn(n.firestore,Hn),u=Vp(o);let d;return d="string"==typeof(e=(0,Wt.m9)(e))||e instanceof Ql?VS(u,"updateDoc",n._key,e,t,r):LS(u,"updateDoc",n._key,e),uy(o,[d.toMutation(n._key,Pn.exists(!0))])}function $M(n,...e){var t,r,o;n=(0,Wt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||kS(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(kS(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let w,C,A;if(n instanceof $n)C=nn(n.firestore,Hn),A=bh(n._key.path),w={next:R=>{e[d]&&e[d](GS(C,n,R))},error:e[d+1],complete:e[d+2]};else{const R=nn(n,Ti);C=nn(R.firestore,Hn),A=R._query;const H=new zh(C);w={next:X=>{e[d]&&e[d](new qh(C,H,R,X))},error:e[d+1],complete:e[d+2]},NM(n._query)}return function(R,H,X,fe){const Ne=new vD(fe),Ue=new JT(H,Ne,X);return R.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return WT(yield oy(R),Ue)})),()=>{Ne.bc(),R.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return KT(yield oy(R),Ue)}))}}(Sr(C),A,m,w)}function uy(n,e){return function(t,r){const o=new br;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function VN(n,e,t){return rS.apply(this,arguments)}(yield OS(t),r,o)})),o.promise}(Sr(n),e)}function GS(n,e,t){const r=t.docs.get(e._key),o=new zh(n);return new Jl(n,o,e._key,r,new Bp(t.hasPendingWrites,t.fromCache),e.converter)}const XO={maxAttempts:5};class HM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vp(e)}set(e,t,r){this._verifyNotCommitted();const o=Wh(e,this._firestore),u=MD(o.converter,t,r),d=DD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Pn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Wh(e,this._firestore);let d;return d="string"==typeof(t=(0,Wt.m9)(t))||t instanceof Ql?VS(this._dataReader,"WriteBatch.update",u._key,t,r,o):LS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wh(e,this._firestore);return this._mutations=this._mutations.concat(new Np(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wh(n,e){if((n=(0,Wt.m9)(n)).firestore!==e)throw new Ae(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class eP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vp(e)}get(e){const t=Wh(e,this._firestore),r=new $O(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new M0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new M0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=Wh(e,this._firestore),u=MD(o.converter,t,r),d=DD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Wh(e,this._firestore);let d;return d="string"==typeof(t=(0,Wt.m9)(t))||t instanceof Ql?VS(this._dataReader,"Transaction.update",u._key,t,r,o):LS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Wh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wh(e,this._firestore),r=new zh(this._firestore);return super.get(e).then(o=>new Jl(this._firestore,r,t._key,o._document,new Bp(!1,!1),t.converter))}}function qS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qM(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function zM(){if(!function Rb(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){mh=Ps.SDK_VERSION,(0,Ps._registerComponent)(new Pa.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Hn(new Db(t.getProvider("auth-internal")),new R_(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ae(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Ps.registerVersion)(tI,"3.8.0",n),(0,Ps.registerVersion)(tI,"3.8.0","esm2017")}();class P0{constructor(e){this._delegate=e}static fromBase64String(e){return zM(),new P0(vc.fromBase64String(e))}static fromUint8Array(e){return qM(),new P0(vc.fromUint8Array(e))}toBase64(){return zM(),this._delegate.toBase64()}toUint8Array(){return qM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zS(n){return function cP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class lP{enableIndexedDbPersistence(e,t){return function vO(n,e){CM(n=nn(n,Hn));const t=Sr(n),r=n._freezeSettings(),o=new CS;return DM(t,o,new sM(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _O(n){CM(n=nn(n,Hn));const e=Sr(n),t=n._freezeSettings(),r=new CS;return DM(e,r,new eO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function wO(n){if(n._initialized&&!n._terminated)throw new Ae(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Ls.C())return Promise.resolve();const o=r+"main";yield Ls.delete(o)}),function(r){return t.apply(this,arguments)})(yT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class WM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof lc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ba("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function hM(n,e,t,r={}){var o;const u=(n=nn(n,A0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Ba("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Cr.MOCK_USER;else{d=(0,Wt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Cr(w)}n._authCredentials=new A_(new Ib(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function IO(n){return function uO(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield vM(n),t=yield NS(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o._u.delete(0),T0(o)}(t)}))}(Sr(n=nn(n,Hn)))}(this._delegate)}disableNetwork(){return function DO(n){return function cO(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield vM(n),t=yield NS(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=qe(o);u._u.add(0),yield Xm(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Sr(n=nn(n,Hn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,oM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function EO(n){return function(e){const t=new br;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function $N(n,e){return uS.apply(this,arguments)}(yield OS(e),t)})),t.promise}(Sr(n=nn(n,Hn)))}(this._delegate)}onSnapshotsInSync(e){return function JO(n,e){return function hO(n,e){const t=new vD(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield oy(n),o=t,qe(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield oy(n),o=t,void qe(r).Ru.delete(o);var r,o}))}}(Sr(n=nn(n,Hn)),kS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cy(this,fM(this._delegate,e))}catch(t){throw hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wo(this,yD(this._delegate,e))}catch(t){throw hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fs(this,function tO(n,e){if(n=nn(n,A0),bS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ti(n,null,(t=e,new Go(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function tP(n,e,t){n=nn(n,Hn);const r=Object.assign(Object.assign({},XO),t);return function(o){if(o.maxAttempts<1)throw new Ae(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const m=new br;return o.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const w=yield function _M(n){return _D(n).then(e=>e.datastore)}(o);new oO(o.asyncQueue,w,d,u,m).run()})),m.promise}(Sr(n),o=>e(new eP(n,o)),r)}(this._delegate,t=>e(new ZM(this,t)))}batch(){return Sr(this._delegate),new KM(new HM(this._delegate,e=>uy(this._delegate,e)))}loadBundle(e){return function CO(n,e){const t=Sr(n=nn(n,Hn)),r=new mO;return function fO(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return gM(w,C);if(w instanceof ArrayBuffer)return gM(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new nO(w,d);var w}(t,b0(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function XN(n,e,t){const r=qe(n);var o;(o=(0,me.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(H,X){const fe=qe(H),Ne=tr(X.createTime);return fe.persistence.runTransaction("hasNewerBundle","readonly",Ue=>fe.Ns.getBundleMetadata(Ue,X.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(Ne)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(Kx(w));const C=new NN(w,u.localStore,d.yt);let A=yield d.mc();for(;A;){const H=yield C.Fu(A);H&&m._updateProgress(H),A=yield d.mc()}const R=yield C.complete();return yield Yl(u,R.Lu,void 0),yield function(H,X){const fe=qe(H);return fe.persistence.runTransaction("Save bundle","readwrite",Ne=>fe.Ns.saveBundleMetadata(Ne,X))}(u.localStore,w),m._completeWith(R.progress),Promise.resolve(R.Bu)}catch(w){return Ba("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield OS(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function bO(n,e){return function pO(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield wD(n),e)}))}(Sr(n=nn(n,Hn)),e).then(t=>t?new Ti(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fs(this,t):null)}}class RD extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new P0(new vc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wo.forKey(t,this.firestore,null)}}class ZM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}get(e){const t=$p(e);return this._delegate.get(t).then(r=>new k0(this._firestore,new Jl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=$p(e);return r?(qS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=$p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=$p(e);return this._delegate.delete(t),this}}class KM{constructor(e){this._delegate=e}set(e,t,r){const o=$p(e);return r?(qS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=$p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=$p(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new O0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new F0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new jp(e,new RD(e),t),o.set(t,u)),u}}jp.INSTANCES=new WeakMap;class Wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wo(t,new $n(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Wo(t,new $n(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cy(this.firestore,fM(this._delegate,e))}catch(t){throw hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Wt.m9)(e))instanceof $n&&pM(this._delegate,e)}set(e,t){t=qS("DocumentReference.set",t);try{return t?BM(this._delegate,e,t):BM(this._delegate,e)}catch(r){throw hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?jM(this._delegate,e):jM(this._delegate,e,t,...r)}catch(o){throw hs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function YO(n){return uy(nn(n.firestore,Hn),[new Np(n._key,Pn.none())])}(this._delegate)}onSnapshot(...e){const t=YM(e),r=QM(e,o=>new k0(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return $M(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function qO(n){n=nn(n,$n);const e=nn(n.firestore,Hn),t=Sr(e),r=new zh(e);return function lO(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield function(w,C){const A=qe(w);return A.persistence.runTransaction("read document","readonly",R=>A.localDocuments.getDocument(R,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Ae(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=ny(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield wD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Jl(e,r,n._key,o,new Bp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function zO(n){n=nn(n,$n);const e=nn(n.firestore,Hn);return wM(Sr(e),n._key,{source:"server"}).then(t=>GS(e,n,t))}(this._delegate):function GO(n){n=nn(n,$n);const e=nn(n.firestore,Hn);return wM(Sr(e),n._key).then(t=>GS(e,n,t))}(this._delegate),t.then(r=>new k0(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wo(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function hs(n,e,t){return n.message=n.message.replace(e,t),n}function YM(n){for(const e of n)if("object"==typeof e&&!zS(e))return e;return{}}function QM(n,e){var t,r;let o;return o=zS(n[0])?n[0]:zS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class k0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return UM(this._delegate,e._delegate)}}class F0 extends k0{data(e){const t=this._delegate.data(e);return function Eb(n,e){n||et()}(void 0!==t),t}}class fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}where(e,t,r){try{return new fs(this.firestore,Gh(this._delegate,function PO(n,e,t){const r=e,o=TD("where",n);return N0._create(o,r,t)}(e,t,r)))}catch(o){throw hs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fs(this.firestore,Gh(this._delegate,function kO(n,e="asc"){const t=e,r=TD("orderBy",n);return $S._create(r,t)}(e,t)))}catch(r){throw hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fs(this.firestore,Gh(this._delegate,function FO(n){return cM("limit",n),SD._create("limit",n,"F")}(e)))}catch(t){throw hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fs(this.firestore,Gh(this._delegate,function LO(n){return cM("limitToLast",n),SD._create("limitToLast",n,"L")}(e)))}catch(t){throw hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fs(this.firestore,Gh(this._delegate,function VO(...n){return AD._create("startAt",n,!0)}(...e)))}catch(t){throw hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fs(this.firestore,Gh(this._delegate,function UO(...n){return AD._create("startAfter",n,!1)}(...e)))}catch(t){throw hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fs(this.firestore,Gh(this._delegate,function BO(...n){return xD._create("endBefore",n,!1)}(...e)))}catch(t){throw hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fs(this.firestore,Gh(this._delegate,function jO(...n){return xD._create("endAt",n,!0)}(...e)))}catch(t){throw hs(t,"endAt()","Query.endAt()")}}isEqual(e){return TS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ZO(n){n=nn(n,Ti);const e=nn(n.firestore,Hn),t=Sr(e),r=new zh(e);return function dO(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield lD(o,u,!0),w=new Jx(u,m.Hi),C=w.Wu(m.documents),A=w.applyChanges(C,!1);d.resolve(A.snapshot)}catch(m){const w=ny(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield wD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new qh(e,r,n,o))}(this._delegate):"server"===e?.source?function KO(n){n=nn(n,Ti);const e=nn(n.firestore,Hn),t=Sr(e),r=new zh(e);return EM(t,n._query,{source:"server"}).then(o=>new qh(e,r,n,o))}(this._delegate):function WO(n){n=nn(n,Ti);const e=nn(n.firestore,Hn),t=Sr(e),r=new zh(e);return NM(n._query),EM(t,n._query).then(o=>new qh(e,r,n,o))}(this._delegate),t.then(r=>new WS(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=YM(e),r=QM(e,o=>new WS(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return $M(this._delegate,t,r)}withConverter(e){return new fs(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}class hP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new F0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class WS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new F0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new hP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new F0(this._firestore,r))})}isEqual(e){return UM(this._delegate,e._delegate)}}class cy extends fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wo(this.firestore,e):null}doc(e){try{return new Wo(this.firestore,void 0===e?yD(this._delegate):yD(this._delegate,e))}catch(t){throw hs(t,"doc()","CollectionReference.doc()")}}add(e){return function QO(n,e){const t=nn(n.firestore,Hn),r=yD(n),o=MD(n.converter,e);return uy(t,[DD(Vp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Wo(this.firestore,t))}isEqual(e){return pM(this._delegate,e._delegate)}withConverter(e){return new cy(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function $p(n){return nn(n,$n)}class ZS{constructor(...e){this._delegate=new Ql(...e)}static documentId(){return new ZS(Jn.keyField().canonicalString())}isEqual(e){return(e=(0,Wt.m9)(e))instanceof Ql&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function rP(){return new FS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hp(e)}static delete(){const e=function nP(){return new x0("deleteField")}();return e._methodName="FieldValue.delete",new Hp(e)}static arrayUnion(...e){const t=function iP(...n){return new xO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hp(t)}static arrayRemove(...e){const t=function sP(...n){return new MO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hp(t)}static increment(e){const t=function oP(n){return new RO("increment",n)}(e);return t._methodName="FieldValue.increment",new Hp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fP={Firestore:WM,GeoPoint:ED,Timestamp:Rn,Blob:P0,Transaction:ZM,WriteBatch:KM,DocumentReference:Wo,DocumentSnapshot:k0,Query:fs,QueryDocumentSnapshot:F0,QuerySnapshot:WS,CollectionReference:cy,FieldPath:ZS,FieldValue:Hp,setLogLevel:function dP(n){!function T_(n){ac.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function gP(n){(function pP(n,e){n.INTERNAL.registerComponent(new Pa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},fP)))})(n,(e,t)=>new WM(e,t,new lP)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(Os.Z);var mP=k(6451),ND=k(5363),yP=k(6063);class vP extends rs.x{constructor(e=1/0,t=1/0,r=yP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var _P=k(3099);function JM(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,_P.B)({connector:()=>new vP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function XM(n,e){return(0,Oy.m)(e)?mr(()=>n,e):mr(()=>n)}var KS=k(9468);k(259);const QS=new Map,tR={activated:!1,tokenObservers:[]},CP={initialized:!1,enabled:!1};function Si(n){return QS.get(n)||Object.assign({},tR)}function PD(){return CP}class MP{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Wt.BH,yield function RP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Wt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ps=new Wt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function rR(n){if(!Si(n).activated)throw ps.create("use-before-activation",{appName:n.name})}function eA(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(R){throw ps.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==d.status)throw ps.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(R){throw ps.create("fetch-parse-error",{originalErrorMessage:R?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+C,issuedAtTimeMillis:A}}),tA.apply(this,arguments)}function kP(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const L0="firebase-app-check-store";let LD=null;function sR(){return LD||(LD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ps.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(L0,{keyPath:"compositeKey"})}}catch(t){e(ps.create("storage-open",{originalErrorMessage:t?.message}))}}),LD)}function nA(){return nA=(0,me.Z)(function*(n,e){const r=(yield sR()).transaction(L0,"readwrite"),u=r.objectStore(L0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(ps.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),nA.apply(this,arguments)}const V0=new ss.Yd("@firebase/app-check");function sA(n,e){return(0,Wt.hl)()?function UP(n,e){return function oR(n,e){return nA.apply(this,arguments)}(function uR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{V0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cR(){return PD().enabled}function lR(){return aA.apply(this,arguments)}function aA(){return aA=(0,me.Z)(function*(){const n=PD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),aA.apply(this,arguments)}const qP={error:"UNKNOWN_ERROR"};function zP(n){return Wt.US.encodeString(JSON.stringify(n),!1)}function VD(n){return uA.apply(this,arguments)}function uA(){return uA=(0,me.Z)(function*(n,e=!1){const t=n.app;rR(t);const r=Si(t);let u,o=r.token;if(o&&!ly(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(ly(w)?o=w:yield sA(t,void 0))}if(!e&&o&&ly(o))return{token:o.token};let m,d=!1;if(cR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=eA(kP(t,yield lR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield sA(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield Si(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?V0.warn(w.message):V0.error(w),u=w}return o?u?m=ly(o)?{token:o.token,internalError:u}:fR(u):(m={token:o.token},r.token=o,yield sA(t,o)):m=fR(u),d&&hR(t,m),m}),uA.apply(this,arguments)}function lA(n,e){const t=Si(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function dR(n){const{app:e}=n,t=Si(e);let r=t.tokenRefresher;r||(r=function WP(n){const{app:e}=n;return new MP((0,me.Z)(function*(){let r;if(r=Si(e).token?yield VD(n,!0):yield VD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function hR(n,e){const t=Si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ly(n){return n.expireTimeMillis-Date.now()>0}function fR(n){return{token:zP(qP),error:n}}class ZP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Si(this.app);for(const t of e)lA(this.app,t.next);return Promise.resolve()}}const ER="app-check-internal";!function u1(){(0,Ps._registerComponent)(new Pa.wA("app-check",n=>function KP(n,e){return new ZP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ER).initialize()})),(0,Ps._registerComponent)(new Pa.wA(ER,n=>function YP(n){return{getToken:e=>VD(n,e),addTokenListener:e=>function cA(n,e,t,r){const{app:o}=n,u=Si(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&ly(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),dR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>dR(n))}(n,"INTERNAL",e),removeTokenListener:e=>lA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ps.registerVersion)("@firebase/app-check","0.6.0")}();class pA{constructor(){return(0,Lr.vb)("app-check")}}typeof window<"u"&&window;var DR=k(9260);const CR=new f.OlP("angularfire2.auth.use-emulator"),bR=new f.OlP("angularfire2.auth.settings"),TR=new f.OlP("angularfire2.auth.tenant-id"),SR=new f.OlP("angularfire2.auth.langugage-code"),AR=new f.OlP("angularfire2.auth.use-device-language"),xR=new f.OlP("angularfire.auth.persistence"),MR=(n,e,t,r,o,u,d,m)=>(0,Yr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,A]of Object.entries(d))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let mA=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,R,H,X){const fe=new rs.x,Ne=ct(void 0).pipe((0,ND.Q)(d.outsideAngular),mr(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9169)))),(0,vt.U)(()=>(0,Yr.on)(t,u,r)),(0,vt.U)(Ue=>MR(Ue,u,m,C,A,R,w,H)),JM({bufferSize:1,refCount:!1}));if(pr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{Ne.pipe(Sa()).subscribe();const Ut=Ne.pipe(mr(Ft=>Ft.getRedirectResult().then(Nt=>Nt,()=>null)),Lr.iC,JM({bufferSize:1,refCount:!1})),Bt=Ne.pipe(mr(Ft=>new Nr.y(Nt=>({unsubscribe:u.runOutsideAngular(()=>Ft.onAuthStateChanged(Gt=>Nt.next(Gt),Gt=>Nt.error(Gt),()=>Nt.complete()))})))),kt=Ne.pipe(mr(Ft=>new Nr.y(Nt=>({unsubscribe:u.runOutsideAngular(()=>Ft.onIdTokenChanged(Gt=>Nt.next(Gt),Gt=>Nt.error(Gt),()=>Nt.complete()))}))));this.authState=Ut.pipe(XM(Bt),(0,KS.R)(d.outsideAngular),(0,ND.Q)(d.insideAngular)),this.user=Ut.pipe(XM(kt),(0,KS.R)(d.outsideAngular),(0,ND.Q)(d.insideAngular)),this.idToken=this.user.pipe(mr(Ft=>Ft?(0,ln.D)(Ft.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(mr(Ft=>Ft?(0,ln.D)(Ft.getIdTokenResult()):ct(null))),this.credential=(0,mP.T)(Ut,fe,this.authState.pipe(uo(Ft=>!Ft))).pipe((0,vt.U)(Ft=>Ft?.user?Ft:null),(0,KS.R)(d.outsideAngular),(0,ND.Q)(d.insideAngular))}return(0,Yr.pX)(this,Ne,u,{spy:{apply:(Ue,Ut,Bt)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&Bt.then(kt=>fe.next(kt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Yr.Dh),f.LFG(Yr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Lr.HU),f.LFG(CR,8),f.LFG(bR,8),f.LFG(TR,8),f.LFG(SR,8),f.LFG(AR,8),f.LFG(xR,8),f.LFG(pA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),p1=(()=>{class n{constructor(){DR.Z.registerVersion("angularfire",Lr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[mA]}),n})();function RR(n,e){return function g1(n,e=xv.z){return new Nr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function yA(n,e){return RR(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function BD(n,e){return yA(n,e).pipe(Bn(void 0),Ns(),(0,vt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(A=>A.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function NR(n,e,t){return BD(n,t).pipe(mg((r,o)=>function y1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function v1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Jf(n,e=Fd.y){return n=n??li,(0,ui.e)((t,r)=>{let o,u=!0;t.subscribe((0,wr.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,vt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function vA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function OR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class PR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=BD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Bn(void 0),Ns(),uo(([r,o])=>o.length>0||!r),(0,vt.U)(([r,o])=>o),Lr.iC)}auditTrail(e){return this.stateChanges(e).pipe(mg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=OR(e);return NR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lr.iC)}valueChanges(e={}){return yA(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Lr.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Lr.iC)}add(e){return this.ref.add(e)}doc(e){return new kR(this.ref.doc(e),this.afs)}}class kR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=VR(r,t);return new PR(o,u,this.afs)}snapshotChanges(){return function m1(n,e){return RR(n,e).pipe(Bn(void 0),Ns(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Lr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(Lr.iC)}}class _1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?BD(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),uo(t=>t.length>0),Lr.iC):BD(this.query,this.afs.schedulers.outsideAngular).pipe(Lr.iC)}auditTrail(e){return this.stateChanges(e).pipe(mg((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=OR(e);return NR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lr.iC)}valueChanges(e={}){return yA(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Lr.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Lr.iC)}}const FR=new f.OlP("angularfire2.enableFirestorePersistence"),LR=new f.OlP("angularfire2.firestore.persistenceSettings"),w1=new f.OlP("angularfire2.firestore.settings"),E1=new f.OlP("angularfire2.firestore.use-emulator");function VR(n,e=(t=>t)){return{query:e(n),ref:n}}let _A=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,R,H,X,fe,Ne,Ue,Ut,Bt){this.schedulers=w;const kt=(0,Yr.on)(t,m,r),Ft=A;R&&MR(kt,m,H,fe,Ne,Ue,X,Ut),[this.firestore,this.persistenceEnabled$]=(0,Yr.cc)(`${kt.name}.firestore`,"AngularFirestore",kt.name,()=>{const Nt=m.runOutsideAngular(()=>kt.firestore());if(u&&Nt.settings(u),Ft&&Nt.useEmulator(...Ft),o&&!pr(d)){const Gt=()=>{try{return(0,ln.D)(Nt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ei){return typeof console<"u"&&console.warn(ei),ct(!1)}};return[Nt,m.runOutsideAngular(Gt)]}return[Nt,ct(!1)]},[u,Ft,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=VR(o,r),m=this.schedulers.ngZone.run(()=>u);return new PR(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new _1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new kR(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Yr.Dh),f.LFG(Yr.xv,8),f.LFG(FR,8),f.LFG(w1,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Lr.HU),f.LFG(LR,8),f.LFG(E1,8),f.LFG(mA,8),f.LFG(CR,8),f.LFG(bR,8),f.LFG(TR,8),f.LFG(SR,8),f.LFG(AR,8),f.LFG(xR,8),f.LFG(pA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I1=(()=>{class n{constructor(){DR.Z.registerVersion("angularfire",Lr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:FR,useValue:!0},{provide:LR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[_A]}),n})(),U0=(()=>{class n{constructor(t){this.angularFirestore=t}getPosts(){return this.angularFirestore.collection("posts").snapshotChanges()}getPostById(t){return this.angularFirestore.collection("posts").doc(t).valueChanges()}createPost(t){return new Promise((r,o)=>{this.angularFirestore.collection("posts").add(t).then(u=>{console.log(u)},u=>{o(u)})})}updatePost(t,r){return this.angularFirestore.collection("posts").doc(r).update({title:t.title,content:t.content,author:t.author})}deletePost(t){return this.angularFirestore.collection("posts").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_A))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dy=(()=>{class n{constructor(t){this.angularFirestore=t}getProducts(){return this.angularFirestore.collection("products").snapshotChanges()}getProductsCircus(){return this.angularFirestore.collection("productsCircus").snapshotChanges()}getTotal(t){let r=0;return t.map(o=>{r+=o.unitCost}),r}getProductById(t){return this.angularFirestore.collection("products").doc(t).valueChanges()}getProductCircusById(t){return this.angularFirestore.collection("productsCircus").doc(t).valueChanges()}createProduct(t){return new Promise((r,o)=>{this.angularFirestore.collection("products").add(t).then(u=>{console.log(u)},u=>{o(u)})})}createProductCircus(t){return new Promise((r,o)=>{this.angularFirestore.collection("productsCircus").add(t).then(u=>{console.log(u)},u=>{o(u)})})}updateProduct(t,r){return this.angularFirestore.collection("products").doc(r).update({name:t.name,amount:t.amount,salePrice:t.salePrice,unitCost:t.unitCost})}updateProductCircus(t,r){return this.angularFirestore.collection("productsCircus").doc(r).update({name:t.name,amount:t.amount,salePrice:t.salePrice,unitCost:t.unitCost})}deleteProduct(t){return this.angularFirestore.collection("products").doc(t.id).delete()}deleteProductCircus(t){return this.angularFirestore.collection("productsCircus").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_A))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D1=(()=>{class n{constructor(t,r,o,u){this.postService=t,this.productService=r,this.formBuilder=o,this.router=u,this.productForm=this.formBuilder.group({name:[""],amount:[""],salePrice:[""],unitCost:[""]})}ngOnInit(){}onSubmit(){this.productService.createProduct(this.productForm.value),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(U0),f.Y36(dy),f.Y36($u),f.Y36(Mn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create"]],decls:19,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","name","type","text","required","",1,"form-control"],["formControlName","amount","type","number","required","",1,"form-control"],["formControlName","unitCost","type","number","required","",1,"form-control"],["formControlName","salePrice","type","number","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(1,"div",1)(2,"label",2),f._uU(3,"Nombre"),f.qZA(),f._UZ(4,"input",3),f.qZA(),f.TgZ(5,"div",1)(6,"label",2),f._uU(7,"Cantidad"),f.qZA(),f._UZ(8,"input",4),f.qZA(),f.TgZ(9,"div",1)(10,"label",2),f._uU(11,"Costo unitario"),f.qZA(),f._UZ(12,"input",5),f.qZA(),f.TgZ(13,"div",1)(14,"label",2),f._uU(15,"Precio de venta"),f.qZA(),f._UZ(16,"input",6),f.qZA(),f.TgZ(17,"button",7),f._uU(18,"Guardar"),f.qZA()()),2&t&&(f.Q6J("formGroup",r.productForm),f.xp6(17),f.Q6J("disabled",!r.postForm.valid))},dependencies:[Ca,Fo,ba,Zc,Kc,h,jo,Fr]}),n})(),C1=(()=>{class n{constructor(t,r,o,u){this.productService=t,this.formBuilder=r,this.router=o,this.activeRoute=u,this.editForm=this.formBuilder.group({name:[""],amount:[],salePrice:[],unitCost:[]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.productService.getProductCircusById(t).subscribe(r=>{this.postRef=r,this.editForm=this.formBuilder.group({name:[this.postRef.name],amount:[this.postRef.amount],salePrice:[this.postRef.salePrice],unitCost:[this.postRef.unitCost]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.productService.updateProductCircus(this.editForm.value,t),this.router.navigate(["circus"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dy),f.Y36($u),f.Y36(Mn),f.Y36(Ku))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-edit-circus"]],decls:19,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","name","type","text","required","",1,"form-control"],["formControlName","amount","type","number","required","",1,"form-control"],["formControlName","unitCost","type","number","required","",1,"form-control"],["formControlName","salePrice","type","number","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(1,"div",1)(2,"label",2),f._uU(3,"Nombre"),f.qZA(),f._UZ(4,"input",3),f.qZA(),f.TgZ(5,"div",1)(6,"label",2),f._uU(7,"Cantidad"),f.qZA(),f._UZ(8,"input",4),f.qZA(),f.TgZ(9,"div",1)(10,"label",2),f._uU(11,"Costo unitario"),f.qZA(),f._UZ(12,"input",5),f.qZA(),f.TgZ(13,"div",1)(14,"label",2),f._uU(15,"Precio de venta"),f.qZA(),f._UZ(16,"input",6),f.qZA(),f.TgZ(17,"button",7),f._uU(18,"Guardar"),f.qZA()()),2&t&&(f.Q6J("formGroup",r.editForm),f.xp6(17),f.Q6J("disabled",!r.editForm.valid))},dependencies:[Ca,Fo,ba,Zc,Kc,h,jo,Fr]}),n})(),b1=(()=>{class n{constructor(t,r,o,u,d){this.postService=t,this.productService=r,this.formBuilder=o,this.router=u,this.activeRoute=d,this.editForm=this.formBuilder.group({name:[""],amount:[],salePrice:[],unitCost:[]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.productService.getProductById(t).subscribe(r=>{this.postRef=r,this.editForm=this.formBuilder.group({name:[this.postRef.name],amount:[this.postRef.amount],salePrice:[this.postRef.salePrice],unitCost:[this.postRef.unitCost]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.productService.updateProduct(this.editForm.value,t),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(U0),f.Y36(dy),f.Y36($u),f.Y36(Mn),f.Y36(Ku))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-edit"]],decls:19,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","name","type","text","required","",1,"form-control"],["formControlName","amount","type","number","required","",1,"form-control"],["formControlName","unitCost","type","number","required","",1,"form-control"],["formControlName","salePrice","type","number","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(1,"div",1)(2,"label",2),f._uU(3,"Nombre"),f.qZA(),f._UZ(4,"input",3),f.qZA(),f.TgZ(5,"div",1)(6,"label",2),f._uU(7,"Cantidad"),f.qZA(),f._UZ(8,"input",4),f.qZA(),f.TgZ(9,"div",1)(10,"label",2),f._uU(11,"Costo unitario"),f.qZA(),f._UZ(12,"input",5),f.qZA(),f.TgZ(13,"div",1)(14,"label",2),f._uU(15,"Precio de venta"),f.qZA(),f._UZ(16,"input",6),f.qZA(),f.TgZ(17,"button",7),f._uU(18,"Guardar"),f.qZA()()),2&t&&(f.Q6J("formGroup",r.editForm),f.xp6(17),f.Q6J("disabled",!r.editForm.valid))},dependencies:[Ca,Fo,ba,Zc,Kc,h,jo,Fr]}),n})();function T1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr")(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td")(10,"button",11),f._UZ(11,"i",12),f.qZA(),f.TgZ(12,"button",13),f.NdJ("click",function(){const u=f.CHM(t).$implicit,d=f.oxw();return f.KtG(d.deleteRow(u))}),f._UZ(13,"i",14),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.name),f.xp6(2),f.Oqu(t.amount),f.xp6(2),f.Oqu(t.unitCost),f.xp6(2),f.Oqu(t.salePrice),f.xp6(2),f.MGl("routerLink","/editCircus/",t.id,"")}}let S1=(()=>{class n{constructor(t,r){this.postService=t,this.productService=r,this.deleteRow=o=>this.productService.deleteProductCircus(o)}ngOnInit(){this.productService.getProductsCircus().subscribe(t=>{this.products=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}getTotal(){return this.productService.getTotal(this.products)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(U0),f.Y36(dy))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-show-circus"]],decls:29,vars:2,consts:[[1,"contaier"],[1,"row","align-items-md-stretch"],[1,"col-md-12"],[1,"h-100","p-4","text-white","bg-dark","rounded-3","text-center"],[1,"d-grip","gap-2","mt-4"],["routerLink","/createCircus","type","button",1,"btn","btn-primary"],["routerLink","/","type","button",1,"btn","btn-warning","jardinButton"],[1,"table","table-hover","table-striped"],[1,"bg-gradient","text-white"],[4,"ngFor","ngForOf"],[1,"mt-4"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),f._uU(5,"Inventario do\xf1a popetas - Circus Pop"),f.qZA()()()(),f.TgZ(6,"div",4)(7,"a",5),f._uU(8,"Crear"),f.qZA(),f.TgZ(9,"a",6),f._uU(10,"Jardin"),f.qZA()(),f.TgZ(11,"table",7)(12,"thead",8)(13,"tr")(14,"th"),f._uU(15,"Nombre"),f.qZA(),f.TgZ(16,"th"),f._uU(17,"Cantidad"),f.qZA(),f.TgZ(18,"th"),f._uU(19,"Costo unitario"),f.qZA(),f.TgZ(20,"th"),f._uU(21,"Precio de venta"),f.qZA(),f.TgZ(22,"th"),f._uU(23,"Acciones"),f.qZA()()(),f.TgZ(24,"tbody"),f.YNc(25,T1,14,5,"tr",9),f.qZA()(),f.TgZ(26,"div",10)(27,"label"),f._uU(28),f.qZA()()()),2&t&&(f.xp6(25),f.Q6J("ngForOf",r.products),f.xp6(3),f.hij("Total = ",r.getTotal(),""))},dependencies:[ws,jg,qd],styles:[".bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#606c77,#3f4c6b)!important}.jardinButton[_ngcontent-%COMP%]{margin-left:25px}"]}),n})();function A1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr")(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td")(10,"button",11),f._UZ(11,"i",12),f.qZA(),f.TgZ(12,"button",13),f.NdJ("click",function(){const u=f.CHM(t).$implicit,d=f.oxw();return f.KtG(d.deleteRow(u))}),f._UZ(13,"i",14),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.name),f.xp6(2),f.Oqu(t.amount),f.xp6(2),f.Oqu(t.unitCost),f.xp6(2),f.Oqu(t.salePrice),f.xp6(2),f.MGl("routerLink","/edit/",t.id,"")}}const x1=[{path:"",component:(()=>{class n{constructor(t,r){this.postService=t,this.productService=r,this.deleteRow=o=>this.productService.deleteProduct(o)}ngOnInit(){this.productService.getProducts().subscribe(t=>{this.products=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()}))})}getTotal(){return this.productService.getTotal(this.products)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(U0),f.Y36(dy))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-show"]],decls:29,vars:2,consts:[[1,"contaier"],[1,"row","align-items-md-stretch"],[1,"col-md-12"],[1,"h-100","p-4","text-white","bg-dark","rounded-3","text-center"],[1,"d-grip","gap-2","mt-4"],["routerLink","/create","type","button",1,"btn","btn-primary"],["routerLink","/circus","type","button",1,"btn","btn-warning","circusButton"],[1,"table","table-hover","table-striped"],[1,"bg-gradient","text-white"],[4,"ngFor","ngForOf"],[1,"mt-4"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-edit"],[1,"btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),f._uU(5,"Inventario do\xf1a popetas - Jardin Plaza"),f.qZA()()()(),f.TgZ(6,"div",4)(7,"a",5),f._uU(8,"Crear"),f.qZA(),f.TgZ(9,"a",6),f._uU(10,"Circus"),f.qZA()(),f.TgZ(11,"table",7)(12,"thead",8)(13,"tr")(14,"th"),f._uU(15,"Nombre"),f.qZA(),f.TgZ(16,"th"),f._uU(17,"Cantidad"),f.qZA(),f.TgZ(18,"th"),f._uU(19,"Costo unitario"),f.qZA(),f.TgZ(20,"th"),f._uU(21,"Precio de venta"),f.qZA(),f.TgZ(22,"th"),f._uU(23,"Acciones"),f.qZA()()(),f.TgZ(24,"tbody"),f.YNc(25,A1,14,5,"tr",9),f.qZA()(),f.TgZ(26,"div",10)(27,"label"),f._uU(28),f.qZA()()()),2&t&&(f.xp6(25),f.Q6J("ngForOf",r.products),f.xp6(3),f.hij("Total = ",r.getTotal(),""))},dependencies:[ws,jg,qd],styles:[".bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#606c77,#3f4c6b)!important}.circusButton[_ngcontent-%COMP%]{margin-left:25px}"]}),n})()},{path:"circus",component:S1},{path:"create",component:D1},{path:"createCircus",component:(()=>{class n{constructor(t,r,o,u){this.postService=t,this.productService=r,this.formBuilder=o,this.router=u,this.productForm=this.formBuilder.group({name:[""],amount:[""],salePrice:[""],unitCost:[""]})}ngOnInit(){}onSubmit(){this.productService.createProductCircus(this.productForm.value),this.router.navigate(["circus"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(U0),f.Y36(dy),f.Y36($u),f.Y36(Mn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create-circus"]],decls:19,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","name","type","text","required","",1,"form-control"],["formControlName","amount","type","number","required","",1,"form-control"],["formControlName","unitCost","type","number","required","",1,"form-control"],["formControlName","salePrice","type","number","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(1,"div",1)(2,"label",2),f._uU(3,"Nombre"),f.qZA(),f._UZ(4,"input",3),f.qZA(),f.TgZ(5,"div",1)(6,"label",2),f._uU(7,"Cantidad"),f.qZA(),f._UZ(8,"input",4),f.qZA(),f.TgZ(9,"div",1)(10,"label",2),f._uU(11,"Costo unitario"),f.qZA(),f._UZ(12,"input",5),f.qZA(),f.TgZ(13,"div",1)(14,"label",2),f._uU(15,"Precio de venta"),f.qZA(),f._UZ(16,"input",6),f.qZA(),f.TgZ(17,"button",7),f._uU(18,"Guardar"),f.qZA()()),2&t&&(f.Q6J("formGroup",r.productForm),f.xp6(17),f.Q6J("disabled",!r.postForm.valid))},dependencies:[Ca,Fo,ba,Zc,Kc,h,jo,Fr]}),n})()},{path:"edit/:id",component:b1},{path:"editCircus/:id",component:C1}];let M1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[dE.forRoot(x1),dE]}),n})(),R1=(()=>{class n{constructor(){this.title="app-crud-angular-firebase"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"router-outlet"),f.qZA())},dependencies:[zf]}),n})();const UR_firebaseConfig={apiKey:"AIzaSyB6HfPw3rknJwM8-oeGhfKJN6E_FMXyRqk",authDomain:"crud-angular-firebase-5c874.firebaseapp.com",projectId:"crud-angular-firebase-5c874",storageBucket:"crud-angular-firebase-5c874.appspot.com",messagingSenderId:"222000061642",appId:"1:222000061642:web:210eee559cca87235a2833"};let N1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[R1]}),n.\u0275inj=f.cJS({imports:[jc,Mf,hg,M1,Yr.hO.initializeApp(UR_firebaseConfig),p1,I1]}),n})();(0,f.G48)(),Eu().bootstrapModule(N1).catch(n=>console.error(n))},9751:(lt,Ce,k)=>{k.d(Ce,{y:()=>ce});var f=k(2961),J=k(727),O=k(8822),ie=k(9635),re=k(2416),ue=k(576),ae=k(2806);let ce=(()=>{class W{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const we=new W;return we.source=this,we.operator=xe,we}subscribe(xe,we,tt){const ge=function B(W){return W&&W instanceof f.Lv||function U(W){return W&&(0,ue.m)(W.next)&&(0,ue.m)(W.error)&&(0,ue.m)(W.complete)}(W)&&(0,J.Nn)(W)}(xe)?xe:new f.Hp(xe,we,tt);return(0,ae.x)(()=>{const{operator:de,source:Qe}=this;ge.add(de?de.call(ge,Qe):Qe?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(xe){try{return this._subscribe(xe)}catch(we){xe.error(we)}}forEach(xe,we){return new(we=le(we))((tt,ge)=>{const de=new f.Hp({next:Qe=>{try{xe(Qe)}catch(ot){ge(ot),de.unsubscribe()}},error:ge,complete:tt});this.subscribe(de)})}_subscribe(xe){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(xe)}[O.L](){return this}pipe(...xe){return(0,ie.U)(xe)(this)}toPromise(xe){return new(xe=le(xe))((we,tt)=>{let ge;this.subscribe(de=>ge=de,de=>tt(de),()=>we(ge))})}}return W.create=ke=>new W(ke),W})();function le(W){var ke;return null!==(ke=W??re.v.Promise)&&void 0!==ke?ke:Promise}},7579:(lt,Ce,k)=>{k.d(Ce,{x:()=>ae});var f=k(9751),J=k(727);const ie=(0,k(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),ue=k(2806);let ae=(()=>{class le extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const W=new ce(this,this);return W.operator=B,W}_throwIfClosed(){if(this.closed)throw new ie}next(B){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(B)}})}error(B){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:W}=this;for(;W.length;)W.shift().error(B)}})}complete(){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:W,isStopped:ke,observers:xe}=this;return W||ke?J.Lc:(this.currentObservers=null,xe.push(B),new J.w0(()=>{this.currentObservers=null,(0,re.P)(xe,B)}))}_checkFinalizedStatuses(B){const{hasError:W,thrownError:ke,isStopped:xe}=this;W?B.error(ke):xe&&B.complete()}asObservable(){const B=new f.y;return B.source=this,B}}return le.create=(U,B)=>new ce(U,B),le})();class ce extends ae{constructor(U,B){super(),this.destination=U,this.source=B}next(U){var B,W;null===(W=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===W||W.call(B,U)}error(U){var B,W;null===(W=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===W||W.call(B,U)}complete(){var U,B;null===(B=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===B||B.call(U)}_subscribe(U){var B,W;return null!==(W=null===(B=this.source)||void 0===B?void 0:B.subscribe(U))&&void 0!==W?W:J.Lc}}},2961:(lt,Ce,k)=>{k.d(Ce,{Hp:()=>tt,Lv:()=>W});var f=k(576),J=k(727),O=k(2416),ie=k(7849);function re(){}const ue=le("C",void 0,void 0);function le(Se,ve,Ee){return{kind:Se,value:ve,error:Ee}}var U=k(3410),B=k(2806);class W extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=ot}static create(ve,Ee,Ve){return new tt(ve,Ee,Ve)}next(ve){this.isStopped?Qe(function ce(Se){return le("N",Se,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Qe(function ae(Se){return le("E",void 0,Se)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Qe(ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function xe(Se,ve){return ke.call(Se,ve)}class we{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(ve)}catch(Ve){ge(Ve)}}error(ve){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(ve)}catch(Ve){ge(Ve)}else ge(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ee){ge(Ee)}}}class tt extends W{constructor(ve,Ee,Ve){let Be;if(super(),(0,f.m)(ve)||!ve)Be={next:ve??void 0,error:Ee??void 0,complete:Ve??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),Be={next:ve.next&&xe(ve.next,V),error:ve.error&&xe(ve.error,V),complete:ve.complete&&xe(ve.complete,V)}):Be=ve}this.destination=new we(Be)}}function ge(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Se):(0,ie.h)(Se)}function Qe(Se,ve){const{onStoppedNotification:Ee}=O.v;Ee&&U.z.setTimeout(()=>Ee(Se,ve))}const ot={closed:!0,next:re,error:function de(Se){throw Se},complete:re}},727:(lt,Ce,k)=>{k.d(Ce,{Lc:()=>ue,w0:()=>re,Nn:()=>ae});var f=k(576);const O=(0,k(3888).d)(le=>function(B){le(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((W,ke)=>`${ke+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ie=k(8737);class re{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const xe of B)xe.remove(this);else B.remove(this);const{initialTeardown:W}=this;if((0,f.m)(W))try{W()}catch(xe){U=xe instanceof O?xe.errors:[xe]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const xe of ke)try{ce(xe)}catch(we){U=U??[],we instanceof O?U=[...U,...we.errors]:U.push(we)}}if(U)throw new O(U)}}add(U){var B;if(U&&U!==this)if(this.closed)ce(U);else{if(U instanceof re){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(U)}}_hasParent(U){const{_parentage:B}=this;return B===U||Array.isArray(B)&&B.includes(U)}_addParent(U){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(U),B):B?[B,U]:U}_removeParent(U){const{_parentage:B}=this;B===U?this._parentage=null:Array.isArray(B)&&(0,ie.P)(B,U)}remove(U){const{_finalizers:B}=this;B&&(0,ie.P)(B,U),U instanceof re&&U._removeParent(this)}}re.EMPTY=(()=>{const le=new re;return le.closed=!0,le})();const ue=re.EMPTY;function ae(le){return le instanceof re||le&&"closed"in le&&(0,f.m)(le.remove)&&(0,f.m)(le.add)&&(0,f.m)(le.unsubscribe)}function ce(le){(0,f.m)(le)?le():le.unsubscribe()}},2416:(lt,Ce,k)=>{k.d(Ce,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Ce,k)=>{k.d(Ce,{E:()=>J});const J=new(k(9751).y)(re=>re.complete())},8996:(lt,Ce,k)=>{k.d(Ce,{D:()=>ve});var f=k(8421),J=k(5363),O=k(9468),ue=k(9751),ce=k(2202),le=k(576),U=k(9672);function W(Ee,Ve){if(!Ee)throw new Error("Iterable cannot be null");return new ue.y(Be=>{(0,U.f)(Be,Ve,()=>{const V=Ee[Symbol.asyncIterator]();(0,U.f)(Be,Ve,()=>{V.next().then(pe=>{pe.done?Be.complete():Be.next(pe.value)})},0,!0)})})}var ke=k(3670),xe=k(8239),we=k(1144),tt=k(6495),ge=k(2206),de=k(4532),Qe=k(3260);function ve(Ee,Ve){return Ve?function Se(Ee,Ve){if(null!=Ee){if((0,ke.c)(Ee))return function ie(Ee,Ve){return(0,f.Xf)(Ee).pipe((0,O.R)(Ve),(0,J.Q)(Ve))}(Ee,Ve);if((0,we.z)(Ee))return function ae(Ee,Ve){return new ue.y(Be=>{let V=0;return Ve.schedule(function(){V===Ee.length?Be.complete():(Be.next(Ee[V++]),Be.closed||this.schedule())})})}(Ee,Ve);if((0,xe.t)(Ee))return function re(Ee,Ve){return(0,f.Xf)(Ee).pipe((0,O.R)(Ve),(0,J.Q)(Ve))}(Ee,Ve);if((0,ge.D)(Ee))return W(Ee,Ve);if((0,tt.T)(Ee))return function B(Ee,Ve){return new ue.y(Be=>{let V;return(0,U.f)(Be,Ve,()=>{V=Ee[ce.h](),(0,U.f)(Be,Ve,()=>{let pe,q;try{({value:pe,done:q}=V.next())}catch(Q){return void Be.error(Q)}q?Be.complete():Be.next(pe)},0,!0)}),()=>(0,le.m)(V?.return)&&V.return()})}(Ee,Ve);if((0,Qe.L)(Ee))return function ot(Ee,Ve){return W((0,Qe.Q)(Ee),Ve)}(Ee,Ve)}throw(0,de.z)(Ee)}(Ee,Ve):(0,f.Xf)(Ee)}},8421:(lt,Ce,k)=>{k.d(Ce,{Xf:()=>ke});var f=k(655),J=k(1144),O=k(8239),ie=k(9751),re=k(3670),ue=k(2206),ae=k(4532),ce=k(6495),le=k(3260),U=k(576),B=k(7849),W=k(8822);function ke(Se){if(Se instanceof ie.y)return Se;if(null!=Se){if((0,re.c)(Se))return function xe(Se){return new ie.y(ve=>{const Ee=Se[W.L]();if((0,U.m)(Ee.subscribe))return Ee.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,J.z)(Se))return function we(Se){return new ie.y(ve=>{for(let Ee=0;Ee<Se.length&&!ve.closed;Ee++)ve.next(Se[Ee]);ve.complete()})}(Se);if((0,O.t)(Se))return function tt(Se){return new ie.y(ve=>{Se.then(Ee=>{ve.closed||(ve.next(Ee),ve.complete())},Ee=>ve.error(Ee)).then(null,B.h)})}(Se);if((0,ue.D)(Se))return de(Se);if((0,ce.T)(Se))return function ge(Se){return new ie.y(ve=>{for(const Ee of Se)if(ve.next(Ee),ve.closed)return;ve.complete()})}(Se);if((0,le.L)(Se))return function Qe(Se){return de((0,le.Q)(Se))}(Se)}throw(0,ae.z)(Se)}function de(Se){return new ie.y(ve=>{(function ot(Se,ve){var Ee,Ve,Be,V;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,f.KL)(Se);!(Ve=yield Ee.next()).done;)if(ve.next(Ve.value),ve.closed)return}catch(pe){Be={error:pe}}finally{try{Ve&&!Ve.done&&(V=Ee.return)&&(yield V.call(Ee))}finally{if(Be)throw Be.error}}ve.complete()})})(Se,ve).catch(Ee=>ve.error(Ee))})}},6451:(lt,Ce,k)=>{k.d(Ce,{T:()=>ue});var f=k(8189),J=k(8421),O=k(515),ie=k(7669),re=k(8996);function ue(...ae){const ce=(0,ie.yG)(ae),le=(0,ie._6)(ae,1/0),U=ae;return U.length?1===U.length?(0,J.Xf)(U[0]):(0,f.J)(le)((0,re.D)(U,ce)):O.E}},5403:(lt,Ce,k)=>{k.d(Ce,{x:()=>J});var f=k(2961);function J(ie,re,ue,ae,ce){return new O(ie,re,ue,ae,ce)}class O extends f.Lv{constructor(re,ue,ae,ce,le,U){super(re),this.onFinalize=le,this.shouldUnsubscribe=U,this._next=ue?function(B){try{ue(B)}catch(W){re.error(W)}}:super._next,this._error=ce?function(B){try{ce(B)}catch(W){re.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(lt,Ce,k)=>{k.d(Ce,{U:()=>O});var f=k(4482),J=k(5403);function O(ie,re){return(0,f.e)((ue,ae)=>{let ce=0;ue.subscribe((0,J.x)(ae,le=>{ae.next(ie.call(re,le,ce++))}))})}},8189:(lt,Ce,k)=>{k.d(Ce,{J:()=>O});var f=k(5577),J=k(4671);function O(ie=1/0){return(0,f.z)(J.y,ie)}},5577:(lt,Ce,k)=>{k.d(Ce,{z:()=>ce});var f=k(4004),J=k(8421),O=k(4482),ie=k(9672),re=k(5403),ae=k(576);function ce(le,U,B=1/0){return(0,ae.m)(U)?ce((W,ke)=>(0,f.U)((xe,we)=>U(W,xe,ke,we))((0,J.Xf)(le(W,ke))),B):("number"==typeof U&&(B=U),(0,O.e)((W,ke)=>function ue(le,U,B,W,ke,xe,we,tt){const ge=[];let de=0,Qe=0,ot=!1;const Se=()=>{ot&&!ge.length&&!de&&U.complete()},ve=Ve=>de<W?Ee(Ve):ge.push(Ve),Ee=Ve=>{xe&&U.next(Ve),de++;let Be=!1;(0,J.Xf)(B(Ve,Qe++)).subscribe((0,re.x)(U,V=>{ke?.(V),xe?ve(V):U.next(V)},()=>{Be=!0},void 0,()=>{if(Be)try{for(de--;ge.length&&de<W;){const V=ge.shift();we?(0,ie.f)(U,we,()=>Ee(V)):Ee(V)}Se()}catch(V){U.error(V)}}))};return le.subscribe((0,re.x)(U,ve,()=>{ot=!0,Se()})),()=>{tt?.()}}(W,ke,le,B)))}},5363:(lt,Ce,k)=>{k.d(Ce,{Q:()=>ie});var f=k(9672),J=k(4482),O=k(5403);function ie(re,ue=0){return(0,J.e)((ae,ce)=>{ae.subscribe((0,O.x)(ce,le=>(0,f.f)(ce,re,()=>ce.next(le),ue),()=>(0,f.f)(ce,re,()=>ce.complete(),ue),le=>(0,f.f)(ce,re,()=>ce.error(le),ue)))})}},3099:(lt,Ce,k)=>{k.d(Ce,{B:()=>re});var f=k(8421),J=k(7579),O=k(2961),ie=k(4482);function re(ae={}){const{connector:ce=(()=>new J.x),resetOnError:le=!0,resetOnComplete:U=!0,resetOnRefCountZero:B=!0}=ae;return W=>{let ke,xe,we,tt=0,ge=!1,de=!1;const Qe=()=>{xe?.unsubscribe(),xe=void 0},ot=()=>{Qe(),ke=we=void 0,ge=de=!1},Se=()=>{const ve=ke;ot(),ve?.unsubscribe()};return(0,ie.e)((ve,Ee)=>{tt++,!de&&!ge&&Qe();const Ve=we=we??ce();Ee.add(()=>{tt--,0===tt&&!de&&!ge&&(xe=ue(Se,B))}),Ve.subscribe(Ee),!ke&&tt>0&&(ke=new O.Hp({next:Be=>Ve.next(Be),error:Be=>{de=!0,Qe(),xe=ue(ot,le,Be),Ve.error(Be)},complete:()=>{ge=!0,Qe(),xe=ue(ot,U),Ve.complete()}}),(0,f.Xf)(ve).subscribe(ke))})(W)}}function ue(ae,ce,...le){if(!0===ce)return void ae();if(!1===ce)return;const U=new O.Hp({next:()=>{U.unsubscribe(),ae()}});return ce(...le).subscribe(U)}},9468:(lt,Ce,k)=>{k.d(Ce,{R:()=>J});var f=k(4482);function J(O,ie=0){return(0,f.e)((re,ue)=>{ue.add(O.schedule(()=>re.subscribe(ue),ie))})}},8505:(lt,Ce,k)=>{k.d(Ce,{b:()=>re});var f=k(576),J=k(4482),O=k(5403),ie=k(4671);function re(ue,ae,ce){const le=(0,f.m)(ue)||ae||ce?{next:ue,error:ae,complete:ce}:ue;return le?(0,J.e)((U,B)=>{var W;null===(W=le.subscribe)||void 0===W||W.call(le);let ke=!0;U.subscribe((0,O.x)(B,xe=>{var we;null===(we=le.next)||void 0===we||we.call(le,xe),B.next(xe)},()=>{var xe;ke=!1,null===(xe=le.complete)||void 0===xe||xe.call(le),B.complete()},xe=>{var we;ke=!1,null===(we=le.error)||void 0===we||we.call(le,xe),B.error(xe)},()=>{var xe,we;ke&&(null===(xe=le.unsubscribe)||void 0===xe||xe.call(le)),null===(we=le.finalize)||void 0===we||we.call(le)}))}):ie.y}},4408:(lt,Ce,k)=>{k.d(Ce,{o:()=>re});var f=k(727);class J extends f.w0{constructor(ae,ce){super()}schedule(ae,ce=0){return this}}const O={setInterval(ue,ae,...ce){const{delegate:le}=O;return le?.setInterval?le.setInterval(ue,ae,...ce):setInterval(ue,ae,...ce)},clearInterval(ue){const{delegate:ae}=O;return(ae?.clearInterval||clearInterval)(ue)},delegate:void 0};var ie=k(8737);class re extends J{constructor(ae,ce){super(ae,ce),this.scheduler=ae,this.work=ce,this.pending=!1}schedule(ae,ce=0){var le;if(this.closed)return this;this.state=ae;const U=this.id,B=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(B,U,ce)),this.pending=!0,this.delay=ce,this.id=null!==(le=this.id)&&void 0!==le?le:this.requestAsyncId(B,this.id,ce),this}requestAsyncId(ae,ce,le=0){return O.setInterval(ae.flush.bind(ae,this),le)}recycleAsyncId(ae,ce,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return ce;null!=ce&&O.clearInterval(ce)}execute(ae,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ae,ce);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ce){let U,le=!1;try{this.work(ae)}catch(B){le=!0,U=B||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ae,scheduler:ce}=this,{actions:le}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(le,this),null!=ae&&(this.id=this.recycleAsyncId(ce,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Ce,k)=>{k.d(Ce,{v:()=>O});var f=k(6063);class J{constructor(re,ue=J.now){this.schedulerActionCtor=re,this.now=ue}schedule(re,ue=0,ae){return new this.schedulerActionCtor(this,re).schedule(ae,ue)}}J.now=f.l.now;class O extends J{constructor(re,ue=J.now){super(re,ue),this.actions=[],this._active=!1}flush(re){const{actions:ue}=this;if(this._active)return void ue.push(re);let ae;this._active=!0;do{if(ae=re.execute(re.state,re.delay))break}while(re=ue.shift());if(this._active=!1,ae){for(;re=ue.shift();)re.unsubscribe();throw ae}}}},4986:(lt,Ce,k)=>{k.d(Ce,{z:()=>O});var f=k(4408);const O=new(k(7565).v)(f.o)},6063:(lt,Ce,k)=>{k.d(Ce,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(lt,Ce,k)=>{k.d(Ce,{z:()=>f});const f={setTimeout(J,O,...ie){const{delegate:re}=f;return re?.setTimeout?re.setTimeout(J,O,...ie):setTimeout(J,O,...ie)},clearTimeout(J){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(lt,Ce,k)=>{k.d(Ce,{h:()=>J});const J=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Ce,k)=>{k.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Ce,k)=>{k.d(Ce,{_6:()=>ue,jO:()=>ie,yG:()=>re});var f=k(576);function O(ae){return ae[ae.length-1]}function ie(ae){return(0,f.m)(O(ae))?ae.pop():void 0}function re(ae){return function J(ae){return ae&&(0,f.m)(ae.schedule)}(O(ae))?ae.pop():void 0}function ue(ae,ce){return"number"==typeof O(ae)?ae.pop():ce}},8737:(lt,Ce,k)=>{function f(J,O){if(J){const ie=J.indexOf(O);0<=ie&&J.splice(ie,1)}}k.d(Ce,{P:()=>f})},3888:(lt,Ce,k)=>{function f(J){const ie=J(re=>{Error.call(re),re.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}k.d(Ce,{d:()=>f})},2806:(lt,Ce,k)=>{k.d(Ce,{O:()=>ie,x:()=>O});var f=k(2416);let J=null;function O(re){if(f.v.useDeprecatedSynchronousErrorHandling){const ue=!J;if(ue&&(J={errorThrown:!1,error:null}),re(),ue){const{errorThrown:ae,error:ce}=J;if(J=null,ae)throw ce}}else re()}function ie(re){f.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},9672:(lt,Ce,k)=>{function f(J,O,ie,re=0,ue=!1){const ae=O.schedule(function(){ie(),ue?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(ae),!ue)return ae}k.d(Ce,{f:()=>f})},4671:(lt,Ce,k)=>{function f(J){return J}k.d(Ce,{y:()=>f})},1144:(lt,Ce,k)=>{k.d(Ce,{z:()=>f});const f=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(lt,Ce,k)=>{k.d(Ce,{D:()=>J});var f=k(576);function J(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},576:(lt,Ce,k)=>{function f(J){return"function"==typeof J}k.d(Ce,{m:()=>f})},3670:(lt,Ce,k)=>{k.d(Ce,{c:()=>O});var f=k(8822),J=k(576);function O(ie){return(0,J.m)(ie[f.L])}},6495:(lt,Ce,k)=>{k.d(Ce,{T:()=>O});var f=k(2202),J=k(576);function O(ie){return(0,J.m)(ie?.[f.h])}},8239:(lt,Ce,k)=>{k.d(Ce,{t:()=>J});var f=k(576);function J(O){return(0,f.m)(O?.then)}},3260:(lt,Ce,k)=>{k.d(Ce,{L:()=>ie,Q:()=>O});var f=k(655),J=k(576);function O(re){return(0,f.FC)(this,arguments,function*(){const ae=re.getReader();try{for(;;){const{value:ce,done:le}=yield(0,f.qq)(ae.read());if(le)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ce)}}finally{ae.releaseLock()}})}function ie(re){return(0,J.m)(re?.getReader)}},4482:(lt,Ce,k)=>{k.d(Ce,{A:()=>J,e:()=>O});var f=k(576);function J(ie){return(0,f.m)(ie?.lift)}function O(ie){return re=>{if(J(re))return re.lift(function(ue){try{return ie(ue,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(lt,Ce,k)=>{k.d(Ce,{U:()=>O,z:()=>J});var f=k(4671);function J(...ie){return O(ie)}function O(ie){return 0===ie.length?f.y:1===ie.length?ie[0]:function(ue){return ie.reduce((ae,ce)=>ce(ae),ue)}}},7849:(lt,Ce,k)=>{k.d(Ce,{h:()=>O});var f=k(2416),J=k(3410);function O(ie){J.z.setTimeout(()=>{const{onUnhandledError:re}=f.v;if(!re)throw ie;re(ie)})}},4532:(lt,Ce,k)=>{function f(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>f})},655:(lt,Ce,k)=>{function ie(q,Q){var ne={};for(var ee in q)Object.prototype.hasOwnProperty.call(q,ee)&&Q.indexOf(ee)<0&&(ne[ee]=q[ee]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(ee=Object.getOwnPropertySymbols(q);Oe<ee.length;Oe++)Q.indexOf(ee[Oe])<0&&Object.prototype.propertyIsEnumerable.call(q,ee[Oe])&&(ne[ee[Oe]]=q[ee[Oe]])}return ne}function ce(q,Q,ne,ee){return new(ne||(ne=Promise))(function(Re,dt){function Yt(an){try{ze(ee.next(an))}catch(mn){dt(mn)}}function Lt(an){try{ze(ee.throw(an))}catch(mn){dt(mn)}}function ze(an){an.done?Re(an.value):function Oe(Re){return Re instanceof ne?Re:new ne(function(dt){dt(Re)})}(an.value).then(Yt,Lt)}ze((ee=ee.apply(q,Q||[])).next())})}function ge(q){return this instanceof ge?(this.v=q,this):new ge(q)}function de(q,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ee=ne.apply(q,Q||[]),Re=[];return Oe={},dt("next"),dt("throw"),dt("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function dt(Zt){ee[Zt]&&(Oe[Zt]=function(Qt){return new Promise(function(Ar,At){Re.push([Zt,Qt,Ar,At])>1||Yt(Zt,Qt)})})}function Yt(Zt,Qt){try{!function Lt(Zt){Zt.value instanceof ge?Promise.resolve(Zt.value.v).then(ze,an):mn(Re[0][2],Zt)}(ee[Zt](Qt))}catch(Ar){mn(Re[0][3],Ar)}}function ze(Zt){Yt("next",Zt)}function an(Zt){Yt("throw",Zt)}function mn(Zt,Qt){Zt(Qt),Re.shift(),Re.length&&Yt(Re[0][0],Re[0][1])}}function ot(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=q[Symbol.asyncIterator];return Q?Q.call(q):(q=function W(q){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&q[Q],ee=0;if(ne)return ne.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ee>=q.length&&(q=void 0),{value:q&&q[ee++],done:!q}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ne={},ee("next"),ee("throw"),ee("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ee(Re){ne[Re]=q[Re]&&function(dt){return new Promise(function(Yt,Lt){!function Oe(Re,dt,Yt,Lt){Promise.resolve(Lt).then(function(ze){Re({value:ze,done:Yt})},dt)}(Yt,Lt,(dt=q[Re](dt)).done,dt.value)})}}}k.d(Ce,{FC:()=>de,KL:()=>ot,_T:()=>ie,mG:()=>ce,qq:()=>ge})},4650:(lt,Ce,k)=>{k.d(Ce,{$8M:()=>Cu,$Z:()=>pC,AFp:()=>fc,AaK:()=>ce,CHM:()=>ou,CRH:()=>vI,CZH:()=>qa,CqO:()=>Ov,D6c:()=>nD,EJc:()=>Um,EpF:()=>yE,F4k:()=>Tl,FYo:()=>qy,FiY:()=>Ke,G48:()=>eT,GfV:()=>mw,Gpc:()=>B,JOm:()=>ts,KtG:()=>au,LFG:()=>Tn,LSH:()=>Vd,Lbi:()=>RI,Lck:()=>br,MGl:()=>ip,MMx:()=>x_,NdJ:()=>np,OlP:()=>pn,Oqu:()=>Zv,PXZ:()=>Yb,Q6J:()=>tp,QGY:()=>Nv,QP$:()=>Kt,Qsj:()=>gw,R0b:()=>ds,RDi:()=>y,Rgc:()=>ja,SBq:()=>Ff,Sil:()=>NI,Suo:()=>yI,TTD:()=>qi,TgZ:()=>Yg,X6Q:()=>Xb,XFs:()=>Ze,Xpm:()=>Ie,Xts:()=>yg,Y36:()=>Wf,YKP:()=>Ae,YNc:()=>ka,Yjl:()=>_e,Yz7:()=>Qt,Z0I:()=>$i,ZZ4:()=>p0,_Bn:()=>qe,_UZ:()=>Qg,_Vd:()=>Aa,_c5:()=>v0,_uU:()=>AE,aQg:()=>m0,c2e:()=>Hb,cJS:()=>At,cg1:()=>La,dDg:()=>Zb,dqk:()=>rn,eFA:()=>jI,ekj:()=>th,eoX:()=>kI,f3M:()=>D,g9A:()=>$l,h0i:()=>oe,hGG:()=>gc,hij:()=>Fa,iGM:()=>Ih,ifc:()=>ut,ip1:()=>J_,jDz:()=>M_,kL8:()=>pp,lG2:()=>z,lqb:()=>zu,lri:()=>s0,n5z:()=>Qi,oAB:()=>Ot,oxw:()=>em,q4F:()=>Lf,qLn:()=>Vf,qOj:()=>uE,qZA:()=>bl,rWj:()=>xh,sBO:()=>qI,sIi:()=>Kd,s_b:()=>mo,soG:()=>Hl,tb:()=>e0,tp0:()=>it,uIk:()=>me,vHH:()=>we,vpe:()=>hi,wAp:()=>We,xp6:()=>Cw,z2F:()=>Nh,zSh:()=>Dr,zs3:()=>Na});var f=k(7579),J=k(727),O=k(9751),ie=k(6451),re=k(3099);function ue(i){for(let s in i)if(i[s]===ue)return s;throw Error("Could not find renamed property on target object.")}function ae(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=ue({__forward_ref__:ue});function B(i){return i.__forward_ref__=B,i.toString=function(){return ce(this())},i}function W(i){return ke(i)?i():i}function ke(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===B}class we extends Error{constructor(s,a){super(function tt(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,s){throw new we(-201,!1)}function Lt(i,s){null==i&&function ze(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function At(i){return{providers:i.providers||[],imports:i.imports||[]}}function un(i){return gi(i,mi)||gi(i,ni)}function $i(i){return null!==un(i)}function gi(i,s){return i.hasOwnProperty(s)?i[s]:null}function js(i){return i&&(i.hasOwnProperty(ti)||i.hasOwnProperty(Zo))?i[ti]:null}const mi=ue({\u0275prov:ue}),ti=ue({\u0275inj:ue}),ni=ue({ngInjectableDef:ue}),Zo=ue({ngInjectorDef:ue});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let yr;function Gn(i){const s=yr;return yr=i,s}function ri(i,s,a){const c=un(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ze.Optional?null:void 0!==s?s:void ve(ce(i))}function An(i){return{toString:i}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),ut=(()=>{return(i=ut||(ut={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ut;var i})();const rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Hr={},bt=[],ms=ue({\u0275cmp:ue}),Jt=ue({\u0275dir:ue}),xi=ue({\u0275pipe:ue}),Xt=ue({\u0275mod:ue}),qn=ue({\u0275fac:ue}),Mr=ue({__NG_ELEMENT_ID__:ue});let Xe=0;function Ie(i){return An(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||bt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||ut.Emulated,id:"c"+Xe++,styles:i.styles||bt,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,v=i.features;return l.inputs=L(i.inputs,c),l.outputs=L(i.outputs),v&&v.forEach(E=>E(l)),l.directiveDefs=p?()=>("function"==typeof p?p():p).map(Et).filter(Tt):null,l.pipeDefs=p?()=>("function"==typeof p?p():p).map(ht).filter(Tt):null,l})}function Et(i){return K(i)||$e(i)}function Tt(i){return null!==i}function Ot(i){return An(()=>({type:i.type,bootstrap:i.bootstrap||bt,declarations:i.declarations||bt,imports:i.imports||bt,exports:i.exports||bt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return Hr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),a[l]=c,s&&(s[l]=p)}return a}const z=Ie;function _e(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function K(i){return i[ms]||null}function $e(i){return i[Jt]||null}function ht(i){return i[xi]||null}function Kt(i){const s=K(i)||$e(i)||ht(i);return null!==s&&s.standalone}function dn(i,s){const a=i[Xt]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function rr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Rr(i){return Array.isArray(i)&&!0===i[1]}function Ka(i){return 0!=(8&i.flags)}function Yo(i){return 2==(2&i.flags)}function Ic(i){return 1==(1&i.flags)}function vr(i){return null!==i.template}function Zh(i){return 0!=(256&i[2])}function Ri(i,s){return i.hasOwnProperty(qn)?i[qn]:null}class Gi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function qi(){return qs}function qs(i){return i.type.prototype.ngOnChanges&&(i.setInput=Qa),Qo}function Qo(){const i=Qh(this),s=i?.current;if(s){const a=i.previous;if(a===Hr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Qa(i,s,a,c){const l=Qh(i)||function Jo(i,s){return i[Tc]=s}(i,{previous:Hr,current:null}),p=l.current||(l.current={}),v=l.previous,E=this.declaredInputs[a],I=v[E];p[E]=new Gi(I&&I.currentValue,s,v===Hr),i[c]=s}qi.ngInherit=!0;const Tc="__ngSimpleChanges__";function Qh(i){return i[Tc]||null}function In(i){for(;Array.isArray(i);)i=i[0];return i}function si(i,s){return In(s[i])}function _r(i,s){return In(s[i.index])}function Io(i,s){return i.data[s]}function zt(i,s){const a=s[i];return rr(a)?a:a[0]}function zs(i){return 64==(64&i[2])}function vi(i,s){return null==s?null:i[s]}function nu(i){i[18]=0}function wn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const It={lFrame:Fc(null),bindingsEnabled:!0};function Zi(){return It.bindingsEnabled}function De(){return It.lFrame.lView}function jt(){return It.lFrame.tView}function ou(i){return It.lFrame.contextLView=i,i[8]}function au(i){return It.lFrame.contextLView=null,i}function Dn(){let i=uu();for(;null!==i&&64===i.type;)i=i.parent;return i}function uu(){return It.lFrame.currentTNode}function oi(i,s){const a=It.lFrame;a.currentTNode=i,a.isParent=s}function ea(){return It.lFrame.isParent}function Ws(){return It.lFrame.bindingIndex++}function Yp(i,s){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,cu(s)}function cu(i){It.lFrame.currentDirectiveIndex=i}function Oc(){return It.lFrame.currentQueryIndex}function sa(i){It.lFrame.currentQueryIndex=i}function Pc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function lu(i,s,a){if(a&Ze.SkipSelf){let l=s,p=i;for(;!(l=l.parent,null!==l||a&Ze.Host||(l=Pc(p),null===l||(p=p[15],10&l.type))););if(null===l)return!1;s=l,i=p}const c=It.lFrame=kc();return c.currentTNode=s,c.lView=i,!0}function du(i){const s=kc(),a=i[1];It.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function kc(){const i=It.lFrame,s=null===i?null:i.child;return null===s?Fc(i):s}function Fc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Lc(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ud=Lc;function Zs(){const i=Lc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Zn(){return It.lFrame.selectedIndex}function zr(i){It.lFrame.selectedIndex=i}function fn(){const i=It.lFrame;return Io(i.tView,i.selectedIndex)}function pu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ys(i,s,a){bo(i,s,3,a)}function Co(i,s,a,c){(3&i[2])===a&&bo(i,s,a,c)}function dd(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function bo(i,s,a,c){const p=c??-1,v=s.length-1;let E=0;for(let I=void 0!==c?65535&i[18]:0;I<v;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=c&&E>=c)break}else s[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(hd(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function hd(i,s,a,c){const l=a[c]<0,p=a[c+1],E=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class bs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function So(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const p=a[c++],v=a[c++],E=a[c++];i.setAttribute(s,v,E,p)}else{const p=l,v=a[++c];vu(p)?i.setProperty(s,p,v):i.setAttribute(s,p,v),c++}}return c}function Js(i){return 3===i||4===i||6===i}function vu(i){return 64===i.charCodeAt(0)}function oa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||pd(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function pd(i,s,a,c,l){let p=0,v=i.length;if(-1===s)v=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){v=-1;break}if(E>s){v=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==l&&(i[p+1]=l));if(c===i[p+1])return void(i[p+2]=l)}p++,null!==c&&p++,null!==l&&p++}-1!==v&&(i.splice(v,0,s),p=v+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==l&&i.splice(p++,0,l)}function gd(i){return-1!==i}function ir(i){return 32767&i}function ua(i,s){let a=function aa(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Oi=!0;function ca(i){const s=Oi;return Oi=i,s}let xn=0;const _i={};function Xs(i,s){const a=wu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,da(c.data,i),da(s,null),da(c.blueprint,null));const l=Eu(i,s),p=i.injectorIndex;if(gd(l)){const v=ir(l),E=ua(l,s),I=E[1].data;for(let T=0;T<8;T++)s[p+T]=E[v+T]|I[v+T]}return s[p+8]=l,p}function da(i,s){i.push(0,0,0,0,0,0,0,0,s)}function wu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Eu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=Mo(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Ts(i,s,a){!function _u(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Mr)&&(c=a[Mr]),null==c&&(c=a[Mr]=xn++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Ss(i,s,a){if(a&Ze.Optional||void 0!==i)return i;ve()}function jc(i,s,a,c){if(a&Ze.Optional&&void 0===c&&(c=null),0==(a&(Ze.Self|Ze.Host))){const l=i[9],p=Gn(void 0);try{return l?l.get(s,c,a&Ze.Optional):ri(s,c,a&Ze.Optional)}finally{Gn(p)}}return Ss(c,0,a)}function eo(i,s,a,c=Ze.Default,l){if(null!==i){if(1024&s[2]){const v=function xo(i,s,a,c,l){let p=i,v=s;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=ha(p,v,a,c|Ze.Self,_i);if(E!==_i)return E;let I=p.parent;if(!I){const T=v[21];if(T){const M=T.get(a,_i,c);if(M!==_i)return M}I=Mo(v),v=v[15]}p=I}return l}(i,s,a,c,_i);if(v!==_i)return v}const p=ha(i,s,a,c,_i);if(p!==_i)return p}return jc(s,a,c,l)}function ha(i,s,a,c,l){const p=function $c(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Mr)?i[Mr]:void 0;return"number"==typeof s?s>=0?255&s:Hc:s}(a);if("function"==typeof p){if(!lu(s,i,c))return c&Ze.Host?Ss(l,0,c):jc(s,a,c,l);try{const v=p(c);if(null!=v||c&Ze.Optional)return v;ve()}finally{ud()}}else if("number"==typeof p){let v=null,E=wu(i,s),I=-1,T=c&Ze.Host?s[16][6]:null;for((-1===E||c&Ze.SkipSelf)&&(I=-1===E?Eu(i,s):s[E+8],-1!==I&&fa(c,!1)?(v=s[1],E=ir(I),s=ua(I,s)):E=-1);-1!==E;){const M=s[1];if(Iu(p,E,M.data)){const P=vd(E,s,a,v,c,T);if(P!==_i)return P}I=s[E+8],-1!==I&&fa(c,s[1].data[E+8]===T)&&Iu(p,E,s)?(v=M,E=ir(I),s=ua(I,s)):E=-1}}return l}function vd(i,s,a,c,l,p){const v=s[1],E=v.data[i+8],M=Ao(E,v,a,null==c?Yo(E)&&Oi:c!=v&&0!=(3&E.type),l&Ze.Host&&p===E);return null!==M?Yi(s,v,M,E):_i}function Ao(i,s,a,c,l){const p=i.providerIndexes,v=s.data,E=1048575&p,I=i.directiveStart,M=p>>20,$=l?E+M:i.directiveEnd;for(let Y=c?E:E+M;Y<$;Y++){const ye=v[Y];if(Y<I&&a===ye||Y>=I&&ye.type===a)return Y}if(l){const Y=v[I];if(Y&&vr(Y)&&Y.type===a)return I}return null}function Yi(i,s,a,c){let l=i[a];const p=s.data;if(function Qs(i){return i instanceof bs}(l)){const v=l;v.resolving&&function Qe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function de(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(p[a]));const E=ca(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Gn(v.injectImpl):null;lu(i,c,Ze.Default);try{l=i[a]=v.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function ld(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:p}=s.type.prototype;if(c){const v=qs(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&Gn(I),ca(E),v.resolving=!1,ud()}}return l}function Iu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function fa(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class to{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return eo(this._tNode,this._lView,s,c,a)}}function Hc(){return new to(Dn(),De())}function Qi(i){return An(()=>{const s=i.prototype.constructor,a=s[qn]||Du(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const p=l[qn]||Du(l);if(p&&p!==a)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function Du(i){return ke(i)?()=>{const s=Du(W(i));return s&&s()}:Ri(i)}function Mo(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Cu(i){return function yd(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const p=a[l];if(Js(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(p===s)return a[l+1];l+=2}}}return null}(Dn(),i)}const As="__parameters__";function Oo(i,s,a){return An(()=>{const c=function bu(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...p){if(this instanceof l)return c.apply(this,p),this;const v=new l(...p);return E.annotation=v,E;function E(I,T,M){const P=I.hasOwnProperty(As)?I[As]:Object.defineProperty(I,As,{value:[]})[As];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(v),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Zr(c,s)):s!==i&&s.push(c)}return s}function wi(i,s){i.forEach(a=>Array.isArray(a)?wi(a,s):s(a))}function qc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Po(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Or(i,s,a){let c=Xi(i,s);return c>=0?i[1|c]=a:(c=~c,function vt(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function ma(i,s){const a=Xi(i,s);if(a>=0)return i[1|a]}function Xi(i,s){return function Pr(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const p=c+(l-c>>1),v=i[p<<a];if(s===v)return p<<a;v>s?l=p:c=p+1}return~(l<<a)}(i,s,1)}const gn={},ki="__NG_DI_FLAG__",xu="ngTempTokenPath",Mu=/\n/gm,wd="__source";let ro;function es(i){const s=ro;return ro=i,s}function Wc(i,s=Ze.Default){if(void 0===ro)throw new we(-203,!1);return null===ro?ri(i,void 0,s):ro.get(i,s&Ze.Optional?null:void 0,s)}function Tn(i,s=Ze.Default){return(function gs(){return yr}()||Wc)(W(i),s)}function D(i,s=Ze.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Tn(i,s)}function b(i){const s=[];for(let a=0;a<i.length;a++){const c=W(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let l,p=Ze.Default;for(let v=0;v<c.length;v++){const E=c[v],I=F(E);"number"==typeof I?-1===I?l=E.token:p|=I:l=E}s.push(Tn(l,p))}else s.push(Tn(c))}return s}function x(i,s){return i[ki]=s,i.prototype[ki]=s,i}function F(i){return i[ki]}const Ke=x(Oo("Optional"),8),it=x(Oo("SkipSelf"),4);var ts=(()=>((ts=ts||{})[ts.Important=1]="Important",ts[ts.DashCase=2]="DashCase",ts))();const Vo=new Map;let wy=0;const ns="__ngContext__";function ur(i,s){rr(s)?(i[ns]=s[20],function rg(i){Vo.set(i[20],i)}(s)):i[ns]=s}function xd(i,s){return undefined(i,s)}function Da(i){const s=i[3];return Rr(s)?s[3]:s}function Pu(i){return Fu(i[13])}function ku(i){return Fu(i[4])}function Fu(i){for(;null!==i&&!Rr(i);)i=i[4];return i}function oo(i,s,a,c,l){if(null!=c){let p,v=!1;Rr(c)?p=c:rr(c)&&(v=!0,c=c[0]);const E=In(c);0===i&&null!==a?null==l?Cf(s,a,E):Uo(s,a,E,l||null,!0):1===i&&null!==a?Uo(s,a,E,l||null,!0):2===i?function Tf(i,s,a){const c=Bo(i,s);c&&function xy(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,E,v):3===i&&s.destroyNode(E),null!=p&&function Sf(i,s,a,c,l){const p=a[7];p!==In(a)&&oo(s,i,c,p,l);for(let E=10;E<a.length;E++){const I=a[E];Bu(I[1],I,i,s,c,p)}}(s,i,p,a,l)}}function wf(i,s,a){return i.createElement(s,a)}function Ca(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,wn(l,-1)),a.splice(c,1)}function Ef(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&Ca(l,c),s>0&&(i[a-1][4]=c[4]);const p=Po(i,10+s);!function Q0(i,s){Bu(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function ba(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Bu(i,s,a,3,null,null),function Ay(i){let s=i[13];if(!s)return If(i[1],i);for(;s;){let a=null;if(rr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)rr(s)&&If(s[1],s),s=s[3];null===s&&(s=i),rr(s)&&If(s[1],s),a=s&&s[4]}s=a}}(s)}}function If(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Df(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof bs)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const E=l[p[v]],I=p[v+1];try{I.call(E)}finally{}}else try{p.call(l)}finally{}}}}(i,s),function J0(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],E="function"==typeof v?v(s):In(s[v]),I=c[l=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],I,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),p+=2}else{const v=c[l=a[p+1]];a[p].call(v)}if(null!==c){for(let p=l+1;p<c.length;p++)(0,c[p])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Rr(s[3])){a!==s[3]&&Ca(a,s);const c=s[19];null!==c&&c.detachView(i)}!function Sd(i){Vo.delete(i[20])}(s)}}function Rd(i,s,a){return function nl(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===ut.None||l===ut.Emulated)return null}return _r(c,a)}(i,s.parent,a)}function Uo(i,s,a,c,l){i.insertBefore(s,a,c,l)}function Cf(i,s,a){i.appendChild(s,a)}function Vu(i,s,a,c,l){null!==c?Uo(i,s,a,c,l):Cf(i,s,a)}function Bo(i,s){return i.parentNode(s)}let xf,Nd=function Uu(i,s,a){return 40&i.type?_r(i,a):null};function Pd(i,s,a,c){const l=Rd(i,c,s),p=s[11],E=function cg(i,s,a){return Nd(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)Vu(p,l,a[I],E,!1);else Vu(p,l,a,E,!1)}function Fr(i,s){if(null!==s){const a=s.type;if(3&a)return _r(s,i);if(4&a)return kd(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Fr(i,c);{const l=i[s.index];return Rr(l)?kd(-1,l):In(l)}}if(32&a)return xd(s,i)()||In(i[s.index]);{const c=bf(i,s);return null!==c?Array.isArray(c)?c[0]:Fr(Da(i[16]),c):Fr(i,s.next)}}return null}function bf(i,s){return null!==s?i[16][6].projection[s.projection]:null}function kd(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return Fr(c,l)}return s[7]}function il(i,s,a,c,l,p,v){for(;null!=a;){const E=c[a.index],I=a.type;if(v&&0===s&&(E&&ur(In(E),c),a.flags|=4),64!=(64&a.flags))if(8&I)il(i,s,a.child,c,l,p,!1),oo(s,i,l,E,p);else if(32&I){const T=xd(a,c);let M;for(;M=T();)oo(s,i,l,M,p);oo(s,i,l,E,p)}else 16&I?sl(i,s,c,a,l,p):oo(s,i,l,E,p);a=v?a.projectionNext:a.next}}function Bu(i,s,a,c,l,p){il(a,c,i.firstChild,s,l,p,!1)}function sl(i,s,a,c,l,p){const v=a[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)oo(s,i,l,I[T],p);else il(i,s,I,v[3],l,p,!0)}function Li(i,s,a){i.setAttribute(s,"style",a)}function Ta(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function y(i){xf=i}class he{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Er(i){return i instanceof he?i.changingThisBreaksApplicationSecurity:i}const ct=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Bn=(()=>((Bn=Bn||{})[Bn.NONE=0]="NONE",Bn[Bn.HTML=1]="HTML",Bn[Bn.STYLE=2]="STYLE",Bn[Bn.SCRIPT=3]="SCRIPT",Bn[Bn.URL=4]="URL",Bn[Bn.RESOURCE_URL=5]="RESOURCE_URL",Bn))();function Vd(i){const s=function ll(){const i=De();return i&&i[12]}();return s?s.sanitize(Bn.URL,i)||"":function ao(i,s){const a=function hg(i){return i instanceof he&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Er(i):function rs(i){return(i=String(i)).match(ct)?i:"unsafe:"+i}(ge(i))}const yg=new pn("ENVIRONMENT_INITIALIZER"),uw=new pn("INJECTOR",-1),cw=new pn("INJECTOR_DEF_TYPES");class vg{get(s,a=gn){if(a===gn){const c=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw c.name="NullInjectorError",c}return a}}function $t(...i){return{\u0275providers:Ud(0,i)}}function Ud(i,...s){const a=[],c=new Set;let l;return wi(s,p=>{const v=p;Gu(v,a,[],c)&&(l||(l=[]),l.push(v))}),void 0!==l&&lw(l,a),a}function lw(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];wi(l,p=>{s.push(p)})}}function Gu(i,s,a,c){if(!(i=W(i)))return!1;let l=null,p=js(i);const v=!p&&K(i);if(p||v){if(v&&!v.standalone)return!1;l=i}else{const I=i.ngModule;if(p=js(I),!p)return!1;l=I}const E=c.has(l);if(v){if(E)return!1;if(c.add(l),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of I)Gu(T,s,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let T;c.add(l);try{wi(p.imports,M=>{Gu(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&lw(T,s)}if(!E){const T=Ri(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:bt},{provide:cw,useValue:l,multi:!0},{provide:yg,useValue:()=>Tn(l),multi:!0})}const I=p.providers;null==I||E||wi(I,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const ZD=ue({provide:String,useValue:ue});function Rs(i){return null!==i&&"object"==typeof i&&ZD in i}function qu(i){return"function"==typeof i}const Dr=new pn("Set Injector scope."),co={},Ly={};let Vy;function _g(){return void 0===Vy&&(Vy=new vg),Vy}class zu{}class Uy extends zu{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$y(s,v=>this.processProvider(v)),this.records.set(uw,dl(void 0,this)),l.has("environment")&&this.records.set(zu,dl(void 0,this));const p=this.records.get(Dr);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(cw.multi,bt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=es(this),c=Gn(void 0);try{return s()}finally{es(a),Gn(c)}}get(s,a=gn,c=Ze.Default){this.assertNotDestroyed();const l=es(this),p=Gn(void 0);try{if(!(c&Ze.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function Ht(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&un(s);E=I&&this.injectableDefInScope(I)?dl(By(s),co):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&Ze.Self?_g():this.parent).get(s,a=c&Ze.Optional&&a===gn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[xu]=v[xu]||[]).unshift(ce(s)),l)throw v;return function Z(i,s,a,c){const l=i[xu];throw s[wd]&&l.unshift(s[wd]),i.message=function te(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=ce(s);if(Array.isArray(s))l=s.map(ce).join(" -> ");else if("object"==typeof s){let p=[];for(let v in s)if(s.hasOwnProperty(v)){let E=s[v];p.push(v+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}l=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Mu,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[xu]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{Gn(p),es(l)}}resolveInjectorInitializers(){const s=es(this),a=Gn(void 0);try{const c=this.get(yg.multi,bt,Ze.Self);for(const l of c)l()}finally{es(s),Gn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ce(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=qu(s=W(s))?s:W(s&&s.provide);const c=function KD(i){return Rs(i)?dl(void 0,i.useValue):dl(jy(i),co)}(s);if(qu(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=dl(void 0,co,!0),l.factory=()=>b(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===co&&(a.value=Ly,a.value=a.factory()),"object"==typeof a.value&&a.value&&function hl(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=W(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function By(i){const s=un(i),a=null!==s?s.factory:Ri(i);if(null!==a)return a;if(i instanceof pn)throw new we(204,!1);if(i instanceof Function)return function dw(i){const s=i.length;if(s>0)throw function Ei(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function xr(i){const s=i&&(i[mi]||i[ni]);if(s){const a=function $r(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function jy(i,s,a){let c;if(qu(i)){const l=W(i);return Ri(l)||By(l)}if(Rs(i))c=()=>W(i.useValue);else if(function Fy(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...b(i.deps||[]));else if(function ky(i){return!(!i||!i.useExisting)}(i))c=()=>Tn(W(i.useExisting));else{const l=W(i&&(i.useClass||i.provide));if(!function wg(i){return!!i.deps}(i))return Ri(l)||By(l);c=()=>new l(...b(i.deps))}return c}function dl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function kf(i){return!!i.\u0275providers}function $y(i,s){for(const a of i)Array.isArray(a)?$y(a,s):kf(a)?$y(a.\u0275providers,s):s(a)}class hw{}class Ig{resolveComponentFactory(s){throw function fw(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Aa=(()=>{class i{}return i.NULL=new Ig,i})();function pw(){return xa(Dn(),De())}function xa(i,s){return new Ff(_r(i,s))}let Ff=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=pw,i})();function Hy(i){return i instanceof Ff?i.nativeElement:i}class qy{}let gw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function YD(){const i=De(),a=zt(Dn().index,i);return(rr(a)?a:i)[11]}(),i})(),QD=(()=>{class i{}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:()=>null}),i})();class mw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Lf=new mw("14.2.12"),zy={};function Zy(i){return i.ngOriginalError}class Vf{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Zy(s);for(;a&&Zy(a);)a=Zy(a);return a||null}}function Ma(i){return i instanceof Function?i():i}function gl(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const p=s.length;if(l+p===c||i.charCodeAt(l+p)<=32)return l}a=l+1}}const yw="ng-template";function vw(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==gl(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function _w(i){return 4===i.type&&i.value!==yw}function Jy(i,s,a){return s===(4!==i.type||a?i.value:yw)}function $f(i,s,a){let c=4;const l=i.attrs||[],p=function Iw(i){for(let s=0;s<i.length;s++)if(Js(i[s]))return s;return i.length}(l);let v=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!Jy(i,I,a)||""===I&&1===s.length){if(lo(c))return!1;v=!0}}else{const T=8&c?I:s[++E];if(8&c&&null!==i.attrs){if(!vw(i.attrs,T,a)){if(lo(c))return!1;v=!0}continue}const P=Xy(8&c?"class":I,l,_w(i),a);if(-1===P){if(lo(c))return!1;v=!0;continue}if(""!==T){let $;$=P>p?"":l[P+1].toLowerCase();const Y=8&c?$:null;if(Y&&-1!==gl(Y,T,0)||2&c&&T!==$){if(lo(c))return!1;v=!0}}}}else{if(!v&&!lo(c)&&!lo(I))return!1;if(v&&lo(I))continue;v=!1,c=I|1&c}}return lo(c)||v}function lo(i){return 0==(1&i)}function Xy(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let p=!1;for(;l<s.length;){const v=s[l];if(v===i)return l;if(3===v||6===v)p=!0;else{if(1===v||2===v){let E=s[++l];for(;"string"==typeof E;)E=s[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=p?1:2}return-1}return function Ra(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function ww(i,s,a=!1){for(let c=0;c<s.length;c++)if($f(i,s[c],a))return!0;return!1}function Wu(i,s){return i?":not("+s.trim()+")":s}function Cg(i){let s=i[0],a=1,c=2,l="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const E=i[++a];l+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?l+="."+v:4&c&&(l+=" "+v);else""!==l&&!lo(v)&&(s+=Wu(p,l),l=""),c=v,p=p||!lo(c);a++}return""!==l&&(s+=Wu(p,l)),s}const Rt={};function Cw(i){bw(jt(),De(),Zn()+i,!1)}function bw(i,s,a,c){if(!c)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ys(s,p,a)}else{const p=i.preOrderHooks;null!==p&&Co(s,p,0,a)}zr(a)}function tv(i,s=null,a=null,c){const l=bg(i,s,a,c);return l.resolveInjectorInitializers(),l}function bg(i,s=null,a=null,c,l=new Set){const p=[a||bt,$t(i)];return c=c||("object"==typeof i?void 0:ce(i)),new Uy(p,s||_g(),c||null,l)}let Na=(()=>{class i{static create(a,c){if(Array.isArray(a))return tv({name:""},c,a,"");{const l=a.name??"";return tv({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=gn,i.NULL=new vg,i.\u0275prov=Qt({token:i,providedIn:"any",factory:()=>Tn(uw)}),i.__NG_ELEMENT_ID__=-1,i})();function Wf(i,s=Ze.Default){const a=De();return null===a?Tn(i,s):eo(Dn(),a,W(i),s)}function pC(){throw new Error("invalid")}function uv(i,s){return i<<17|s<<2}function is(i){return i>>17&32767}function cv(i){return 2|i}function ho(i){return(131068&i)>>2}function Vi(i,s){return-131069&i|s<<2}function yl(i){return 1|i}function fv(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],p=a[c+1];if(-1!==p){const v=i.data[p];sa(l),v.contentQueries(2,s[p],p)}}}function wl(i,s,a,c,l,p,v,E,I,T,M){const P=s.blueprint.slice();return P[0]=l,P[2]=76|c,(null!==M||i&&1024&i[2])&&(P[2]|=1024),nu(P),P[3]=P[15]=i,P[8]=a,P[10]=v||i&&i[10],P[11]=E||i&&i[11],P[12]=I||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=p,P[20]=function K0(){return wy++}(),P[21]=M,P[16]=2==s.type?i[16]:P,P}function El(i,s,a,c,l){let p=i.data[s];if(null===p)p=function Il(i,s,a,c,l){const p=uu(),v=ea(),I=i.data[s]=function AC(i,s,a,c,l,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,c,l),function Kp(){return It.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=l;const v=function Do(){const i=It.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return oi(p,!0),p}function Dl(i,s,a,c){if(0===a)return-1;const l=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function pv(i,s,a){du(s);try{const c=i.viewQuery;null!==c&&Bg(1,c,a);const l=i.template;null!==l&&jw(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&fv(i,s),i.staticViewQueries&&Bg(2,i.viewQuery,a);const p=i.components;null!==p&&function kg(i,s){for(let a=0;a<s.length;a++)LC(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Zs()}}function Fg(i,s,a,c){const l=s[2];if(128!=(128&l)){du(s);try{nu(s),function Rc(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&jw(i,s,a,2,c);const v=3==(3&l);if(v){const T=i.preOrderCheckHooks;null!==T&&Ys(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Co(s,T,0,null),dd(s,0)}if(function Lg(i){for(let s=Pu(i);null!==s;s=ku(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],p=l[3];0==(512&l[2])&&wn(p,1),l[2]|=512}}}(s),function kC(i){for(let s=Pu(i);null!==s;s=ku(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];zs(c)&&Fg(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&fv(i,s),v){const T=i.contentCheckHooks;null!==T&&Ys(s,T)}else{const T=i.contentHooks;null!==T&&Co(s,T,1),dd(s,1)}!function Pg(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)zr(~l);else{const p=l,v=a[++c],E=a[++c];Yp(v,p),E(2,s[p])}}}finally{zr(-1)}}(i,s);const E=i.components;null!==E&&function Bw(i,s){for(let a=0;a<s.length;a++)FC(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Bg(2,I,c),v){const T=i.viewCheckHooks;null!==T&&Ys(s,T)}else{const T=i.viewHooks;null!==T&&Co(s,T,2),dd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,wn(s[3],-1))}finally{Zs()}}}function jw(i,s,a,c,l){const p=Zn(),v=2&c;try{zr(-1),v&&s.length>22&&bw(i,s,22,!1),a(c,l)}finally{zr(p)}}function gv(i,s,a){!Zi()||(function NC(i,s,a,c){const l=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Xs(a,s),ur(c,s);const v=a.initialInputs;for(let E=l;E<p;E++){const I=i.data[E],T=vr(I);T&&PC(s,a,I);const M=Yi(s,i,E,a);ur(M,s),null!==v&&Jw(0,E-l,M,I,0,v),T&&(zt(a.index,s)[8]=M)}}(i,s,a,_r(a,s)),128==(128&a.flags)&&function OC(i,s,a){const c=a.directiveStart,l=a.directiveEnd,p=a.index,v=function Nc(){return It.lFrame.currentDirectiveIndex}();try{zr(p);for(let E=c;E<l;E++){const I=i.data[E],T=s[E];cu(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&wv(I,T)}}finally{zr(-1),cu(v)}}(i,s,a))}function Hd(i,s,a=_r){const c=s.localNames;if(null!==c){let l=s.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],E=-1===v?a(s,i):i[v];i[l++]=E}}}function Hw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=mv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function mv(i,s,a,c,l,p,v,E,I,T){const M=22+c,P=M+l,$=function TC(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Rt);return a}(M,P),Y="function"==typeof T?T():T;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:E,declTNode:s,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function Gw(i,s,a,c){const l=qd(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&tE(i).push(c,l.length-1))}function yv(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function qw(i,s){const c=s.directiveEnd,l=i.data,p=s.attrs,v=[];let E=null,I=null;for(let T=s.directiveStart;T<c;T++){const M=l[T],P=M.inputs,$=null===p||_w(s)?null:Dv(P,p);v.push($),E=yv(P,T,E),I=yv(M.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=E,s.outputs=I}function Ui(i,s,a,c,l,p,v,E){const I=_r(s,a);let M,T=s.inputs;!E&&null!=T&&(M=T[c])?(rE(i,a,M,c,l),Yo(s)&&vv(a,s.index)):3&s.type&&(c=function zw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=v?v(l,s.value||"",c):l,p.setProperty(I,c,l))}function vv(i,s){const a=zt(s,i);16&a[2]||(a[2]|=32)}function _v(i,s,a,c){let l=!1;if(Zi()){const p=function Ev(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];ww(a,v.selectors,!1)&&(l||(l=[]),Ts(Xs(a,s),i,v.type),vr(v)?(Iv(i,a),l.unshift(v)):l.push(v))}return l}(i,s,a),v=null===c?null:{"":-1};if(null!==p){l=!0,Yw(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const P=p[M];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,T=Dl(i,s,p.length,null);for(let M=0;M<p.length;M++){const P=p[M];a.mergedAttrs=oa(a.mergedAttrs,P.hostAttrs),Qw(i,a,s,T,P),HA(T,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const $=P.type.prototype;!E&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}qw(i,a)}v&&function Kw(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const p=a[s[l+1]];if(null==p)throw new we(-301,!1);c.push(s[l],p)}}}(a,c,v)}return a.mergedAttrs=oa(a.mergedAttrs,a.attrs),l}function Zw(i,s,a,c,l,p){const v=p.hostBindings;if(v){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function RC(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(c,l,v)}}function wv(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Iv(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function HA(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;vr(s)&&(a[""]=i)}}function Yw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Qw(i,s,a,c,l){i.data[c]=l;const p=l.factory||(l.factory=Ri(l.type)),v=new bs(p,vr(l),Wf);i.blueprint[c]=v,a[c]=v,Zw(i,s,0,c,Dl(i,a,l.hostVars,Rt),l)}function PC(i,s,a){const c=_r(s,i),l=Hw(a),p=i[10],v=Vg(i,wl(i,l,null,a.onPush?32:16,c,s,p,p.createRenderer(c,a),null,null,null));i[s.index]=v}function $o(i,s,a,c,l,p){const v=_r(i,s);!function Gd(i,s,a,c,l,p,v){if(null==p)i.removeAttribute(s,l,a);else{const E=null==v?ge(p):v(p,c||"",l);i.setAttribute(s,l,E,a)}}(s[11],v,p,i.value,a,c,l)}function Jw(i,s,a,c,l,p){const v=p[s];if(null!==v){const E=c.setInput;for(let I=0;I<v.length;){const T=v[I++],M=v[I++],P=v[I++];null!==E?c.setInput(a,P,T,M):a[M]=P}}}function Dv(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function eE(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function FC(i,s){const a=zt(s,i);if(zs(a)){const c=a[1];48&a[2]?Fg(c,a,c.template,a[8]):a[5]>0&&Cv(a)}}function Cv(i){for(let c=Pu(i);null!==c;c=ku(c))for(let l=10;l<c.length;l++){const p=c[l];if(zs(p))if(512&p[2]){const v=p[1];Fg(v,p,v.template,p[8])}else p[5]>0&&Cv(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=zt(a[c],i);zs(l)&&l[5]>0&&Cv(l)}}function LC(i,s){const a=zt(s,i),c=a[1];(function VC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),pv(c,a,a[8])}function Vg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Ug(i){for(;i;){i[2]|=32;const s=Da(i);if(Zh(i)&&!s)return i;i=s}return null}function Mn(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{Fg(i,s,i.template,a)}catch(v){throw c&&bv(s,v),v}finally{l.end&&l.end()}}function Bg(i,s,a){sa(0),s(i,a)}function qd(i){return i[7]||(i[7]=[])}function tE(i){return i.cleanup||(i.cleanup=[])}function bv(i,s){const a=i[9],c=a?a.get(Vf,null):null;c&&c.handleError(s)}function rE(i,s,a,c,l){for(let p=0;p<a.length;){const v=a[p++],E=a[p++],I=s[v],T=i.data[v];null!==T.setInput?T.setInput(I,l,c,E):I[E]=l}}function $g(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,p=0;if(null!==s)for(let v=0;v<s.length;v++){const E=s[v];"number"==typeof E?p=E:1==p?l=le(l,E):2==p&&(c=le(c,E+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function zd(i,s,a,c,l=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&c.push(In(p)),Rr(p))for(let E=10;E<p.length;E++){const I=p[E],T=I[1].firstChild;null!==T&&zd(I[1],I,T,c)}const v=a.type;if(8&v)zd(i,s,a.child,c);else if(32&v){const E=xd(a,s);let I;for(;I=E();)c.push(I)}else if(16&v){const E=bf(s,a);if(Array.isArray(E))c.push(...E);else{const I=Da(s[16]);zd(I[1],I,E,c,!0)}}a=l?a.projectionNext:a.next}return c}class Wd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return zd(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Rr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Ef(s,c),Po(a,c))}this._attachedToViewContainer=!1}ba(this._lView[1],this._lView)}onDestroy(s){Gw(this._lView[1],this._lView,null,s)}markForCheck(){Ug(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Mn(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ag(i,s){Bu(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class Hg extends Wd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Mn(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class iE extends Aa{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=K(s);return new Gg(a,this.ngModule)}}function Tv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Sv{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,zy,c);return l!==zy||a===zy?l:this.parentInjector.get(s,a,c)}}class Gg extends hw{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Dw(i){return i.map(Cg).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Tv(this.componentDef.inputs)}get outputs(){return Tv(this.componentDef.outputs)}create(s,a,c,l){let p=(l=l||this.ngModule)instanceof zu?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new Sv(s,p):s,E=v.get(qy,null);if(null===E)throw new we(407,!1);const I=v.get(QD,null),T=E.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=c?function SC(i,s,a){return i.selectRootElement(s,a===ut.ShadowDom)}(T,c,this.componentDef.encapsulation):wf(T,M,function Zd(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),$=this.componentDef.onPush?288:272,Y=mv(0,null,null,1,0,null,null,null,null,null),ye=wl(null,Y,null,$,null,null,E,T,I,v,null);let Pe,He;du(ye);try{const st=function BC(i,s,a,c,l,p){const v=a[1];a[22]=i;const I=El(v,22,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&($g(I,T,!0),null!==i&&(So(l,i,T),null!==I.classes&&Ta(l,i,I.classes),null!==I.styles&&Li(l,i,I.styles)));const M=c.createRenderer(i,s),P=wl(a,Hw(s),null,s.onPush?32:16,a[22],I,c,M,p||null,null,null);return v.firstCreatePass&&(Ts(Xs(I,a),v,s.type),Iv(v,I),Yw(I,a.length,1)),Vg(a,P),a[22]=P}(P,this.componentDef,ye,E,T);if(P)if(c)So(T,P,["ng-version",Lf.full]);else{const{attrs:mt,classes:Te}=function rC(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===l?""!==p&&s.push(p,i[++c]):8===l&&a.push(p);else{if(!lo(l))break;l=p}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);mt&&So(T,P,mt),Te&&Te.length>0&&Ta(T,P,Te.join(" "))}if(He=Io(Y,22),void 0!==a){const mt=He.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const wt=a[Te];mt.push(null!=wt?Array.from(wt):null)}}Pe=function jC(i,s,a,c){const l=a[1],p=function MC(i,s,a){const c=Dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Qw(i,c,s,Dl(i,s,1,null),a),qw(i,c));const l=Yi(s,i,c.directiveStart,c);ur(l,s);const p=_r(c,s);return p&&ur(p,s),l}(l,a,s);if(i[8]=a[8]=p,null!==c)for(const E of c)E(p,s);if(s.contentQueries){const E=Dn();s.contentQueries(1,p,E.directiveStart)}const v=Dn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(zr(v.index),Zw(a[1],v,0,v.directiveStart,v.directiveEnd,s),wv(s,p)),p}(st,this.componentDef,ye,[oE]),pv(Y,ye,null)}finally{Zs()}return new Av(this.componentType,Pe,xa(He,ye),ye,He)}}class Av extends class fl{}{constructor(s,a,c,l,p){super(),this.location=c,this._rootLView=l,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Hg(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const p=this._rootLView;rE(p[1],p,l,s,a),vv(p,this._tNode.index)}}get injector(){return new to(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function oE(){const i=Dn();pu(De()[1],i)}function uE(i){let s=function aE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(vr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new we(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const v=i;v.inputs=cE(i.inputs),v.declaredInputs=cE(i.declaredInputs),v.outputs=cE(i.outputs);const E=l.hostBindings;E&&HC(i,E);const I=l.viewQuery,T=l.contentQueries;if(I&&lE(i,I),T&&$C(i,T),ae(i.inputs,l.inputs),ae(i.declaredInputs,l.declaredInputs),ae(i.outputs,l.outputs),vr(l)&&l.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let v=0;v<p.length;v++){const E=p[v];E&&E.ngInherit&&E(i),E===uE&&(a=!1)}}s=Object.getPrototypeOf(s)}!function qg(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=oa(l.hostAttrs,a=oa(a,l.hostAttrs))}}(c)}function cE(i){return i===Hr?{}:i===bt?[]:i}function lE(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function $C(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,p)=>{s(c,l,p),a(c,l,p)}:s}function HC(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let zg=null;function Cl(){if(!zg){const i=rn.Symbol;if(i&&i.iterator)zg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(zg=c)}}}return zg}function Kd(i){return!!xv(i)&&(Array.isArray(i)||!(i instanceof Map)&&Cl()in i)}function xv(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function li(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function me(i,s,a,c){const l=De();return li(l,Ws(),s)&&(jt(),$o(fn(),l,i,s,a,c)),me}function Pa(i,s,a,c){return li(i,Ws(),a)?s+ge(a)+c:Rt}function ka(i,s,a,c,l,p,v,E){const I=De(),T=jt(),M=i+22,P=T.firstCreatePass?function Jr(i,s,a,c,l,p,v,E,I){const T=s.consts,M=El(s,i,4,v||null,vi(T,E));_v(s,a,M,vi(T,I)),pu(s,M);const P=M.tViews=mv(2,M,c,l,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,T,I,s,a,c,l,p,v):T.data[M];oi(P,!1);const $=I[11].createComment("");Pd(T,I,$,P),ur($,I),Vg(I,I[M]=eE($,I,$,P)),Ic(P)&&gv(T,I,P),null!=v&&Hd(I,P,E)}function tp(i,s,a){const c=De();return li(c,Ws(),s)&&Ui(jt(),fn(),c,i,s,c[11],a,!1),tp}function Kg(i,s,a,c,l){const v=l?"class":"style";rE(i,a,s.inputs[v],v,c)}function Yg(i,s,a,c){const l=De(),p=jt(),v=22+i,E=l[11],I=l[v]=wf(E,s,function fu(){return It.lFrame.currentNamespace}()),T=p.firstCreatePass?function di(i,s,a,c,l,p,v){const E=s.consts,T=El(s,i,2,l,vi(E,p));return _v(s,a,T,vi(E,v)),null!==T.attrs&&$g(T,T.attrs,!1),null!==T.mergedAttrs&&$g(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,p,l,0,s,a,c):p.data[v];oi(T,!0);const M=T.mergedAttrs;null!==M&&So(E,I,M);const P=T.classes;null!==P&&Ta(E,I,P);const $=T.styles;return null!==$&&Li(E,I,$),64!=(64&T.flags)&&Pd(p,l,I,T),0===function iu(){return It.lFrame.elementDepthCount}()&&ur(I,l),function su(){It.lFrame.elementDepthCount++}(),Ic(T)&&(gv(p,l,T),function $w(i,s,a){if(Ka(s)){const l=s.directiveEnd;for(let p=s.directiveStart;p<l;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,T,l)),null!==c&&Hd(l,T),Yg}function bl(){let i=Dn();ea()?function ta(){It.lFrame.isParent=!1}():(i=i.parent,oi(i,!1));const s=i;!function Sc(){It.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(pu(a,i),Ka(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function yu(i){return 0!=(16&i.flags)}(s)&&Kg(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function fd(i){return 0!=(32&i.flags)}(s)&&Kg(a,s,De(),s.stylesWithoutHost,!1),bl}function Qg(i,s,a,c){return Yg(i,s,a,c),bl(),Qg}function yE(){return De()}function Nv(i){return!!i&&"function"==typeof i.then}function Tl(i){return!!i&&"function"==typeof i.subscribe}const Ov=Tl;function np(i,s,a,c){const l=De(),p=jt(),v=Dn();return function kv(i,s,a,c,l,p,v,E){const I=Ic(c),M=i.firstCreatePass&&tE(i),P=s[8],$=qd(s);let Y=!0;if(3&c.type||E){const He=_r(c,s),st=E?E(He):He,mt=$.length,Te=E?on=>E(In(on[c.index])):c.index;let wt=null;if(!E&&I&&(wt=function ZC(i,s,a,c){const l=i.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const v=l[p];if(v===a&&l[p+1]===c){const E=s[7],I=l[p+2];return E.length>I?E[I]:null}"string"==typeof v&&(p+=2)}return null}(i,s,l,c.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=p,wt.__ngLastListenerFn__=p,Y=!1;else{p=Xg(c,s,P,p,!1);const on=a.listen(st,l,p);$.push(p,on),M&&M.push(l,Te,mt,mt+1)}}else p=Xg(c,s,P,p,!1);const ye=c.outputs;let Pe;if(Y&&null!==ye&&(Pe=ye[l])){const He=Pe.length;if(He)for(let st=0;st<He;st+=2){const En=s[Pe[st]][Pe[st+1]].subscribe(p),mc=$.length;$.push(p,En),M&&M.push(l,c.index,mc,-(mc+1))}}}(p,l,l[11],v,i,s,0,c),np}function rp(i,s,a,c){try{return!1!==a(c)}catch(l){return bv(i,l),!1}}function Xg(i,s,a,c,l){return function p(v){if(v===Function)return c;Ug(2&i.flags?zt(i.index,s):s);let I=rp(s,0,c,v),T=p.__ngNextListenerFn__;for(;T;)I=rp(s,0,T,v)&&I,T=T.__ngNextListenerFn__;return l&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function em(i=1){return function Ks(i){return(It.lFrame.contextLView=function hu(i,s){for(;i>0;)s=s[15],i--;return s}(i,It.lFrame.contextLView))[8]}(i)}function ip(i,s,a,c,l){const p=De(),v=Pa(p,s,a,c);return v!==Rt&&Ui(jt(),fn(),p,i,v,p[11],l,!1),ip}function op(i,s,a,c,l){const p=i[a+1],v=null===s;let E=c?is(p):ho(p),I=!1;for(;0!==E&&(!1===I||v);){const M=i[E+1];Lv(i[E],s)&&(I=!0,i[E+1]=c?yl(M):cv(M)),E=c?is(M):ho(M)}I&&(i[a+1]=c?cv(p):yl(p))}function Lv(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Xi(i,s)>=0}function th(i,s){return function po(i,s,a,c){const l=De(),p=jt(),v=function Ki(i){const s=It.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function om(i,s,a,c){const l=i.data;if(null===l[a+1]){const p=l[Zn()],v=function Hv(i,s){return s>=i.expandoStartIndex}(i,a);(function up(i,s){return 0!=(i.flags&(s?16:32))})(p,c)&&null===s&&!v&&(s=!1),s=function nb(i,s,a,c){const l=function ia(i){const s=It.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=Sl(a=nh(null,i,s,a,c),s.attrs,c),p=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==l)if(a=nh(l,i,s,a,c),null===p){let I=function Gv(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==ho(c))return i[is(c)]}(i,s,c);void 0!==I&&Array.isArray(I)&&(I=nh(null,i,s,I[1],c),I=Sl(I,s.attrs,c),function TE(i,s,a,c){i[is(a?s.classBindings:s.styleBindings)]=c}(i,s,c,I))}else p=function rb(i,s,a){let c;const l=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<l;p++)c=Sl(c,i[p].hostAttrs,a);return Sl(c,s.attrs,a)}(i,s,c)}return void 0!==p&&(c?s.residualClasses=p:s.residualStyles=p),a}(l,p,s,c),function IE(i,s,a,c,l,p){let v=p?s.classBindings:s.styleBindings,E=is(v),I=ho(v);i[c]=a;let M,T=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||Xi(P,M)>0)&&(T=!0)}else M=a;if(l)if(0!==I){const $=is(i[E+1]);i[c+1]=uv($,E),0!==$&&(i[$+1]=Vi(i[$+1],c)),i[E+1]=function mC(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=uv(E,0),0!==E&&(i[E+1]=Vi(i[E+1],c)),E=c;else i[c+1]=uv(I,0),0===E?E=c:i[I+1]=Vi(i[I+1],c),I=c;T&&(i[c+1]=cv(i[c+1])),op(i,M,c,!0),op(i,M,c,!1),function DE(i,s,a,c,l){const p=l?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Xi(p,s)>=0&&(a[c+1]=yl(a[c+1]))}(s,M,i,c,p),v=uv(E,I),p?s.classBindings=v:s.styleBindings=v}(l,p,s,a,v,c)}}(p,i,v,c),s!==Rt&&li(l,v,s)&&function rh(i,s,a,c,l,p,v,E){if(!(3&s.type))return;const I=i.data,T=I[E+1];ap(function lv(i){return 1==(1&i)}(T)?Wv(I,s,a,l,ho(T),v):void 0)||(ap(p)||function kw(i){return 2==(2&i)}(T)&&(p=Wv(I,null,a,l,E,v)),function X0(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:ts.DashCase;null==l?i.removeStyle(a,c,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=ts.Important),i.setStyle(a,c,l,p))}}(c,v,si(Zn(),a),l,p))}(p,p.data[Zn()],l,l[11],i,l[v+1]=function SE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(Er(i)))),i}(s,a),c,v)}(i,s,null,!0),th}function nh(i,s,a,c,l){let p=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(p=s[E],c=Sl(c,p.hostAttrs,l),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function Sl(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let p=0;p<s.length;p++){const v=s[p];"number"==typeof v?l=v:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Or(i,v,!!a||s[++p]))}return void 0===i?null:i}function Wv(i,s,a,c,l,p){const v=null===s;let E;for(;l>0;){const I=i[l],T=Array.isArray(I),M=T?I[1]:I,P=null===M;let $=a[l+1];$===Rt&&($=P?bt:void 0);let Y=P?ma($,c):M===c?$:void 0;if(T&&!ap(Y)&&(Y=ma(I,c)),ap(Y)&&(E=Y,v))return E;const ye=i[l+1];l=v?is(ye):ho(ye)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(E=ma(I,c))}return E}function ap(i){return void 0!==i}function AE(i,s=""){const a=De(),c=jt(),l=i+22,p=c.firstCreatePass?El(c,l,1,s,null):c.data[l],v=a[l]=function Md(i,s){return i.createText(s)}(a[11],s);Pd(c,a,v,p),oi(p,!1)}function Zv(i){return Fa("",i,""),Zv}function Fa(i,s,a){const c=De(),l=Pa(c,i,s,a);return l!==Rt&&function Xu(i,s,a){const c=si(s,i);!function Ty(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Zn(),l),Fa}const Al=void 0;var LE=["en",[["a","p"],["AM","PM"],Al],[["AM","PM"],Al,Al],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Al,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Al,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Al,"{1} 'at' {0}",Al],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ob(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let xl={};function La(i){const s=function hm(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=gp(s);if(a)return a;const c=s.split("-")[0];if(a=gp(c),a)return a;if("en"===c)return LE;throw new we(701,!1)}function pp(i){return La(i)[We.PluralCase]}function gp(i){return i in xl||(xl[i]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[i]),xl[i]}var We=(()=>((We=We||{})[We.LocaleId=0]="LocaleId",We[We.DayPeriodsFormat=1]="DayPeriodsFormat",We[We.DayPeriodsStandalone=2]="DayPeriodsStandalone",We[We.DaysFormat=3]="DaysFormat",We[We.DaysStandalone=4]="DaysStandalone",We[We.MonthsFormat=5]="MonthsFormat",We[We.MonthsStandalone=6]="MonthsStandalone",We[We.Eras=7]="Eras",We[We.FirstDayOfWeek=8]="FirstDayOfWeek",We[We.WeekendRange=9]="WeekendRange",We[We.DateFormat=10]="DateFormat",We[We.TimeFormat=11]="TimeFormat",We[We.DateTimeFormat=12]="DateTimeFormat",We[We.NumberSymbols=13]="NumberSymbols",We[We.NumberFormats=14]="NumberFormats",We[We.CurrencyCode=15]="CurrencyCode",We[We.CurrencySymbol=16]="CurrencySymbol",We[We.CurrencyName=17]="CurrencyName",We[We.Currencies=18]="Currencies",We[We.Directionality=19]="Directionality",We[We.PluralCase=20]="PluralCase",We[We.ExtraData=21]="ExtraData",We))();const ah="en-US";let uh=ah;function T_(i,s,a,c,l){if(i=W(i),Array.isArray(i))for(let p=0;p<i.length;p++)T_(i[p],s,a,c,l);else{const p=jt(),v=De();let E=qu(i)?i:W(i.provide),I=jy(i);const T=Dn(),M=1048575&T.providerIndexes,P=T.directiveStart,$=T.providerIndexes>>20;if(qu(i)||!i.multi){const Y=new bs(I,l,Wf),ye=Ba(E,s,l?M:M+$,P);-1===ye?(Ts(Xs(T,v),p,E),Me(p,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(Y),v.push(Y)):(a[ye]=Y,v[ye]=Y)}else{const Y=Ba(E,s,M+$,P),ye=Ba(E,s,M,M+$),Pe=Y>=0&&a[Y],He=ye>=0&&a[ye];if(l&&!He||!l&&!Pe){Ts(Xs(T,v),p,E);const st=function Eb(i,s,a,c,l){const p=new bs(i,a,Wf);return p.multi=[],p.index=s,p.componentProviders=0,Qn(p,l,c&&!a),p}(l?et:S_,a.length,l,c,I);!l&&He&&(a[ye].providerFactory=st),Me(p,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(st),v.push(st)}else Me(p,i,Y>-1?Y:ye,Qn(a[l?ye:Y],I,!l&&c));!l&&c&&He&&a[ye].componentProviders++}}}function Me(i,s,a,c){const l=qu(s),p=function DA(i){return!!i.useClass}(s);if(l||p){const I=(p?W(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,I]):T[M+1].push(c,I)}else T.push(a,I)}}}function Qn(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Ba(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function S_(i,s,a,c){return at(this.multi,[])}function et(i,s,a,c){const l=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Yi(a,a[1],this.providerFactory.index,c);p=E.slice(0,v),at(l,p);for(let I=v;I<E.length;I++)p.push(E[I])}else p=[],at(l,p);return p}function at(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function qe(i,s=[]){return a=>{a.providersResolver=(c,l)=>function b_(i,s,a){const c=jt();if(c.firstCreatePass){const l=vr(i);T_(a,c.data,c.blueprint,l,!0),T_(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class oe{}class Ae{}function br(i,s){return new nI(i,s??null)}class nI extends oe{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iE(this);const c=dn(s);this._bootstrapComponents=Ma(c.bootstrap),this._r3Injector=bg(s,a,[{provide:oe,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],ce(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class A_ extends Ae{constructor(s){super(),this.moduleType=s}create(s){return new nI(this.moduleType,s)}}class Db extends oe{constructor(s,a,c){super(),this.componentFactoryResolver=new iE(this),this.instance=null;const l=new Uy([...s,{provide:oe,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],a||_g(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function x_(i,s,a=null){return new Db(i,s,a).injector}let Cb=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Ud(0,a.type),l=c.length>0?x_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Qt({token:i,providedIn:"environment",factory:()=>new i(Tn(zu))}),i})();function M_(i){i.getStandaloneInjector=s=>s.get(Cb).getOrCreateStandaloneInjector(i)}function Dm(i){return s=>{setTimeout(i,void 0,s)}}const hi=class lc extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,p=a||(()=>null),v=c;if(s&&"object"==typeof s){const I=s;l=I.next?.bind(I),p=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(p=Dm(p),l&&(l=Dm(l)),v&&(v=Dm(v)));const E=super.subscribe({next:l,error:p,complete:v});return s instanceof J.w0&&s.add(E),E}};function fI(){return this._results[Cl()]()}class Pl{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Cl(),c=Pl.prototype;c[a]||(c[a]=fI)}get changes(){return this._changes||(this._changes=new hi)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Zr(s);(this._changesDetected=!function Tu(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],p=s[c];if(a&&(l=a(l),p=a(p)),p!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ja=(()=>{class i{}return i.__NG_ELEMENT_ID__=Tr,i})();const pI=ja,Rb=class extends pI{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=wl(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(c)),pv(c,l,s),new Wd(l)}};function Tr(){return Cm(Dn(),De())}function Cm(i,s){return 4&i.type?new Rb(s,i,xa(i,s)):null}let mo=(()=>{class i{}return i.__NG_ELEMENT_ID__=Xn,i})();function Xn(){return $a(Dn(),De())}const kl=mo,bm=class extends kl{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return xa(this._hostTNode,this._hostLView)}get injector(){return new to(this._hostTNode,this._hostLView)}get parentInjector(){const s=Eu(this._hostTNode,this._hostLView);if(gd(s)){const a=ua(s,this._hostLView),c=ir(s);return new to(a[1].data[c+8],a)}return new to(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=F_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,p;"number"==typeof c?l=c:null!=c&&(l=c.index,p=c.injector);const v=s.createEmbeddedView(a||{},p);return this.insert(v,l),v}createComponent(s,a,c,l,p){const v=s&&!function Nr(i){return"function"==typeof i}(s);let E;if(v)E=a;else{const P=a||{};E=P.index,c=P.injector,l=P.projectableNodes,p=P.environmentInjector||P.ngModuleRef}const I=v?s:new Gg(K(s)),T=c||this.parentInjector;if(!p&&null==I.ngModule){const $=(v?T:this.parentInjector).get(zu,null);$&&(p=$)}const M=I.create(T,l,void 0,p);return this.insert(M.hostView,E),M}insert(s,a){const c=s._lView,l=c[1];if(function tu(i){return Rr(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=c[3],$=new bm(P,P[6],P[3]);$.detach($.indexOf(s))}}const p=this._adjustIndex(a),v=this._lContainer;!function Lu(i,s,a,c){const l=10+c,p=a.length;c>0&&(a[l-1][4]=s),c<p-10?(s[4]=a[l],qc(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function ug(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=64}(l,c,v,p);const E=kd(p,v),I=c[11],T=Bo(I,v[7]);return null!==T&&function Sy(i,s,a,c,l,p){c[0]=l,c[6]=s,Bu(i,c,a,1,l,p)}(l,v[6],I,c,T,E),s.attachToViewContainerRef(),qc(Fl(v),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=F_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Ef(this._lContainer,a);c&&(Po(Fl(this._lContainer),a),ba(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Ef(this._lContainer,a);return c&&null!=Po(Fl(this._lContainer),a)?new Wd(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function F_(i){return i[8]}function Fl(i){return i[8]||(i[8]=[])}function $a(i,s){let a;const c=s[i.index];if(Rr(c))a=c;else{let l;if(8&i.type)l=In(c);else{const p=s[11];l=p.createComment("");const v=_r(i,s);Uo(p,Bo(p,v),l,function jo(i,s){return i.nextSibling(s)}(p,v),!1)}s[i.index]=a=eE(c,s,l,i),Vg(s,a)}return new bm(a,i,s)}class Vl{constructor(s){this.queryList=s,this.matches=null}clone(){return new Vl(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ho{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);l.push(this.queries[v.indexInDeclarationView].clone())}return new Ho(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==j_(s,a).matches&&this.queries[a].setDirty()}}class L_{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class dc{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(s,l);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new dc(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Sp{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Sp(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const p=c[l];this.matchTNodeWithReadOption(s,a,Ul(a,p)),this.matchTNodeWithReadOption(s,a,Ao(a,s,p,!1,!1))}else c===ja?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ao(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===Ff||l===mo||l===ja&&4&a.type)this.addMatch(a.index,-2);else{const p=Ao(a,s,l,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Ul(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Ap(i,s,a,c){return-1===a?function V_(i,s){return 11&i.type?xa(i,s):4&i.type?Cm(i,s):null}(s,i):-2===a?function gI(i,s,a){return a===Ff?xa(s,i):a===ja?Cm(s,i):a===mo?$a(s,i):void 0}(i,s,c):Yi(i,i[1],a,s)}function U_(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const p=i.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const T=v[I];E.push(T<0?null:Ap(s,p[T],v[I+1],a.metadata.read))}l.matches=E}return l.matches}function Eh(i,s,a,c){const l=i.queries.getByIndex(a),p=l.matches;if(null!==p){const v=U_(i,s,l,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(v[E/2]);else{const T=p[E+1],M=s[-I];for(let P=10;P<M.length;P++){const $=M[P];$[17]===$[3]&&Eh($[1],$,T,c)}if(null!==M[9]){const P=M[9];for(let $=0;$<P.length;$++){const Y=P[$];Eh(Y[1],Y,T,c)}}}}}return c}function Ih(i){const s=De(),a=jt(),c=Oc();sa(c+1);const l=j_(a,c);if(i.dirty&&function eu(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const p=l.crossesNgTemplate?Eh(a,s,c,[]):U_(a,s,l,c);i.reset(p,Hy),i.notifyOnChanges()}return!0}return!1}function yI(i,s,a,c){const l=jt();if(l.firstCreatePass){const p=Dn();(function Ga(i,s,a){null===i.queries&&(i.queries=new dc),i.queries.track(new Sp(s,a))})(l,new L_(s,a,c),p.index),function wI(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function B_(i,s,a){const c=new Pl(4==(4&a));Gw(i,s,c,c.destroy),null===s[19]&&(s[19]=new Ho),s[19].queries.push(new Vl(c))}(l,De(),a)}function vI(){return function _I(i,s){return i[19].queries[s].queryList}(De(),Oc())}function j_(i,s){return i.queries.getByIndex(s)}function Fm(...i){}const J_=new pn("Application Initializer");let qa=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Fm,this.reject=Fm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(Nv(p))a.push(p);else if(Ov(p)){const v=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Tn(J_,8))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const fc=new pn("AppId",{providedIn:"root",factory:function X_(){return`${Lm()}${Lm()}${Lm()}`}});function Lm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $l=new pn("Platform Initializer"),RI=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),e0=new pn("appBootstrapListener");let Hb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Hl=new pn("LocaleId",{providedIn:"root",factory:()=>D(Hl,Ze.Optional|Ze.SkipSelf)||function Pn(){return typeof $localize<"u"&&$localize.locale||ah}()}),Um=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qb{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let NI=(()=>{class i{compileModuleSync(a){return new A_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Ma(dn(a).declarations).reduce((v,E)=>{const I=K(E);return I&&v.push(new Gg(I)),v},[]);return new qb(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zb=(()=>Promise.resolve(0))();function er(i){typeof Zone>"u"?zb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ds{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hi(!1),this.onMicrotaskEmpty=new hi(!1),this.onStable=new hi(!1),this.onError=new hi(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function tn(){let i=rn.requestAnimationFrame,s=rn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function ji(i){const s=()=>{!function Wb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,jm(i),i.isCheckStableRunning=!0,qo(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),jm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,p,v,E)=>{try{return Ah(i),a.invokeTask(l,p,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),r0(i)}},onInvoke:(a,c,l,p,v,E,I)=>{try{return Ah(i),a.invoke(l,p,v,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),r0(i)}},onHasTask:(a,c,l,p)=>{a.hasTask(l,p),c===l&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,jm(i),qo(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,l,p)=>(a.handleError(l,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ds.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(ds.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+l,s,PI,Fm,Fm);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const PI={};function qo(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function jm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ah(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function r0(i){i._nesting--,qo(i)}class zo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hi,this.onMicrotaskEmpty=new hi,this.onStable=new hi,this.onError=new hi}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const s0=new pn(""),xh=new pn("");let o0,Zb=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,o0||(function Vt(i){o0=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ds.assertNotInAngularZone(),er(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())er(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(Tn(ds),Tn(kI),Tn(xh))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac}),i})(),kI=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return o0?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),vo=null;const Mh=new pn("AllowMultipleToken"),Gl=new pn("PlatformDestroyListeners");class Yb{constructor(s,a){this.name=s,this.token=a}}function jI(i,s,a=[]){const c=`Platform: ${s}`,l=new pn(c);return(p=[])=>{let v=a0();if(!v||v.injector.get(Mh,!1)){const E=[...a,...p,{provide:l,useValue:!0}];i?i(E):function VI(i){if(vo&&!vo.get(Mh,!1))throw new we(400,!1);vo=i;const s=i.get(tr);(function BI(i){const s=i.get($l,null);s&&s.forEach(a=>a())})(i)}(function ql(i=[],s){return Na.create({name:s,providers:[{provide:Dr,useValue:"platform"},{provide:Gl,useValue:new Set([()=>vo=null])},...i]})}(E,c))}return function Qb(i){const s=a0();if(!s)throw new we(401,!1);return s}()}}function a0(){return vo?.get(tr)??null}let tr=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function u0(i,s){let a;return a="noop"===i?new zo:("zone.js"===i?void 0:i)||new ds(s),a}(c?.ngZone,function $m(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:ds,useValue:l}];return l.run(()=>{const v=Na.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(v),I=E.injector.get(Vf,null);if(!I)throw new we(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{I.handleError(M)}});E.onDestroy(()=>{Op(this._modules,E),T.unsubscribe()})}),function Rh(i,s,a){try{const c=a();return Nv(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(I,l,()=>{const T=E.injector.get(qa);return T.runInitializers(),T.donePromise.then(()=>(function Va(i){Lt(i,"Expected localeId to be defined"),"string"==typeof i&&(uh=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Hl,ah)||ah),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const l=_o({},c);return function FI(i,s,a){const c=new A_(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(a){const c=a.injector.get(Nh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Gl,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Tn(Na))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function _o(i,s){return Array.isArray(s)?s.reduce(_o,i):{...i,...s}}let Nh=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{ds.assertNotInAngularZone(),er(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ie.T)(p,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof hw;if(!this._injector.get(qa).done)throw!l&&Kt(a),new we(405,false);let v;v=l?a:this._injector.get(Aa).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function LI(i){return i.isBoundToModule}(v)?void 0:this._injector.get(oe),T=v.create(Na.NULL,[],c||v.selector,E),M=T.location.nativeElement,P=T.injector.get(s0,null);return P?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),Op(this.components,T),P?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Op(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(e0,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Op(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Tn(ds),Tn(zu),Tn(Vf))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Op(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let c0=!0,l0=!1;function Xb(){return l0=!0,c0}function eT(){if(l0)throw new Error("Cannot enable prod mode after platform setup.");c0=!1}let qI=(()=>{class i{}return i.__NG_ELEMENT_ID__=d0,i})();function d0(i){return function zI(i,s,a){if(Yo(i)&&!a){const c=zt(i.index,s);return new Wd(c,c)}return 47&i.type?new Wd(s[16],s):null}(Dn(),De(),16==(16&i))}class YI{constructor(){}supports(s){return Kd(s)}create(s){return new iT(s)}}const rT=(i,s)=>s;class iT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||rT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<JI(c,l,p)?a:c,E=JI(v,l,p),I=v.currentIndex;if(v===c)l--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)l++;else{p||(p=[]);const T=E-l,M=I-l;if(T!=M){for(let $=0;$<T;$++){const Y=$<p.length?p[$]:p[$]=0,ye=Y+$;M<=ye&&ye<T&&(p[$]=Y+1)}p[v.previousIndex]=M-T}}E!==I&&s(v,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Kd(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,p,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],v=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,E),c=!0),a=a._next}else l=0,function WA(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Cl()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{v=this._trackByFn(l,E),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,E,v,l)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,l)):s=this._addAfter(new sT(a,c),p,l),s}_verifyReinsertion(s,a,c,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,p=s._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new QI),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new QI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class sT{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class QI{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new oT,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function JI(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class XI{constructor(){}supports(s){return s instanceof Map||xv(s)}create(){return new aT}}class aT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||xv(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const p=l._prev,v=l._next;return p&&(p._next=v),v&&(v._prev=p),l._next=null,l._prev=null,l}const c=new uT(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class uT{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function f0(){return new p0([new YI])}let p0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||f0()),deps:[[i,new it,new Ke]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:f0}),i})();function g0(){return new m0([new XI])}let m0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||g0()),deps:[[i,new it,new Ke]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:g0}),i})();const v0=jI(null,"core",[]);let gc=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Tn(Nh))},i.\u0275mod=Ot({type:i}),i.\u0275inj=At({}),i})();function nD(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(lt,Ce,k)=>{k.d(Ce,{Z:()=>we});var f=k(2090),J=k(4859),O=k(9681),ie=k(1877);class re{constructor(ge,de){this._delegate=ge,this.firebase=de,(0,O._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,de=O._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(ge);return!ot.isInitialized()&&"EXPLICIT"===(null===(Qe=ot.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:de})}_removeServiceInstance(ge,de=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(de)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function le(){const tt=function ce(tt){const ge={},de={__esModule:!0,initializeApp:function Se(Be,V={}){const pe=O.initializeApp(Be,V);if((0,f.r3)(ge,pe.name))return ge[pe.name];const q=new tt(pe,de);return ge[pe.name]=q,q},app:ot,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Be){const V=Be.name,pe=V.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const q=(Q=ot())=>{if("function"!=typeof Q[pe])throw ae.create("invalid-app-argument",{appName:V});return Q[pe]()};void 0!==Be.serviceProps&&(0,f.ZB)(q,Be.serviceProps),de[pe]=q,tt.prototype[pe]=function(...Q){return this._getService.bind(this,V).apply(this,Be.multipleInstances?Q:[])}}return"PUBLIC"===Be.type?de[pe]:null},removeApp:function Qe(Be){delete ge[Be]},useAsService:function Ve(Be,V){return"serverAuth"===V?null:V},modularAPIs:O}};function ot(Be){if(!(0,f.r3)(ge,Be=Be||O._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Be});return ge[Be]}return de.default=de,Object.defineProperty(de,"apps",{get:function ve(){return Object.keys(ge).map(Be=>ge[Be])}}),ot.App=tt,de}(re);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function ge(de){(0,f.ZB)(tt,de)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),tt}(),B=new ie.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=U;!function xe(tt){(0,O.registerVersion)("@firebase/app-compat","0.2.0",tt)}()},9681:(lt,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>js,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Qt,_apps:()=>an,_clearComponents:()=>$i,_components:()=>mn,_getProvider:()=>At,_registerComponent:()=>Ar,_removeServiceInstance:()=>un,deleteApp:()=>Zo,getApp:()=>ti,getApps:()=>ni,initializeApp:()=>mi,onLog:()=>gs,registerVersion:()=>yr,setLogLevel:()=>Gn});var f=k(5861),J=k(4859),O=k(1877),ie=k(2090),re=k(8766);class ue{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function ae(Xe){return"VERSION"===Xe.getComponent()?.type}(Je)){const Et=Je.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(Je=>Je).join(" ")}}const ce="@firebase/app",U=new O.Yd("@firebase/app"),Lt="[DEFAULT]",ze={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,mn=new Map;function Zt(Xe,Ie){try{Xe.container.addComponent(Ie)}catch(Je){U.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Xe.name}`,Je)}}function Qt(Xe,Ie){Xe.container.addOrOverwriteComponent(Ie)}function Ar(Xe){const Ie=Xe.name;if(mn.has(Ie))return U.debug(`There were multiple attempts to register component ${Ie}.`),!1;mn.set(Ie,Xe);for(const Je of an.values())Zt(Je,Xe);return!0}function At(Xe,Ie){const Je=Xe.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Xe.container.getProvider(Ie)}function un(Xe,Ie,Je=Lt){At(Xe,Ie).clearInstance(Je)}function $i(){mn.clear()}const xr=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $r{constructor(Ie,Je,Et){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}const js="9.15.0";function mi(Xe,Ie={}){let Je=Xe;"object"!=typeof Ie&&(Ie={name:Ie});const Et=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},Ie),Tt=Et.name;if("string"!=typeof Tt||!Tt)throw xr.create("bad-app-name",{appName:String(Tt)});if(Je||(Je=(0,ie.aH)()),!Je)throw xr.create("no-options");const Ot=an.get(Tt);if(Ot){if((0,ie.vZ)(Je,Ot.options)&&(0,ie.vZ)(Et,Ot.config))return Ot;throw xr.create("duplicate-app",{appName:Tt})}const j=new J.H0(Tt);for(const z of mn.values())j.addComponent(z);const L=new $r(Je,Et,j);return an.set(Tt,L),L}function ti(Xe=Lt){const Ie=an.get(Xe);if(!Ie&&Xe===Lt)return mi();if(!Ie)throw xr.create("no-app",{appName:Xe});return Ie}function ni(){return Array.from(an.values())}function Zo(Xe){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,f.Z)(function*(Xe){const Ie=Xe.name;an.has(Ie)&&(an.delete(Ie),yield Promise.all(Xe.container.getProviders().map(Je=>Je.delete())),Xe.isDeleted=!0)})).apply(this,arguments)}function yr(Xe,Ie,Je){var Et;let Tt=null!==(Et=ze[Xe])&&void 0!==Et?Et:Xe;Je&&(Tt+=`-${Je}`);const Ot=Tt.match(/\s|\//),j=Ie.match(/\s|\//);if(Ot||j){const L=[`Unable to register library "${Tt}" with version "${Ie}":`];return Ot&&L.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Ot&&j&&L.push("and"),j&&L.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void U.warn(L.join(" "))}Ar(new J.wA(`${Tt}-version`,()=>({library:Tt,version:Ie}),"VERSION"))}function gs(Xe,Ie){if(null!==Xe&&"function"!=typeof Xe)throw xr.create("invalid-log-argument");(0,O.Am)(Xe,Ie)}function Gn(Xe){(0,O.Ub)(Xe)}const An="firebase-heartbeat-store";let kn=null;function hn(){return kn||(kn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Xe,Ie)=>{0===Ie&&Xe.createObjectStore(An)}}).catch(Xe=>{throw xr.create("idb-open",{originalErrorMessage:Xe.message})})),kn}function ut(){return(ut=(0,f.Z)(function*(Xe){try{return(yield hn()).transaction(An).objectStore(An).get(Fn(Xe))}catch(Ie){if(Ie instanceof ie.ZR)U.warn(Ie.message);else{const Je=xr.create("idb-get",{originalErrorMessage:Ie?.message});U.warn(Je.message)}}})).apply(this,arguments)}function rn(Xe,Ie){return dr.apply(this,arguments)}function dr(){return(dr=(0,f.Z)(function*(Xe,Ie){try{const Et=(yield hn()).transaction(An,"readwrite");return yield Et.objectStore(An).put(Ie,Fn(Xe)),Et.done}catch(Je){if(Je instanceof ie.ZR)U.warn(Je.message);else{const Et=xr.create("idb-set",{originalErrorMessage:Je?.message});U.warn(Et.message)}}})).apply(this,arguments)}function Fn(Xe){return`${Xe.name}!${Xe.options.appId}`}class ms{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new Xt(Je),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var Ie=this;return(0,f.Z)(function*(){const Et=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Jt();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!Ie._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Tt))return Ie._heartbeatsCache.heartbeats.push({date:Tt,agent:Et}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Ot=>{const j=new Date(Ot.date).valueOf();return Date.now()-j<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,f.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const Je=Jt(),{heartbeatsToSend:Et,unsentEntries:Tt}=function xi(Xe,Ie=1024){const Je=[];let Et=Xe.slice();for(const Tt of Xe){const Ot=Je.find(j=>j.agent===Tt.agent);if(Ot){if(Ot.dates.push(Tt.date),qn(Je)>Ie){Ot.dates.pop();break}}else if(Je.push({agent:Tt.agent,dates:[Tt.date]}),qn(Je)>Ie){Je.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:Je,unsentEntries:Et}}(Ie._heartbeatsCache.heartbeats),Ot=(0,ie.L)(JSON.stringify({version:2,heartbeats:Et}));return Ie._heartbeatsCache.lastSentHeartbeatDate=Je,Tt.length>0?(Ie._heartbeatsCache.heartbeats=Tt,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Ot})()}}function Jt(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,f.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function ft(Xe){return ut.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var Je=this;return(0,f.Z)(function*(){var Et;if(yield Je._canUseIndexedDBPromise){const Ot=yield Je.read();return rn(Je.app,{lastSentHeartbeatDate:null!==(Et=Ie.lastSentHeartbeatDate)&&void 0!==Et?Et:Ot.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var Je=this;return(0,f.Z)(function*(){var Et;if(yield Je._canUseIndexedDBPromise){const Ot=yield Je.read();return rn(Je.app,{lastSentHeartbeatDate:null!==(Et=Ie.lastSentHeartbeatDate)&&void 0!==Et?Et:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...Ie.heartbeats]})}})()}}function qn(Xe){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Xe})).length}!function Mr(Xe){Ar(new J.wA("platform-logger",Ie=>new ue(Ie),"PRIVATE")),Ar(new J.wA("heartbeat",Ie=>new ms(Ie),"PRIVATE")),yr(ce,"0.9.0",Xe),yr(ce,"0.9.0","esm2017"),yr("fire-js","")}("")},4859:(lt,Ce,k)=>{k.d(Ce,{H0:()=>ce,wA:()=>O});var f=k(5861),J=k(2090);class O{constructor(U,B,W){this.name=U,this.instanceFactory=B,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ie="[DEFAULT]";class re{constructor(U,B){this.name=U,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const B=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(B)){const W=new J.BH;if(this.instancesDeferred.set(B,W),this.isInitialized(B)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:B});ke&&W.resolve(ke)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(U){var B;const W=this.normalizeInstanceIdentifier(U?.identifier),ke=null!==(B=U?.optional)&&void 0!==B&&B;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(xe){if(ke)return null;throw xe}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ae(le){return"EAGER"===le.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[B,W]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(B);try{const xe=this.getOrInitializeService({instanceIdentifier:ke});W.resolve(xe)}catch{}}}}clearInstance(U=ie){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,f.Z)(function*(){const B=Array.from(U.instances.values());yield Promise.all([...B.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...B.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ie){return this.instances.has(U)}getOptions(U=ie){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:B={}}=U,W=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:W,options:B});for(const[xe,we]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(xe)&&we.resolve(ke);return ke}onInit(U,B){var W;const ke=this.normalizeInstanceIdentifier(B),xe=null!==(W=this.onInitCallbacks.get(ke))&&void 0!==W?W:new Set;xe.add(U),this.onInitCallbacks.set(ke,xe);const we=this.instances.get(ke);return we&&U(we,ke),()=>{xe.delete(U)}}invokeOnInitCallbacks(U,B){const W=this.onInitCallbacks.get(B);if(W)for(const ke of W)try{ke(U,B)}catch{}}getOrInitializeService({instanceIdentifier:U,options:B={}}){let W=this.instances.get(U);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(le=U,le===ie?void 0:le),options:B}),this.instances.set(U,W),this.instancesOptions.set(U,B),this.invokeOnInitCallbacks(W,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,W)}catch{}var le;return W||null}normalizeInstanceIdentifier(U=ie){return this.component?this.component.multipleInstances?U:ie:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const B=this.getProvider(U.name);if(B.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);B.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const B=new re(U,this);return this.providers.set(U,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Ce,k)=>{k.d(Ce,{Am:()=>le,Ub:()=>ce,Yd:()=>ae,in:()=>J});const f=[];var J=(()=>{return(U=J||(J={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",J;var U})();const O={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ie=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ue=(U,B,...W)=>{if(B<U.logLevel)return;const ke=(new Date).toISOString(),xe=re[B];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[xe](`[${ke}]  ${U.name}:`,...W)};class ae{constructor(B){this.name=B,this._logLevel=ie,this._logHandler=ue,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function ce(U){f.forEach(B=>{B.setLogLevel(U)})}function le(U,B){for(const W of f){let ke=null;B&&B.level&&(ke=O[B.level]),W.userLogHandler=null===U?null:(xe,we,...tt)=>{const ge=tt.map(de=>{if(null==de)return null;if("string"==typeof de)return de;if("number"==typeof de||"boolean"==typeof de)return de.toString();if(de instanceof Error)return de.message;try{return JSON.stringify(de)}catch{return null}}).filter(de=>de).join(" ");we>=(ke??xe.logLevel)&&U({level:J[we].toLowerCase(),message:ge,args:tt,type:xe.name})}}}},259:(lt,Ce,k)=>{k.d(Ce,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(9681);(0,f.registerVersion)("firebase","9.15.0","app")},9260:(lt,Ce,k)=>{k.d(Ce,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(lt,Ce,k)=>{k.r(Ce);var f=k(5861),J=k(3942),O=k(2090),ie=k(9681),re=k(1877),ue=k(655),ae=k(4859);const we=function ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},tt=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new re.Yd("@firebase/auth");function ot(y,...h){Qe.logLevel<=re.in.ERROR&&Qe.error(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}function Se(y,...h){throw Be(y,...h)}function ve(y,...h){return Be(y,...h)}function Ee(y,h,g){const _=Object.assign(Object.assign({},tt()),{[h]:g});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Ve(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Se(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const g=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return ge.create(y,...h)}function V(y,h,...g){if(!y)throw Be(h,...g)}function pe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw ot(h),new Error(h)}function q(y,h){y||pe(h)}const Q=new Map;function ne(y){q(y instanceof Function,"Expected a class definition");let h=Q.get(y);return h?(q(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Q.set(y,h),h)}function Re(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function dt(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class an{constructor(h,g){this.shortDelay=h,this.longDelay=g,q(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Lt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,h){q(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Zt{static initialize(h,g,_){this.fetchImpl=h,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ar=new an(3e4,6e4);function At(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function un(y,h,g,_){return $i.apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(y,h,g,_,S={}){return gi(y,S,(0,f.Z)(function*(){let N={},G={};_&&("GET"===h?G=_:N={body:JSON.stringify(_)});const he=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),Zt.fetch()(mi(y,y.config.apiHost,g,he),Object.assign({method:h,headers:Le,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function gi(y,h,g){return xr.apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Qt),h);try{const S=new ti(y),N=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw ni(y,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const he=N.ok?G.errorMessage:G.error.message,[Le,Ye]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw ni(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Le)throw ni(y,"email-already-in-use",G);if("USER_DISABLED"===Le)throw ni(y,"user-disabled",G);const yt=_[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Ee(y,yt,Ye);Se(y,yt)}}catch(S){if(S instanceof O.ZR)throw S;Se(y,"network-request-failed")}})).apply(this,arguments)}function $r(y,h,g,_){return js.apply(this,arguments)}function js(){return(js=(0,f.Z)(function*(y,h,g,_,S={}){const N=yield un(y,h,g,_,S);return"mfaPendingCredential"in N&&Se(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function mi(y,h,g,_){const S=`${h}${g}?${_}`;return y.config.emulator?mn(y.config,S):`${y.config.apiScheme}://${S}`}class ti{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Ar.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ni(y,h,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const S=ve(y,h,_);return S.customData._tokenResponse=g,S}function Ze(){return(Ze=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function yr(y,h){return gs.apply(this,arguments)}function gs(){return(gs=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Gn(y,h){return ri.apply(this,arguments)}function ri(){return(ri=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ai(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function hn(){return(hn=(0,f.Z)(function*(y,h=!1){const g=(0,O.m9)(y),_=yield g.getIdToken(h),S=ut(_);V(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,G=N?.sign_in_provider;return{claims:S,token:_,authTime:Ai(ft(S.auth_time)),issuedAtTime:Ai(ft(S.iat)),expirationTime:Ai(ft(S.exp)),signInProvider:G||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function ut(y){const[h,g,_]=y.split(".");if(void 0===h||void 0===g||void 0===_)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(g);return S?JSON.parse(S):(ot("Failed to decode base64 JWT payload"),null)}catch(S){return ot("Caught error parsing JWT payload as JSON",S?.toString()),null}}function dr(y,h){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&Hr(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function Hr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class bt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),_)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class ms{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ai(this.lastLoginAt),this.creationTime=Ai(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jt(y){return xi.apply(this,arguments)}function xi(){return(xi=(0,f.Z)(function*(y){var h;const g=y.auth,_=yield y.getIdToken(),S=yield dr(y,Gn(g,{idToken:_}));V(S?.users.length,g,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const G=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?Xe(N.providerUserInfo):[],he=Mr(y.providerData,G),yt=!!y.isAnonymous&&!(y.email&&N.passwordHash||he?.length),gt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:he,metadata:new ms(N.createdAt,N.lastLoginAt),isAnonymous:yt};Object.assign(y,gt)})).apply(this,arguments)}function qn(){return(qn=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield Jt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Mr(y,h){return[...y.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}function Xe(y){return y.map(h=>{var{providerId:g}=h,_=(0,ue._T)(h,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Je(){return(Je=(0,f.Z)(function*(y,h){const g=yield gi(y,{},(0,f.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,G=mi(y,S,"/v1/token",`key=${N}`),he=yield y._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(G,{method:"POST",headers:he,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function rn(y){const h=ut(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var _=this;return(0,f.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var _=this;return(0,f.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:G}=yield function Ie(y,h){return Je.apply(this,arguments)}(h,g);_.updateTokensAndExpiration(S,N,Number(G))})()}updateTokensAndExpiration(h,g,_){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,g){const{refreshToken:_,accessToken:S,expirationTime:N}=g,G=new Et;return _&&(V("string"==typeof _,"internal-error",{appName:h}),G.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:h}),G.accessToken=S),N&&(V("number"==typeof N,"internal-error",{appName:h}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Et,this.toJSON())}_performRefresh(){return pe("not implemented")}}function Tt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Ot{constructor(h){var{uid:g,auth:_,stsTokenManager:S}=h,N=(0,ue._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new ms(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const _=yield dr(g,g.stsTokenManager.getToken(g.auth,h));return V(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(h){return function kn(y){return hn.apply(this,arguments)}(this,h)}reload(){return function Xt(y){return qn.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Ot(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var _=this;return(0,f.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),g&&(yield Jt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield dr(h,function Zo(y,h){return Ze.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var _,S,N,G,he,Le,Ye,yt;const gt=null!==(_=g.displayName)&&void 0!==_?_:void 0,gr=null!==(S=g.email)&&void 0!==S?S:void 0,Er=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,ao=null!==(G=g.photoURL)&&void 0!==G?G:void 0,hg=null!==(he=g.tenantId)&&void 0!==he?he:void 0,Mf=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,fg=null!==(Ye=g.createdAt)&&void 0!==Ye?Ye:void 0,tw=null!==(yt=g.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:My,emailVerified:pg,isAnonymous:$u,providerData:gg,stsTokenManager:Ry}=g;V(My&&Ry,h,"internal-error");const nw=Et.fromJSON(this.name,Ry);V("string"==typeof My,h,"internal-error"),Tt(gt,h.name),Tt(gr,h.name),V("boolean"==typeof pg,h,"internal-error"),V("boolean"==typeof $u,h,"internal-error"),Tt(Er,h.name),Tt(ao,h.name),Tt(hg,h.name),Tt(Mf,h.name),Tt(fg,h.name),Tt(tw,h.name);const ct=new Ot({uid:My,auth:h,email:gr,emailVerified:pg,displayName:gt,isAnonymous:$u,photoURL:ao,phoneNumber:Er,tenantId:hg,stsTokenManager:nw,createdAt:fg,lastLoginAt:tw});return gg&&Array.isArray(gg)&&(ct.providerData=gg.map(rs=>Object.assign({},rs))),Mf&&(ct._redirectEventId=Mf),ct}static _fromIdTokenResponse(h,g,_=!1){return(0,f.Z)(function*(){const S=new Et;S.updateFromServerResponse(g);const N=new Ot({uid:g.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield Jt(N),N})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,_){var S=this;return(0,f.Z)(function*(){S.storage[g]=_})()}_get(g){var _=this;return(0,f.Z)(function*(){const S=_.storage[g];return void 0===S?null:S})()}_remove(g){var _=this;return(0,f.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function z(y,h,g){return`firebase:${y}:${h}:${g}`}class _e{constructor(h,g,_){this.persistence=h,this.auth=g,this.userKey=_;const{config:S,name:N}=this.auth;this.fullUserKey=z(this.userKey,S.apiKey,N),this.fullPersistenceKey=z("persistence",S.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Ot._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,_="authUser"){return(0,f.Z)(function*(){if(!g.length)return new _e(ne(L),h,_);const S=(yield Promise.all(g.map(function(){var Ye=(0,f.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let N=S[0]||ne(L);const G=z(_,h.config.apiKey,h.name);let he=null;for(const Ye of g)try{const yt=yield Ye._get(G);if(yt){const gt=Ot._fromJSON(h,yt);Ye!==N&&(he=gt),N=Ye;break}}catch{}const Le=S.filter(Ye=>Ye._shouldAllowMigration);return N._shouldAllowMigration&&Le.length?(N=Le[0],he&&(yield N._set(G,he.toJSON())),yield Promise.all(g.map(function(){var Ye=(0,f.Z)(function*(yt){if(yt!==N)try{yield yt._remove(G)}catch{}});return function(yt){return Ye.apply(this,arguments)}}())),new _e(N,h,_)):new _e(N,h,_)})()}}function K(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(dn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if($e(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Fe(h))return"Blackberry";if(je(h))return"Webos";if(ht(h))return"Safari";if((h.includes("chrome/")||Kt(h))&&!h.includes("edge/"))return"Chrome";if(qt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function $e(y=(0,O.z$)()){return/firefox\//i.test(y)}function ht(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Kt(y=(0,O.z$)()){return/crios\//i.test(y)}function dn(y=(0,O.z$)()){return/iemobile/i.test(y)}function qt(y=(0,O.z$)()){return/android/i.test(y)}function Fe(y=(0,O.z$)()){return/blackberry/i.test(y)}function je(y=(0,O.z$)()){return/webos/i.test(y)}function Pt(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function $s(y=(0,O.z$)()){return Pt(y)||qt(y)||je(y)||Fe(y)||/windows phone/i.test(y)||dn(y)}function ys(y,h=[]){let g;switch(y){case"Browser":g=K((0,O.z$)());break;case"Worker":g=`${K((0,O.z$)())}-${y}`;break;default:g=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ie.SDK_VERSION}/${_}`}class wo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const _=N=>new Promise((G,he)=>{try{G(h(N))}catch(Le){he(Le)}});_.onAbort=g,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){if(g.auth.currentUser===h)return;const _=[];try{for(const S of g.queue)yield S(h),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const N of _)try{N()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class xt{constructor(h,g,_){this.app=h,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hs(this),this.idTokenSubscription=new Hs(this),this.beforeStateQueue=new wo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,g){var _=this;return g&&(this._popupRedirectResolver=ne(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var S,N;if(!_._deleted&&(_.persistenceManager=yield _e.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var _;const S=yield g.assertedPersistence.getCurrentUser();let N=S,G=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const he=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,Le=N?._redirectEventId,Ye=yield g.tryRedirectSignIn(h);(!he||he===Le)&&Ye?.user&&(N=Ye.user,G=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(G)try{yield g.beforeStateQueue.runMiddleware(N)}catch(he){N=S,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(he))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return V(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield Jt(h)}catch(_){if("auth/network-request-failed"!==_?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(h,g=!1){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,g,_){return this.registerStateListener(this.authStateSubscription,h,g,_)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,_){return this.registerStateListener(this.idTokenSubscription,h,g,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var _=this;return(0,f.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(g);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const _=h&&ne(h)||g._popupRedirectResolver;V(_,g,"argument-error"),g.redirectPersistenceManager=yield _e.create(g,[ne(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var _,S;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===h?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,_,S){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof g?h.addObserver(g,_,S):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ys(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function _n(y){return(0,O.m9)(y)}class Hs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function vs(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class hr{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return pe("not implemented")}_getIdTokenResponse(h){return pe("not implemented")}_linkToIdToken(h,g){return pe("not implemented")}_getReauthenticationResolver(h){return pe("not implemented")}}function Vn(y,h){return Za.apply(this,arguments)}function Za(){return(Za=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:resetPassword",At(y,h))})).apply(this,arguments)}function cn(y,h){return _c.apply(this,arguments)}function _c(){return(_c=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wc(y,h){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",At(y,h))})).apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPassword",At(y,h))})).apply(this,arguments)}function Es(y,h){return yi.apply(this,arguments)}function yi(){return(yi=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:sendOobCode",At(y,h))})).apply(this,arguments)}function fr(y,h){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,f.Z)(function*(y,h){return Es(y,h)})).apply(this,arguments)}function rr(y,h){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(y,h){return Es(y,h)})).apply(this,arguments)}function Ka(y,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(y,h){return Es(y,h)})).apply(this,arguments)}function Ic(y,h){return vr.apply(this,arguments)}function vr(){return(vr=(0,f.Z)(function*(y,h){return Es(y,h)})).apply(this,arguments)}function Xl(){return(Xl=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithEmailLink",At(y,h))})).apply(this,arguments)}function Dc(){return(Dc=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithEmailLink",At(y,h))})).apply(this,arguments)}class Cc extends hr{constructor(h,g,_,S=null){super("password",_),this._email=h,this._password=g,this._tenantId=S}static _fromEmailAndPassword(h,g){return new Cc(h,g,"password")}static _fromEmailAndCode(h,g,_=null){return new Cc(h,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function Ko(y,h){return ws.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Zh(y,h){return Xl.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Se(h,"internal-error")}})()}_linkToIdToken(h,g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return cn(h,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Kh(y,h){return Dc.apply(this,arguments)}(h,{idToken:g,email:_._email,oobCode:_._password});default:Se(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Wn(y,h){return ed.apply(this,arguments)}function ed(){return(ed=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithIdp",At(y,h))})).apply(this,arguments)}class Hi extends hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Hi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Se("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=g,N=(0,ue._T)(g,["providerId","signInMethod"]);if(!_||!S)return null;const G=new Hi(_,S);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(h){return Wn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Wn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Wn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,O.xO)(g)}return h}}function qp(y,h){return td.apply(this,arguments)}function td(){return(td=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:sendVerificationCode",At(y,h))})).apply(this,arguments)}function Is(){return(Is=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,h))})).apply(this,arguments)}function nd(){return(nd=(0,f.Z)(function*(y,h){const g=yield $r(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,h));if(g.temporaryProof)throw ni(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Wp={USER_NOT_FOUND:"user-not-found"};function rd(){return(rd=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",At(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Wp)})).apply(this,arguments)}class Ds extends hr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Ds({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Ds({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function bc(y,h){return Is.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function zp(y,h){return nd.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Zp(y,h){return rd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:_,verificationCode:S}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:N}=h;return _||g||S||N?new Ds({verificationId:g,verificationCode:_,phoneNumber:S,temporaryProof:N}):null}}class Ya{constructor(h){var g,_,S,N,G,he;const Le=(0,O.zd)((0,O.pd)(h)),Ye=null!==(g=Le.apiKey)&&void 0!==g?g:null,yt=null!==(_=Le.oobCode)&&void 0!==_?_:null,gt=function id(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Le.mode)&&void 0!==S?S:null);V(Ye&&yt&&gt,"argument-error"),this.apiKey=Ye,this.operation=gt,this.code=yt,this.continueUrl=null!==(N=Le.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=Le.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(he=Le.tenantId)&&void 0!==he?he:null}static parseLink(h){const g=function sd(y){const h=(0,O.zd)((0,O.pd)(y)).link,g=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||g||h||y}(h);try{return new Ya(g)}catch{return null}}}let Ri=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return Cc._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const S=Ya.parseLink(_);return V(S,"argument-error"),Cc._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Gi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class qi extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class qs extends qi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return V("providerId"in g&&"signInMethod"in g,"argument-error"),Hi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Hi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return qs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return qs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:N,nonce:G,providerId:he}=h;if(!_&&!S&&!g&&!N||!he)return null;try{return new qs(he)._credential({idToken:g,accessToken:_,nonce:G,pendingToken:N})}catch{return null}}}let Qo=(()=>{class y extends qi{constructor(){super("facebook.com")}static credential(g){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Qa=(()=>{class y extends qi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:S}=g;if(!_&&!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Tc=(()=>{class y extends qi{constructor(){super("github.com")}static credential(g){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Jo extends hr{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Wn(h,this.buildRequest())}_linkToIdToken(h,g){const _=this.buildRequest();return _.idToken=g,Wn(h,_)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Wn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:N}=g;return _&&S&&N&&_===S?new Jo(_,N):null}static _create(h,g){return new Jo(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ii extends Gi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ii.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ii.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Jo.fromJSON(h);return V(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:_}=h;if(!g||!_)return null;try{return Jo._create(_,g)}catch{return null}}}let qr=(()=>{class y extends qi{constructor(){super("twitter.com")}static credential(g,_){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=g;if(!_||!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Eo(y,h){return od.apply(this,arguments)}function od(){return(od=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signUp",At(y,h))})).apply(this,arguments)}class pr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,_,S=!1){return(0,f.Z)(function*(){const N=yield Ot._fromIdTokenResponse(h,_,S),G=Jh(_);return new pr({user:N,providerId:G,_tokenResponse:_,operationType:g})})()}static _forOperation(h,g,_){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=Jh(_);return new pr({user:h,providerId:S,_tokenResponse:_,operationType:g})})()}}function Jh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function In(){return(In=(0,f.Z)(function*(y){var h;const g=_n(y);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new pr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield Eo(g,{returnSecureToken:!0}),S=yield pr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ja extends O.ZR{constructor(h,g,_,S){var N;super(g.code,g.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,g,_,S){return new Ja(h,g,_,S)}}function ef(y,h,g,_){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ja._fromErrorAndOperation(y,N,h,_):N})}function si(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Xa(){return(Xa=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);yield zt(!0,g,h);const{providerUserInfo:_}=yield yr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),S=si(_||[]);return g.providerData=g.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Io(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,f.Z)(function*(y,h,g=!1){const _=yield dr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return pr._forOperation(y,"link",_)})).apply(this,arguments)}function zt(y,h,g){return eu.apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(y,h,g){yield Jt(h);const S=!1===y?"provider-already-linked":"no-such-provider";V(si(h.providerData).has(g)===y,h.auth,S)})).apply(this,arguments)}function zs(y,h){return tu.apply(this,arguments)}function tu(){return(tu=(0,f.Z)(function*(y,h,g=!1){const{auth:_}=y,S="reauthenticate";try{const N=yield dr(y,ef(_,S,h,y),g);V(N.idToken,_,"internal-error");const G=ut(N.idToken);V(G,_,"internal-error");const{sub:he}=G;return V(y.uid===he,_,"user-mismatch"),pr._forOperation(y,S,N)}catch(N){throw"auth/user-not-found"===N?.code&&Se(_,"user-mismatch"),N}})).apply(this,arguments)}function vi(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(y,h,g=!1){const _="signIn",S=yield ef(y,_,h),N=yield pr._fromIdTokenResponse(y,_,S);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function wn(y,h){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(y,h){return vi(_n(y),h)})).apply(this,arguments)}function ru(y,h){return tf.apply(this,arguments)}function tf(){return(tf=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y);return yield zt(!1,g,h.providerId),Io(g,h)})).apply(this,arguments)}function iu(y,h){return su.apply(this,arguments)}function su(){return(su=(0,f.Z)(function*(y,h){return zs((0,O.m9)(y),h)})).apply(this,arguments)}function Sc(y,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,f.Z)(function*(y,h){return $r(y,"POST","/v1/accounts:signInWithCustomToken",At(y,h))})).apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(y,h){const g=_n(y),_=yield Sc(g,{token:h,returnSecureToken:!0}),S=yield pr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class De{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?jt._fromServerResponse(h,g):Se(h,"internal-error")}}class jt extends De{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new jt(g)}}function ou(y,h,g){var _;V((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(V(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(V(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Dn(){return(Dn=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};g&&ou(_,S,g),yield rr(_,S)})).apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(y,h,g){yield Vn((0,O.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function ea(){return(ea=(0,f.Z)(function*(y,h){yield wc((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function ta(y,h){return xc.apply(this,arguments)}function xc(){return(xc=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),_=yield Vn(g,{oobCode:h}),S=_.requestType;switch(V(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,g,"internal-error");default:V(_.email,g,"internal-error")}let N=null;return _.mfaInfo&&(N=De._fromServerResponse(_n(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function ad(){return(ad=(0,f.Z)(function*(y,h){const{data:g}=yield ta((0,O.m9)(y),h);return g.email})).apply(this,arguments)}function Cn(){return(Cn=(0,f.Z)(function*(y,h,g){const _=_n(y),S=yield Eo(_,{returnSecureToken:!0,email:h,password:g}),N=yield pr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(g.handleCodeInApp,_,"argument-error"),g&&ou(_,S,g),yield Ka(_,S)})).apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),S=Ri.credentialWithLink(h,g||Re());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),wn(_,S)})).apply(this,arguments)}function Yp(y,h){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:createAuthUri",At(y,h))})).apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(y,h){const _={identifier:h,continueUri:dt()?Re():"http://localhost"},{signinMethods:S}=yield Yp((0,O.m9)(y),_);return S||[]})).apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(y,h){const g=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ou(g.auth,S,h);const{email:N}=yield fr(g.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function lu(){return(lu=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&ou(_.auth,N,g);const{email:G}=yield Ic(_.auth,N);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function du(y,h){return kc.apply(this,arguments)}function kc(){return(kc=(0,f.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Lc(){return(Lc=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const _=(0,O.m9)(y),N={idToken:yield _.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},G=yield dr(_,du(_.auth,N));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const he=_.providerData.find(({providerId:Le})=>"password"===Le);he&&(he.displayName=_.displayName,he.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function Ks(y,h,g){return hu.apply(this,arguments)}function hu(){return(hu=(0,f.Z)(function*(y,h,g){const{auth:_}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),g&&(N.password=g);const G=yield dr(y,cn(_,N));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class zr{constructor(h,g,_={}){this.isNewUser=h,this.providerId=g,this.profile=_}}class fn extends zr{constructor(h,g,_,S){super(h,g,_),this.username=S}}class cd extends zr{constructor(h,g){super(h,"facebook.com",g)}}class Vc extends fn{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class nf extends zr{constructor(h,g){super(h,"google.com",g)}}class Uc extends fn{constructor(h,g,_){super(h,"twitter.com",g,_)}}function fu(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Zn(y){var h,g;if(!y)return null;const{providerId:_}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const G=null===(g=null===(h=ut(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new zr(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new cd(N,S);case"github.com":return new Vc(N,S);case"google.com":return new nf(N,S);case"twitter.com":return new Uc(N,S,y.screenName||null);case"custom":case"anonymous":return new zr(N,null);default:return new zr(N,_,S)}}(g)}class Qs{constructor(h,g,_){this.type=h,this.credential=g,this.auth=_}static _fromIdtoken(h,g){return new Qs("enroll",h,g)}static _fromMfaPendingCredential(h){return new Qs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,_;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Qs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Qs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class gu{constructor(h,g,_){this.session=h,this.hints=g,this.signInResolver=_}static _fromError(h,g){const _=_n(h),S=g.customData._serverResponse,N=(S.mfaInfo||[]).map(he=>De._fromServerResponse(_,he));V(S.mfaPendingCredential,_,"internal-error");const G=Qs._fromMfaPendingCredential(S.mfaPendingCredential);return new gu(G,N,function(){var he=(0,f.Z)(function*(Le){const Ye=yield Le._process(_,G);delete S.mfaInfo,delete S.mfaPendingCredential;const yt=Object.assign(Object.assign({},S),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(g.operationType){case"signIn":const gt=yield pr._fromIdTokenResponse(_,g.operationType,yt);return yield _._updateCurrentUser(gt.user),gt;case"reauthenticate":return V(g.user,_,"internal-error"),pr._forOperation(g.user,g.operationType,yt);default:Se(_,"internal-error")}});return function(Le){return he.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function mu(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:start",At(y,h))}class rf{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>De._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new rf(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Qs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var _=this;return(0,f.Z)(function*(){const S=h,N=yield _.getSession(),G=yield dr(_.user,S._process(_.user.auth,N,g));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const _="string"==typeof h?h:h.uid,S=yield g.user.getIdToken(),N=yield dr(g.user,function fd(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:withdraw",At(y,h))}(g.user.auth,{idToken:S,mfaEnrollmentId:_}));g.enrolledFactors=g.enrolledFactors.filter(({uid:G})=>G!==_),yield g.user._updateTokensIfNecessary(N);try{yield g.user.reload()}catch(G){if("auth/user-token-expired"!==G?.code)throw G}})()}}const To=new WeakMap,Js="__sak";class vu{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Js,"1"),this.storage.removeItem(Js),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const aa=(()=>{class y extends vu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oa(){const y=(0,O.z$)();return ht(y)||Pt(y)}()&&function yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=$s(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),N=this.localCache[_];S!==N&&g(_,N,S)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((he,Le,Ye)=>{this.notifyListeners(he,Ye)});const S=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(S);if(g.newValue!==he)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!_)return}const N=()=>{const he=this.storage.getItem(S);!_&&this.localCache[S]===he||this.notifyListeners(S,he)},G=this.storage.getItem(S);!function zn(){return(0,O.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var S=()=>super._set,N=this;return(0,f.Z)(function*(){yield S().call(N,g,_),N.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,S=this;return(0,f.Z)(function*(){const N=yield _().call(S,g);return S.localCache[g]=JSON.stringify(N),N})()}_remove(g){var _=()=>super._remove,S=this;return(0,f.Z)(function*(){yield _().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),Oi=(()=>{class y extends vu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let md=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(N=>N.isListeningto(g));if(_)return _;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,f.Z)(function*(){const S=g,{eventId:N,eventType:G,data:he}=S.data,Le=_.handlersMap[G];if(!Le?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const Ye=Array.from(Le).map(function(){var gt=(0,f.Z)(function*(gr){return gr(S.origin,he)});return function(gr){return gt.apply(this,arguments)}}()),yt=yield function ca(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return h.apply(this,arguments)}}()))}(Ye);S.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:yt})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function la(y="",h=10){let g="";for(let _=0;_<h;_++)g+=Math.floor(10*Math.random());return y+g}class Bc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,_=50){var S=this;return(0,f.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,he;return new Promise((Le,Ye)=>{const yt=la("",20);N.port1.start();const gt=setTimeout(()=>{Ye(new Error("unsupported_event"))},_);he={messageChannel:N,onMessage(gr){const Er=gr;if(Er.data.eventId===yt)switch(Er.data.status){case"ack":clearTimeout(gt),G=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Le(Er.data.response);break;default:clearTimeout(gt),clearTimeout(G),Ye(new Error("invalid_response"))}}},S.handlers.add(he),N.port1.addEventListener("message",he.onMessage),S.target.postMessage({eventType:h,eventId:yt,data:g},[N.port2])}).finally(()=>{he&&S.removeMessageHandler(he)})})()}}function xn(){return window}function _u(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function da(){return(da=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ts="firebaseLocalStorageDb",Ss="firebaseLocalStorage",jc="fbase_key";class eo{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ha(y,h){return y.transaction([Ss],h?"readwrite":"readonly").objectStore(Ss)}function Ao(){const y=indexedDB.open(Ts,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Ss,{keyPath:jc})}catch(S){g(S)}}),y.addEventListener("success",(0,f.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Ss)?h(_):(_.close(),yield function vd(){const y=indexedDB.deleteDatabase(Ts);return new eo(y).toPromise()}(),h(yield Ao()))}))})}function Yi(y,h,g){return $c.apply(this,arguments)}function $c(){return($c=(0,f.Z)(function*(y,h,g){const _=ha(y,!0).put({[jc]:h,value:g});return new eo(_).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(y,h){const g=ha(y,!1).get(h),_=yield new eo(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function to(y,h){const g=ha(y,!0).delete(h);return new eo(g).toPromise()}const xo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Ao()),g.db})()}_withRetries(g){var _=this;return(0,f.Z)(function*(){let S=0;for(;;)try{const N=yield _._openDb();return yield g(N)}catch(N){if(S++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return _u()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=md._getInstance(function Eu(){return _u()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,f.Z)(function*(S,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(S,N){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,f.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var _,S;if(g.activeServiceWorker=yield function Xs(){return da.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Bc(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(_=N[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,f.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function wu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ao();return yield Yi(g,Js,"1"),yield to(g,Js),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,f.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var S=this;return(0,f.Z)(function*(){return S._withPendingWrite((0,f.Z)(function*(){return yield S._withRetries(N=>Yi(N,g,_)),S.localCache[g]=_,S.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,f.Z)(function*(){const S=yield _._withRetries(N=>function Iu(y,h){return fa.apply(this,arguments)}(N,g));return _.localCache[g]=S,S})()}_remove(g){var _=this;return(0,f.Z)(function*(){return _._withPendingWrite((0,f.Z)(function*(){return yield _._withRetries(S=>to(S,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const _=yield g._withRetries(G=>{const he=ha(G,!1).getAll();return new eo(he).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:G,value:he}of _)N.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(he)&&(g.notifyListeners(G,he),S.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!N.has(G)&&(g.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(g,_){this.localCache[g]=_;const S=this.listeners[g];if(S)for(const N of Array.from(S))N(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Mo(y,h){return un(y,"POST","/v2/accounts/mfaSignIn:start",At(y,h))}function As(){return(As=(0,f.Z)(function*(y){return(yield un(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function No(y){return new Promise((h,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=S=>{const N=ve("internal-error");N.customData=S,g(N)},_.type="text/javascript",_.charset="UTF-8",function Ro(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function bu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const pa=1e12;class pn{constructor(h){this.auth=h,this.counter=pa,this._widgets=new Map}render(h,g){const _=this.counter;return this._widgets.set(_,new Qp(h,this.auth.name,g||{})),this.counter++,_}reset(h){var g;const _=h||pa;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(h){var g;return(null===(g=this._widgets.get(h||pa))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var _;return null===(_=g._widgets.get(h||pa))||void 0===_||_.execute(),""})()}}class Qp{constructor(h,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function hy(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jp=bu("rcb"),fy=new an(3e4,6e4);class sf{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=xn().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return V(function j0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(xn().grecaptcha):new Promise((_,S)=>{const N=xn().setTimeout(()=>{S(ve(h,"network-request-failed"))},fy.get());xn()[Jp]=()=>{xn().clearTimeout(N),delete xn()[Jp];const he=xn().grecaptcha;if(!he)return void S(ve(h,"internal-error"));const Le=he.render;he.render=(Ye,yt)=>{const gt=Le(Ye,yt);return this.counter++,gt},this.hostLanguage=g,_(he)},No(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Jp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),S(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=xn().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gc{load(h){return(0,f.Z)(function*(){return new pn(h)})()}clearedOneInstance(){}}const gy="recaptcha",my={theme:"light",type:"image"};class sr{constructor(h,g=Object.assign({},my),_){this.parameters=g,this.type=gy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gc:new sf,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(g)||new Promise(N=>{const G=he=>{!he||(h.tokenChangeListeners.delete(G),N(he))};h.tokenChangeListeners.add(G),h.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof h)h(g);else if("string"==typeof h){const _=xn()[h];"function"==typeof _&&_(g)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){V(dt()&&!_u(),h.auth,"internal-error"),yield function ln(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Wr(y){return As.apply(this,arguments)}(h.auth);V(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nr{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Ds._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function Tu(){return(Tu=(0,f.Z)(function*(y,h,g){const _=_n(y),S=yield Ei(_,h,(0,O.m9)(g));return new Nr(S,N=>wn(_,N))})).apply(this,arguments)}function wi(){return(wi=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);yield zt(!1,_,"phone");const S=yield Ei(_.auth,h,(0,O.m9)(g));return new Nr(S,N=>ru(_,N))})).apply(this,arguments)}function Po(){return(Po=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y),S=yield Ei(_.auth,h,(0,O.m9)(g));return new Nr(S,N=>iu(_,N))})).apply(this,arguments)}function Ei(y,h,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(y,h,g){var _;const S=yield g.verify();try{let N;if(V("string"==typeof S,y,"argument-error"),V(g.type===gy,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const G=N.session;if("phoneNumber"in N)return V("enroll"===G.type,y,"internal-error"),(yield mu(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const he=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return V(he,y,"missing-multi-factor-info"),(yield Mo(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield qp(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return G}}finally{g._reset()}})).apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(y,h){yield Io((0,O.m9)(y),h)})).apply(this,arguments)}let Su=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=_n(g)}verifyPhoneNumber(g,_){return Ei(this.auth,g,(0,O.m9)(_))}static credential(g,_){return Ds._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:S}=g;return _&&S?Ds._fromTokenResponse(_,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ko(y,h){return h?ne(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ga extends hr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Wn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Wn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Wn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Or(y){return vi(y.auth,new ga(y),y.bypassAuthState)}function ma(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),zs(g,new ga(y),y.bypassAuthState)}function Xi(y){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return V(g,h,"internal-error"),Io(g,new ga(y),y.bypassAuthState)})).apply(this,arguments)}class Pr{constructor(h,g,_,S,N=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(_,S){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:N,tenantId:G,error:he,type:Le}=h;if(he)return void g.reject(he);const Ye={auth:g.auth,requestUri:_,sessionId:S,tenantId:G||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Ye))}catch(yt){g.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Or;case"linkViaPopup":case"linkViaRedirect":return Xi;case"reauthViaPopup":case"reauthViaRedirect":return ma;default:Se(this.auth,"internal-error")}}resolve(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zc=new an(2e3,1e4);function ya(){return(ya=(0,f.Z)(function*(y,h,g){const _=_n(y);Ve(y,h,Gi);const S=ko(_,g);return new Kr(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function _d(){return(_d=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Gi);const S=ko(_.auth,g);return new Kr(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function va(){return(va=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Gi);const S=ko(_.auth,g);return new Kr(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let Kr=(()=>{class y extends Pr{constructor(g,_,S,N,G){super(g,_,N,G),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const _=yield g.execute();return V(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,f.Z)(function*(){q(1===g.filter.length,"Popup operations only handle one event");const _=la();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,zc.get())};g()}}return y.currentPopupAction=null,y})();const gn=new Map;class ki extends Pr{constructor(h,g,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let _=gn.get(g.auth._key());if(!_){try{const N=(yield function xu(y,h){return xs.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;_=()=>Promise.resolve(N)}catch(S){_=()=>Promise.reject(S)}gn.set(g.auth._key(),_)}return g.bypassAuthState||gn.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,_=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,g().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function xs(){return(xs=(0,f.Z)(function*(y,h){const g=Wc(h),_=es(y);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(g));return yield _._remove(g),S})).apply(this,arguments)}function Mu(y,h){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(y,h){return es(y)._set(Wc(h),"true")})).apply(this,arguments)}function ro(y,h){gn.set(y._key(),h)}function es(y){return ne(y._redirectPersistence)}function Wc(y){return z("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,f.Z)(function*(y,h,g){const _=_n(y);Ve(y,h,Gi);const S=ko(_,g);return yield Mu(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Gi);const S=ko(_.auth,g);yield Mu(S,_.auth);const N=yield _t(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function be(){return(be=(0,f.Z)(function*(y,h,g){const _=(0,O.m9)(y);Ve(_.auth,h,Gi);const S=ko(_.auth,g);yield zt(!1,_,h.providerId),yield Mu(S,_.auth);const N=yield _t(_);return S._openRedirect(_.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function nt(){return(nt=(0,f.Z)(function*(y,h){return yield _n(y)._initializationPromise,it(y,h,!1)})).apply(this,arguments)}function it(y,h){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,f.Z)(function*(y,h,g=!1){const _=_n(y),S=ko(_,h),G=yield new ki(_,S,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,h)),G})).apply(this,arguments)}function _t(y){return Un.apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(y){const h=la(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ms{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(g=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function or(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return so(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var _;if(h.error&&!so(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,S))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const _=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(io(h))}saveEventToCache(h){this.cachedEventUids.add(io(h)),this.lastProcessedEventTime=Date.now()}}function io(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function so({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function kr(y){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,f.Z)(function*(y,h={}){return un(y,"GET","/v1/projects",h)})).apply(this,arguments)}const _a=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uf=/^https?/;function yy(){return(yy=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield kr(y);for(const g of h)try{if(Zc(g))return}catch{}Se(y,"unauthorized-domain")})).apply(this,arguments)}function Zc(y){const h=Re(),{protocol:g,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===_}if(!uf.test(g))return!1;if(_a.test(y))return _===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const Kc=new an(3e4,6e4);function Id(){const y=xn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Yc=null;function cf(y){return Yc=Yc||function wa(y){return new Promise((h,g)=>{var _,S,N;function G(){Id(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Id(),g(ve(y,"network-request-failed"))},timeout:Kc.get()})}if(null!==(S=null===(_=xn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=xn().gapi)||void 0===N||!N.load){const he=bu("iframefcb");return xn()[he]=()=>{gapi.load?G():g(ve(y,"network-request-failed"))},No(`https://apis.google.com/js/api.js?onload=${he}`).catch(Le=>g(Le))}G()}}).catch(h=>{throw Yc=null,h})}(y),Yc}const eg=new an(5e3,15e3),$D={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G0(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?mn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:ie.SDK_VERSION},S=H0.get(y.config.apiHost);S&&(_.eid=S);const N=y._getFrameworks();return N.length&&(_.fw=N.join(",")),`${g}?${(0,O.xO)(_).slice(1)}`}function _y(){return _y=(0,f.Z)(function*(y){const h=yield cf(y),g=xn().gapi;return V(g,y,"internal-error"),h.open({where:document.body,url:G0(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$D,dontclear:!0},_=>new Promise(function(){var S=(0,f.Z)(function*(N,G){yield _.restyle({setHideOnLeave:!1});const he=ve(y,"network-request-failed"),Le=xn().setTimeout(()=>{G(he)},eg.get());function Ye(){xn().clearTimeout(Le),N(_)}_.ping(Ye).then(Ye,()=>{G(he)})});return function(N,G){return S.apply(this,arguments)}}()))}),_y.apply(this,arguments)}const q0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lf{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ru(y,h,g,_,S,N){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:ie.SDK_VERSION,eventId:S};if(h instanceof Gi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Le,Ye]of Object.entries(N||{}))G[Le]=Ye}if(h instanceof qi){const Le=h.getScopes().filter(Ye=>""!==Ye);Le.length>0&&(G.scopes=Le.join(","))}y.tenantId&&(G.tid=y.tenantId);const he=G;for(const Le of Object.keys(he))void 0===he[Le]&&delete he[Le];return`${function df({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(he).slice(1)}`}const Nu="webStorageSupport";class Td extends class ng{constructor(h){this.factorId=h}_process(h,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,_);case"signin":return this._finalizeSignIn(h,g.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Td(h)}_finalizeEnroll(h,g,_){return function yu(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:finalize",At(y,h))}(h,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Cu(y,h){return un(y,"POST","/v2/accounts/mfaSignIn:finalize",At(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jc=(()=>{class y{constructor(){}static assertion(g){return Td._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Vo="@firebase/auth";class K0{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ns(){return window}function Ad(){return(Ad=(0,f.Z)(function*(y,h,g){var _;const{BuildInfo:S}=ns();q(h.sessionId,"AuthEvent did not contain a session ID");const N=yield gf(h.sessionId),G={};return Pt()?G.ibi=S.packageName:qt()?G.apn=S.packageName:Se(y,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=N,Ru(y,g,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function hf(){return(hf=(0,f.Z)(function*(y){const{BuildInfo:h}=ns(),g={};Pt()?g.iosBundleId=h.packageName:qt()?g.androidPackageName=h.packageName:Se(y,"operation-not-supported-in-this-environment"),yield kr(y,g)})).apply(this,arguments)}function pf(){return(pf=(0,f.Z)(function*(y,h,g){const{cordova:_}=ns();let S=()=>{};try{yield new Promise((N,G)=>{let he=null;function Le(){var gt;N();const gr=null===(gt=_.plugins.browsertab)||void 0===gt?void 0:gt.close;"function"==typeof gr&&gr(),"function"==typeof g?.close&&g.close()}function Ye(){he||(he=window.setTimeout(()=>{G(ve(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Ye()}h.addPassiveListener(Le),document.addEventListener("resume",Ye,!1),qt()&&document.addEventListener("visibilitychange",yt,!1),S=()=>{h.removePassiveListener(Le),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",yt,!1),he&&window.clearTimeout(he)}})}finally{S()}})).apply(this,arguments)}function gf(y){return sg.apply(this,arguments)}function sg(){return(sg=(0,f.Z)(function*(y){const h=mf(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function mf(y){if(q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}(0,O.Pz)("authIdTokenMaxAge"),function Ey(y){(0,ie._registerComponent)(new ae.wA("auth",(h,{options:g})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:G}=_.options;return((he,Le)=>{V(N&&!N.includes(":"),"invalid-api-key",{appName:he.name}),V(!G?.includes(":"),"argument-error",{appName:he.name});const Ye={apiKey:N,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ys(y)},yt=new xt(he,Le,Ye);return function Oe(y,h){const g=h?.persistence||[],_=(Array.isArray(g)?g:[g]).map(ne);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(yt,g),yt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,_)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ae.wA("auth-internal",h=>{const g=_n(h.getProvider("auth").getImmediate());return new K0(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(Vo,"0.21.0",function rg(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(Vo,"0.21.0","esm2017")}("Browser");class xd extends Ms{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function by(y){return Da.apply(this,arguments)}function Da(){return(Da=(0,f.Z)(function*(y){const h=yield Pu()._get(ku(y));return h&&(yield Pu()._remove(ku(y))),h})).apply(this,arguments)}function _f(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function Pu(){return ne(aa)}function ku(y){return z("authEvent",y.config.apiKey,y.name)}function oo(y){if(!y?.includes("?"))return{};const[h,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function wf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Lu(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ca(y=(0,O.z$)()){return!("file:"!==Lu()&&"ionic:"!==Lu()&&"capacitor:"!==Lu()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Df(){try{const y=self.localStorage,h=la();if(y)return y.setItem(h,"1"),y.removeItem(h),!function J0(y=(0,O.z$)()){return function ba(){return(0,O.w1)()&&11===document?.documentMode}()||function If(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Rd()&&(0,O.hl)()}return!1}function Rd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nl(){return(function ug(){return"http:"===Lu()||"https:"===Lu()}()||(0,O.ru)()||Ca())&&!function Ef(){return(0,O.b$)()||(0,O.UG)()}()&&Df()&&!Rd()}function Uo(){return Ca()&&typeof document<"u"}function Vu(){return(Vu=(0,f.Z)(function*(){return!!Uo()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ii={LOCAL:"local",NONE:"none",SESSION:"session"},Bo=V,jo="persistence";function Uu(y){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Od(),g=z(jo,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function Od(){var y;try{return(null===(y=function xy(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Pd=V;class Fr{constructor(){this.browserResolver=ne(class ts{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oi,this._completeRedirectFn=it,this._overrideRedirectResult=ro}_openPopup(h,g,_,S){var N=this;return(0,f.Z)(function*(){var G;q(null===(G=N.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const he=Ru(h,g,_,Re(),S);return function Cd(y,h,g,_=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let he="";const Le=Object.assign(Object.assign({},q0),{width:_.toString(),height:S.toString(),top:N,left:G}),Ye=(0,O.z$)().toLowerCase();g&&(he=Kt(Ye)?"_blank":g),$e(Ye)&&(h=h||"http://localhost",Le.scrollbars="yes");const yt=Object.entries(Le).reduce((gr,[Er,ao])=>`${gr}${Er}=${ao},`,"");if(function Gr(y=(0,O.z$)()){var h;return Pt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ye)&&"_self"!==he)return function bd(y,h){const g=document.createElement("a");g.href=y,g.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(h||"",he),new lf(null);const gt=window.open(h||"",he,yt);V(gt,y,"popup-blocked");try{gt.focus()}catch{}return new lf(gt)}(h,he,la())})()}_openRedirect(h,g,_,S){var N=this;return(0,f.Z)(function*(){return yield N._originValidation(h),function _i(y){xn().location.href=y}(Ru(h,g,_,Re(),S)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:S,promise:N}=this.eventManagers[g];return S?Promise.resolve(S):(q(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(h);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const _=yield function tg(y){return _y.apply(this,arguments)}(h),S=new Ms(h);return _.register("authEvent",N=>(V(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:S},g.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Nu,{type:Nu},S=>{var N;const G=null===(N=S?.[0])||void 0===N?void 0:N[Nu];void 0!==G&&g(!!G),Se(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function $0(y){return yy.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return $s()||ht()||Pt()}}),this.cordovaResolver=ne(class Ty{constructor(){this._redirectPersistence=Oi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=it,this._overrideRedirectResult=ro}_initialize(h){var g=this;return(0,f.Z)(function*(){const _=h._key();let S=g.eventManagers.get(_);return S||(S=new xd(h),g.eventManagers.set(_,S),g.attachCallbackListeners(h,S)),S})()}_openPopup(h){Se(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,_,S){var N=this;return(0,f.Z)(function*(){!function Cy(y){var h,g,_,S,N,G,he,Le,Ye,yt;const gt=ns();V("function"==typeof(null===(h=gt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(g=gt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(N=null===(S=null===(_=gt?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Le=null===(he=null===(G=gt?.cordova)||void 0===G?void 0:G.plugins)||void 0===he?void 0:he.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(yt=null===(Ye=gt?.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield N._initialize(h);yield G.initialized(),G.resetRedirect(),function wd(){gn.clear()}(),yield N._originValidation(h);const he=function vf(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:_f(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,S);yield function og(y,h){return Pu()._set(ku(y),h)}(h,he);const Le=yield function el(y,h,g){return Ad.apply(this,arguments)}(h,he,g),Ye=yield function ff(y){const{cordova:h}=ns();return new Promise(g=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function nr(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Le);return function Dy(y,h,g){return pf.apply(this,arguments)}(h,G,Ye)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ig(y){return hf.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:_,handleOpenURL:S,BuildInfo:N}=ns(),G=setTimeout((0,f.Z)(function*(){yield by(h),g.onEvent(wf())}),500),he=function(){var yt=(0,f.Z)(function*(gt){clearTimeout(G);const gr=yield by(h);let Er=null;gr&&gt?.url&&(Er=function tl(y,h){var g,_;const S=function HD(y){const h=oo(y),g=h.link?decodeURIComponent(h.link):void 0,_=oo(g).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return oo(S).link||S||_||g||y}(h);if(S.includes("/__/auth/callback")){const N=oo(S),G=N.firebaseError?function Fu(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,he=null===(_=null===(g=G?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],Le=he?ve(he):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(gr,gt.url)),g.onEvent(Er||wf())});return function(gr){return yt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,he);const Le=S,Ye=`${N.packageName.toLowerCase()}://`;ns().handleOpenURL=function(){var yt=(0,f.Z)(function*(gt){if(gt.toLowerCase().startsWith(Ye)&&he({url:gt}),"function"==typeof Le)try{Le(gt)}catch(gr){console.error(gr)}});return function(gt){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Oi,this._completeRedirectFn=it,this._overrideRedirectResult=ro}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,_,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,g,_,S)})()}_openRedirect(h,g,_,S){var N=this;return(0,f.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,g,_,S)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Uo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Cf(){return Vu.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function bf(y){return y.unwrap()}function Tf(y){return Bu(y)}function Bu(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Su.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=Qa;break;case"facebook.com":_=Qo;break;case"github.com":_=Tc;break;case"twitter.com":_=qr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:he,nonce:Le}=h;return N||G||S||he?he?g.startsWith("saml.")?Jo._create(g,he):Hi._fromParams({providerId:g,signInMethod:g,pendingToken:he,idToken:S,accessToken:N}):new qs(g).credential({idToken:S,accessToken:N,rawNonce:Le}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function ai(y,h){return h.catch(g=>{throw g instanceof O.ZR&&function il(y,h){var g;const _=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new X0(y,function bn(y,h){var g;const _=(0,O.m9)(y),S=h;return V(h.customData.operationType,_,"argument-error"),V(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),gu._fromError(_,S)}(y,h));else if(_){const S=Bu(h),N=h;S&&(N.credential=S,N.tenantId=_.tenantId||void 0,N.email=_.email||void 0,N.phoneNumber=_.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Tf(g),additionalUserInfo:fu(g),user:Li.getOrCreate(S)}})}function sl(y,h){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:_=>ai(y,g.confirm(_))}})).apply(this,arguments)}class X0{constructor(h,g){this.resolver=g,this.auth=function kd(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ai(bf(this.auth),this.resolver.resolveSignIn(h))}}class Li{constructor(h){this._delegate=h,this.multiFactor=function So(y){const h=(0,O.m9)(y);return To.has(h)||To.set(h,rf._fromUser(h)),To.get(h)}(h)}static getOrCreate(h){return Li.USER_MAP.has(h)||Li.USER_MAP.set(h,new Li(h)),Li.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return ai(g.auth,ru(g._delegate,h))})()}linkWithPhoneNumber(h,g){var _=this;return(0,f.Z)(function*(){return sl(_.auth,function Zr(y,h,g){return wi.apply(this,arguments)}(_._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return ai(g.auth,function Fo(y,h,g){return va.apply(this,arguments)}(g._delegate,h,Fr))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Uu(_n(g.auth)),function Z(y,h,g){return function te(y,h,g){return be.apply(this,arguments)}(y,h,g)}(g._delegate,h,Fr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return ai(g.auth,iu(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return sl(this.auth,function qc(y,h,g){return Po.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return ai(this.auth,function Xp(y,h,g){return _d.apply(this,arguments)}(this._delegate,h,Fr))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield Uu(_n(g.auth)),function b(y,h,g){return function x(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,Fr)})()}sendEmailVerification(h){return function Oc(y,h){return sa.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function _r(y,h){return Xa.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function ud(y,h){return Ks((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Zs(y,h){return Ks((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function wr(y,h){return vt.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Fc(y,h){return Lc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Pc(y,h,g){return lu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Li.USER_MAP=new WeakMap;const Ta=V;let ju=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;Ta(S,"invalid-api-key",{appName:g.name}),Ta(S,"invalid-api-key",{appName:g.name});const N=typeof window<"u"?Fr:void 0;this._delegate=_.initialize({options:{persistence:Di(S,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Li.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Wa(y,h,g){const _=_n(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!g?.disableWarnings,N=Mi(h),{host:G,port:he}=function Ln(y){const h=Mi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const N=S[1];return{host:N,port:vs(_.substr(N.length+1))}}{const[N,G]=_.split(":");return{host:N,port:vs(G)}}}(h);_.config.emulator={url:`${N}//${G}${null===he?"":`:${he}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:he,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function _s(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function oi(y,h){return ea.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ta(this._delegate,g)}confirmPasswordReset(g,_){return function uu(y,h,g){return Do.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var S=this;return(0,f.Z)(function*(){return ai(S._delegate,function na(y,h,g){return Cn.apply(this,arguments)}(S._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function cu(y,h){return ia.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Ki(y,h){return"EMAIL_SIGNIN"===Ya.parseLink(h)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Ta(nl(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function Ke(y,h){return nt.apply(this,arguments)}(g._delegate,Fr);return _?ai(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Q0(y,h){_n(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,_,S){const{next:N,error:G,complete:he}=ol(g,_,S);return this._delegate.onAuthStateChanged(N,G,he)}onIdTokenChanged(g,_,S){const{next:N,error:G,complete:he}=ol(g,_,S);return this._delegate.onIdTokenChanged(N,G,he)}sendSignInLinkToEmail(g,_){return function Rc(y,h,g){return Ws.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function au(y,h,g){return Dn.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,f.Z)(function*(){let S;switch(function cg(y,h){Bo(Object.values(Ii).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Bo(h!==Ii.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Bo(h===Ii.NONE,y,"unsupported-persistence-type"):Rd()?Bo(h===Ii.NONE||h===Ii.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Bo(h===Ii.NONE||Df(),y,"unsupported-persistence-type")}(_._delegate,g),g){case Ii.SESSION:S=Oi;break;case Ii.LOCAL:S=(yield ne(xo)._isAvailable())?xo:aa;break;case Ii.NONE:S=L;break;default:return Se("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ai(this._delegate,function Xh(y){return In.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ai(this._delegate,wn(this._delegate,g))}signInWithCustomToken(g){return ai(this._delegate,function Ac(y,h){return Xo.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return ai(this._delegate,function Ni(y,h,g){return wn((0,O.m9)(y),Ri.credential(h,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return ai(this._delegate,function Kp(y,h,g){return ra.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return sl(this._delegate,function af(y,h,g){return Tu.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,f.Z)(function*(){return Ta(nl(),_._delegate,"operation-not-supported-in-this-environment"),ai(_._delegate,function Au(y,h,g){return ya.apply(this,arguments)}(_._delegate,g,Fr))})()}signInWithRedirect(g){var _=this;return(0,f.Z)(function*(){return Ta(nl(),_._delegate,"operation-not-supported-in-this-environment"),yield Uu(_._delegate),function Tn(y,h,g){return function Ed(y,h,g){return D.apply(this,arguments)}(y,h,g)}(_._delegate,g,Fr)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Mc(y,h){return ad.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ii,y})();function ol(y,h,g){let _=y;"function"!=typeof y&&({next:_,error:h,complete:g}=y);const S=_;return{next:G=>S(G&&Li.getOrCreate(G)),error:h,complete:g}}function Di(y,h){const g=function rl(y,h){const g=Od();if(!g)return[];const _=z(jo,y,h);switch(g.getItem(_)){case Ii.NONE:return[L];case Ii.LOCAL:return[xo,Oi];case Ii.SESSION:return[Oi];default:return[]}}(y,h);if(typeof self<"u"&&!g.includes(xo)&&g.push(xo),typeof window<"u")for(const _ of[aa,Oi])g.includes(_)||g.push(_);return g.includes(L)||g.push(L),g}class Af{constructor(){this.providerId="phone",this._delegate=new Su(bf(J.Z.auth()))}static credential(h,g){return Su.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Af.PHONE_SIGN_IN_METHOD=Su.PHONE_SIGN_IN_METHOD,Af.PROVIDER_ID=Su.PROVIDER_ID;const lg=V;class ew{constructor(h,g,_=J.Z.app()){var S;lg(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new sr(h,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xf(y){y.INTERNAL.registerComponent(new ae.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new ju(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ri,FacebookAuthProvider:Qo,GithubAuthProvider:Tc,GoogleAuthProvider:Qa,OAuthProvider:qs,SAMLAuthProvider:ii,PhoneAuthProvider:Af,PhoneMultiFactorGenerator:Jc,RecaptchaVerifier:ew,TwitterAuthProvider:qr,Auth:ju,AuthCredential:hr,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.0")}(J.Z)},8766:(lt,Ce,k)=>{k.d(Ce,{Lj:()=>Se,X3:()=>ot});var f=k(5861);let O,ie;const ae=new WeakMap,ce=new WeakMap,le=new WeakMap,U=new WeakMap,B=new WeakMap;let xe={get(V,pe,q){if(V instanceof IDBTransaction){if("done"===pe)return ce.get(V);if("objectStoreNames"===pe)return V.objectStoreNames||le.get(V);if("store"===pe)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return de(V[pe])},set:(V,pe,q)=>(V[pe]=q,!0),has:(V,pe)=>V instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in V};function ge(V){return"function"==typeof V?function tt(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ue(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...pe){return V.apply(Qe(this),pe),de(ae.get(this))}:function(...pe){return de(V.apply(Qe(this),pe))}:function(pe,...q){const Q=V.call(Qe(this),pe,...q);return le.set(Q,pe.sort?pe.sort():[pe]),de(Q)}}(V):(V instanceof IDBTransaction&&function ke(V){if(ce.has(V))return;const pe=new Promise((q,Q)=>{const ne=()=>{V.removeEventListener("complete",ee),V.removeEventListener("error",Oe),V.removeEventListener("abort",Oe)},ee=()=>{q(),ne()},Oe=()=>{Q(V.error||new DOMException("AbortError","AbortError")),ne()};V.addEventListener("complete",ee),V.addEventListener("error",Oe),V.addEventListener("abort",Oe)});ce.set(V,pe)}(V),((V,pe)=>pe.some(q=>V instanceof q))(V,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,xe):V)}function de(V){if(V instanceof IDBRequest)return function W(V){const pe=new Promise((q,Q)=>{const ne=()=>{V.removeEventListener("success",ee),V.removeEventListener("error",Oe)},ee=()=>{q(de(V.result)),ne()},Oe=()=>{Q(V.error),ne()};V.addEventListener("success",ee),V.addEventListener("error",Oe)});return pe.then(q=>{q instanceof IDBCursor&&ae.set(q,V)}).catch(()=>{}),B.set(pe,V),pe}(V);if(U.has(V))return U.get(V);const pe=ge(V);return pe!==V&&(U.set(V,pe),B.set(pe,V)),pe}const Qe=V=>B.get(V);function ot(V,pe,{blocked:q,upgrade:Q,blocking:ne,terminated:ee}={}){const Oe=indexedDB.open(V,pe),Re=de(Oe);return Q&&Oe.addEventListener("upgradeneeded",dt=>{Q(de(Oe.result),dt.oldVersion,dt.newVersion,de(Oe.transaction))}),q&&Oe.addEventListener("blocked",()=>q()),Re.then(dt=>{ee&&dt.addEventListener("close",()=>ee()),ne&&dt.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Re}function Se(V,{blocked:pe}={}){const q=indexedDB.deleteDatabase(V);return pe&&q.addEventListener("blocked",()=>pe()),de(q).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ve=new Map;function Be(V,pe){if(!(V instanceof IDBDatabase)||pe in V||"string"!=typeof pe)return;if(Ve.get(pe))return Ve.get(pe);const q=pe.replace(/FromIndex$/,""),Q=pe!==q,ne=Ee.includes(q);if(!(q in(Q?IDBIndex:IDBObjectStore).prototype)||!ne&&!ve.includes(q))return;const ee=function(){var Oe=(0,f.Z)(function*(Re,...dt){const Yt=this.transaction(Re,ne?"readwrite":"readonly");let Lt=Yt.store;return Q&&(Lt=Lt.index(dt.shift())),(yield Promise.all([Lt[q](...dt),ne&&Yt.done]))[0]});return function(dt){return Oe.apply(this,arguments)}}();return Ve.set(pe,ee),ee}!function we(V){xe=V(xe)}(V=>({...V,get:(pe,q,Q)=>Be(pe,q)||V.get(pe,q,Q),has:(pe,q)=>!!Be(pe,q)||V.has(pe,q)}))},5861:(lt,Ce,k)=>{function f(O,ie,re,ue,ae,ce,le){try{var U=O[ce](le),B=U.value}catch(W){return void re(W)}U.done?ie(B):Promise.resolve(B).then(ue,ae)}function J(O){return function(){var ie=this,re=arguments;return new Promise(function(ue,ae){var ce=O.apply(ie,re);function le(B){f(ce,ue,ae,le,U,"next",B)}function U(B){f(ce,ue,ae,le,U,"throw",B)}le(void 0)})}}k.d(Ce,{Z:()=>J})}},lt=>{lt(lt.s=3500)}]);